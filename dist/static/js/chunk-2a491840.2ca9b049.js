(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a491840"],{"03f9":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("video",{ref:"video",attrs:{src:""}})])},n=[],i=(o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),{name:"scanCode",data:function(){return{canvasWidth:0,canvasHeight:0,cameraStream:""}},methods:{screenShot:function(){console.log("截图");var e=this.$refs.video;if(e){var t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var o=t.toDataURL("images/png");this.decodeQrcode(o)}},decodeQrcode:function(e){var t=this;qrcode.decode(e),qrcode.callback=function(e){"error decoding QR Code"==e?setTimeout((function(){t.screenShot()}),100):(e=decodeURIComponent(escape(e)),t.$EventBus.$emit("qrcodeResult",e),t.$router.go(-1))}}},computed:{canvasStyle:function(){return{width:this.canvasWidth+"px",height:this.canvasHeight+"px"}}},mounted:function(){var e={video:{facingMode:"environment"}},t=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then((function(e){t.$refs.video.srcObject=e,t.cameraStream=e,t.$refs.video.onloadedmetadata=function(e){t.$refs.video.play(),t.screenShot()}})).catch((function(e){alert(e),console.log("失败了",e)})):navigator.getUserMedia?navigator.getUserMedia(e).then((function(e){var o=t.$refs.video;void 0!==o.mozSrcObject?o.mozSrcObject=e:o.src=(window.URL||window.webkitURL||window.mozURL||window.msURL)&&window.URL.createObjectURL(e)||e,t.$refs.video.onloadedmetadata=function(e){t.$refs.video.play(),t.screenShot()}})).catch((function(e){alert(e)})):alert("不行")},beforeDestroy:function(){this.cameraStream&&this.cameraStream.getVideoTracks()[0].stop()}}),c=i,r=(o("ab79"),o("2877")),d=Object(r["a"])(c,a,n,!1,null,"5f9b5852",null);t["default"]=d.exports},"8fbd":function(e,t,o){},ab79:function(e,t,o){"use strict";var a=o("8fbd"),n=o.n(a);n.a}}]);