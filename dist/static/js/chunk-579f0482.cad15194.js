(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-579f0482"],{"00d8":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var a=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?n.push(t.charAt(a>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,a=0;r<e.length;a=++r%4)0!=a&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(r))>>>6-2*a);return n}};e.exports=n})()},"0a06":function(e,t,n){"use strict";var r=n("c532"),a=n("30b5"),s=n("f6b4"),i=n("5270"),o=n("4a7b");function l(e){this.defaults=e,this.interceptors={request:new s,response:new s}}l.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=o(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[i,void 0],n=Promise.resolve(e);this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));while(t.length)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=o(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(o(r||{},{method:e,url:t,data:n}))}})),e.exports=l},"0d4e":function(e,t,n){var r;!function(e){"use strict";var t=function(){},n=function(e){return new i(e)};n.IsOpen=function(){var e=n.Stream;if(e){var t=e.getTracks&&e.getTracks()||e.audioTracks||[],r=t[0];if(r){var a=r.readyState;return"live"==a||a==r.LIVE}}return!1},n.BufferSize=4096,n.Destroy=function(){for(var e in a("Recorder Destroy"),r)r[e]()};var r={};n.BindDestroy=function(e,t){r[e]=t},n.Support=function(){var t=e.AudioContext;if(t||(t=e.webkitAudioContext),!t)return!1;var r=navigator.mediaDevices||{};return r.getUserMedia||(r=navigator).getUserMedia||(r.getUserMedia=r.webkitGetUserMedia||r.mozGetUserMedia||r.msGetUserMedia),!!r.getUserMedia&&(n.Scope=r,n.Ctx&&"closed"!=n.Ctx.state||(n.Ctx=new t,n.BindDestroy("Ctx",(function(){var e=n.Ctx;e&&e.close&&e.close()}))),!0)},n.SampleData=function(e,t,n,r,a){r||(r={});var s=r.index||0,i=r.offset||0,o=r.frameNext||[];a||(a={});var l=a.frameSize||1;a.frameType&&(l="mp3"==a.frameType?1152:1);for(var f=0,c=s;c<e.length;c++)f+=e[c].length;f=Math.max(0,f-Math.floor(i));var _=t/n;1<_?f=Math.floor(f/_):(_=1,n=t),f+=o.length;var u=new Int16Array(f),h=0;for(c=0;c<o.length;c++)u[h]=o[c],h++;for(var p=e.length;s<p;s++){for(var d=e[s],m=(c=i,d.length);c<m;){var b=Math.floor(c),v=Math.ceil(c),g=c-b,w=d[b],y=v<m?d[v]:(e[s+1]||[w])[0]||0;u[h]=w+(y-w)*g,h++,c+=_}i=c-m}o=null;var S=u.length%l;if(0<S){var R=2*(u.length-S);o=new Int16Array(u.buffer.slice(R)),u=new Int16Array(u.buffer.slice(0,R))}return{index:s,offset:i,frameNext:o,sampleRate:n,data:u}},n.PowerLevel=function(e,t){var n=e/t||0;return n<1251?Math.round(n/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(n/1e4)/Math.log(10)))))};var a=function(e,t){var n=new Date,r=("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+"."+("00"+n.getMilliseconds()).substr(-3),a=["["+r+" Recorder]"+e],s=arguments,i=2,o=console.log;for("number"==typeof t?o=1==t?console.error:3==t?console.warn:o:i=1;i<s.length;i++)a.push(s[i]);o.apply(console,a)};n.CLog=a;var s=0;function i(e){this.id=++s,n.Traffic&&n.Traffic();var r={type:"mp3",bitRate:16,sampleRate:16e3,onProcess:t};for(var a in e)r[a]=e[a];this.set=r,this._S=9}n.Sync={O:9,C:9},n.prototype=i.prototype={open:function(r,s){var i=this;r=r||t;var o=function(e,t){a("录音open失败："+e+",isUserNotAllow:"+(t=!!t),1),s&&s(e,t)},l=function(){a("open成功"),r(),i._SO=0},f=function(t,n){try{e.top.a}catch(t){return void o('无权录音(跨域，请尝试给iframe添加麦克风访问策略，如allow="camera;microphone")')}/Permission|Allow/i.test(t)?o("用户拒绝了录音权限",!0):!1===e.isSecureContext?o("无权录音(需https)"):/Found/i.test(t)?o(n+"，无可用麦克风"):o(n)},c=n.Sync,_=++c.O,u=c.C;i._O=i._O_=_,i._SO=i._S;var h=function(){if(u!=c.C||!i._O){var e="open被取消";return _==c.O?i.close():e="open被中断",o(e),!0}};if(n.IsOpen())l();else if(n.Support()){var p=i.envCheck({envName:"H5",canProcess:!0});if(p)o("不能录音："+p);else{var d=function(e){(n.Stream=e)._call={},h()||setTimeout((function(){h()||(n.IsOpen()?(function(){var e=n.Ctx,t=n.Stream,r=t._m=e.createMediaStreamSource(t),a=t._p=(e.createScriptProcessor||e.createJavaScriptNode).call(e,n.BufferSize,1,1);r.connect(a),a.connect(e.destination);var s=t._call;a.onaudioprocess=function(e){for(var t in s){for(var n=e.inputBuffer.getChannelData(0),r=n.length,a=new Int16Array(r),i=0,o=0;o<r;o++){var l=Math.max(-1,Math.min(1,n[o]));l=l<0?32768*l:32767*l,a[o]=l,i+=Math.abs(l)}for(var f in s)s[f](a,i);return}}}(),l()):o("录音功能无效：无音频流"))}),100)},m=function(e){var t=e.name||e.message||e.code+":"+e;a("请求录音权限错误",1,e),f(t,"无法录音："+t)},b=n.Scope.getUserMedia({audio:!0},d,m);b&&b.then&&b.then(d)[r&&"catch"](m)}}else f("","此浏览器不支持录音")},close:function(e){e=e||t,this._stop();var r=n.Sync;if(this._O=0,this._O_!=r.O)return a("close被忽略",3),void e();r.C++;var s,i=n.Stream;if(i){(s=n.Stream)._m&&(s._m.disconnect(),s._p.disconnect(),s._p.onaudioprocess=s._p=s._m=null);for(var o=i.getTracks&&i.getTracks()||i.audioTracks||[],l=0;l<o.length;l++){var f=o[l];f.stop&&f.stop()}i.stop&&i.stop()}n.Stream=0,a("close"),e()},mock:function(e,t){var n=this;return n._stop(),n.isMock=1,n.mockEnvInfo=null,n.buffers=[e],n.recSize=e.length,n.srcSampleRate=t,n},envCheck:function(e){var t,n=this.set;return t||(this[n.type+"_envCheck"]?t=this[n.type+"_envCheck"](e,n):n.takeoffEncodeChunk&&(t=n.type+"类型不支持设置takeoffEncodeChunk")),t||""},envStart:function(e,t){var n=this,r=n.set;if(n.isMock=e?1:0,n.mockEnvInfo=e,n.buffers=[],n.recSize=0,n.envInLast=0,n.envInFirst=0,n.envInFix=0,n.envInFixTs=[],r.sampleRate=Math.min(t,r.sampleRate),n.srcSampleRate=t,n.engineCtx=0,n[r.type+"_start"]){var a=n.engineCtx=n[r.type+"_start"](r);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var r=this,s=r.set,i=r.engineCtx,o=r.srcSampleRate,l=e.length,f=n.PowerLevel(t,l),c=r.buffers,_=c.length;c.push(e);var u=c,h=_,p=Date.now(),d=Math.round(l/o*1e3);r.envInLast=p,1==r.buffers.length&&(r.envInFirst=p-d);var m=r.envInFixTs;m.splice(0,0,{t:p,d:d});for(var b=p,v=0,g=0;g<m.length;g++){var w=m[g];if(3e3<p-w.t){m.length=g;break}b=w.t,v+=w.d}var y=m[1],S=p-b;if(S/3<S-v&&(y&&1e3<S||6<=m.length)){var R=p-y.t-d;if(d/5<R){var A=!s.disableEnvInFix;if(a("["+p+"]"+(A?"":"未")+"补偿"+R+"ms",3),r.envInFix+=R,A){var M=new Int16Array(R*o/1e3);l+=M.length,c.push(M)}}}var x=r.recSize,T=l,B=x+T;if(r.recSize=B,i){var E=n.SampleData(c,o,s.sampleRate,i.chunkInfo);i.chunkInfo=E,B=(x=i.pcmSize)+(T=E.data.length),i.pcmSize=B,c=i.pcmDatas,_=c.length,c.push(E.data),o=E.sampleRate}var k=Math.round(B/o*1e3),P=c.length,I=u.length,L=function(){for(var e=O?0:-T,t=null==c[0],n=_;n<P;n++){var a=c[n];null==a?t=1:(e+=a.length,i&&a.length&&r[s.type+"_encode"](i,a))}if(t&&i)for(n=h,u[0]&&(n=0);n<I;n++)u[n]=null;t&&(e=O?T:0,c[0]=null),i?i.pcmSize+=e:r.recSize+=e},O=s.onProcess(c,f,k,o,_,L);if(!0===O){var C=0;for(g=_;g<P;g++)null==c[g]?C=1:c[g]=new Int16Array(0);C?a("未进入异步前不能清除buffers",3):i?i.pcmSize-=T:r.recSize-=T}else L()},start:function(){if(n.IsOpen()){a("开始录音");var e=this,t=(e.set,n.Ctx);if(e._stop(),e.state=0,e.envStart(null,t.sampleRate),e._SO&&e._SO+1!=e._S)a("start被中断",3);else{e._SO=0;var r=function(){e.state=1,e.resume()};"suspended"==t.state?t.resume().then((function(){a("ctx resume"),r()})):r()}}else a("未open",1)},pause:function(){this.state&&(this.state=2,a("pause"),delete n.Stream._call[this.id])},resume:function(){var e=this;e.state&&(e.state=1,a("resume"),e.envResume(),n.Stream._call[e.id]=function(t,n){1==e.state&&e.envIn(t,n)})},_stop:function(e){var t=this,n=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[n.type+"_stop"]&&(t[n.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(e,t,r){var s,i=this,o=i.set;a("Stop "+(i.envInLast?i.envInLast-i.envInFirst+"ms 补"+i.envInFix+"ms":"-"));var l=function(){i._stop(),r&&i.close()},f=function(e){a("结束录音失败："+e,1),t&&t(e),l()},c=function(t,n){if(a("结束录音 编码"+(Date.now()-s)+"ms 音频"+n+"ms/"+t.size+"b"),o.takeoffEncodeChunk)a("启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据",3);else if(t.size<Math.max(100,n/2))return void f("生成的"+o.type+"无效");e&&e(t,n),l()};if(!i.isMock){if(!i.state)return void f("未开始录音");i._stop(!0)}var _=i.recSize;if(_)if(i.buffers[0])if(i[o.type]){if(i.isMock){var u=i.envCheck(i.mockEnvInfo||{envName:"mock",canProcess:!1});if(u)return void f("录音错误："+u)}var h=i.engineCtx;if(i[o.type+"_complete"]&&h){var p=Math.round(h.pcmSize/o.sampleRate*1e3);return s=Date.now(),void i[o.type+"_complete"](h,(function(e){c(e,p)}),f)}s=Date.now();var d=n.SampleData(i.buffers,i.srcSampleRate,o.sampleRate);o.sampleRate=d.sampleRate;var m=d.data;p=Math.round(m.length/o.sampleRate*1e3),a("采样"+_+"->"+m.length+" 花:"+(Date.now()-s)+"ms"),setTimeout((function(){s=Date.now(),i[o.type](m,(function(e){c(e,p)}),(function(e){f(e)}))}))}else f("未加载"+o.type+"编码器");else f("音频被释放");else f("未采集到录音")}},e.Recorder&&e.Recorder.Destroy(),(e.Recorder=n).LM="2020-11-15 21:36:11",n.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1",n.Traffic=function(){var e=n.TrafficImgUrl;if(e){var t=n.Traffic,r=location.href.replace(/#.*/,"");if(0==e.indexOf("//")&&(e=/^https:/i.test(r)?"https:"+e:"http:"+e),!t[r]){t[r]=1;var s=new Image;s.src=e,a("Traffic Analysis Image: Recorder.TrafficImgUrl="+n.TrafficImgUrl)}}}}(window),r=function(){return Recorder}.call(t,n,t,e),void 0!==r&&(e.exports=r),e.exports&&(e.exports=Recorder),function(){"use strict";var e;Recorder.prototype.enc_mp3={stable:!0,testmsg:"采样率范围48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000"},Recorder.prototype.mp3=function(e,t,n){var s=this.set,i=e.length,o=this.mp3_start(s);if(o)return this.mp3_encode(o,e),void this.mp3_complete(o,t,n,1);var l=new Recorder.lamejs.Mp3Encoder(1,s.sampleRate,s.bitRate),f=[],c=0,_=0,u=function(){if(c<i)0<(n=l.encodeBuffer(e.subarray(c,c+57600))).length&&(_+=n.buffer.byteLength,f.push(n.buffer)),c+=57600,setTimeout(u);else{var n;0<(n=l.flush()).length&&(_+=n.buffer.byteLength,f.push(n.buffer));var o=r.fn(f,_,i,s.sampleRate);a(o,s),t(new Blob(f,{type:"audio/mp3"}))}};u()},Recorder.BindDestroy("mp3Worker",(function(){console.log("mp3Worker Destroy"),e&&e.terminate(),e=null})),Recorder.prototype.mp3_envCheck=function(e,t){var r="";return t.takeoffEncodeChunk&&(e.canProcess?n()||(r="当前浏览器版本太低，无法实时处理"):r=e.envName+"环境不支持实时处理"),r},Recorder.prototype.mp3_start=function(e){return n(e)};var t={id:0},n=function(n){var a=e;try{if(!a){var s=");wk_lame();var wk_ctxs={};self.onmessage="+function(e){var t=e.data,n=wk_ctxs[t.id];if("init"==t.action)wk_ctxs[t.id]={sampleRate:t.sampleRate,bitRate:t.bitRate,takeoff:t.takeoff,mp3Size:0,pcmSize:0,encArr:[],encObj:new wk_lame.Mp3Encoder(1,t.sampleRate,t.bitRate)};else if(!n)return;switch(t.action){case"stop":n.encObj=null,delete wk_ctxs[t.id];break;case"encode":n.pcmSize+=t.pcm.length,0<(r=n.encObj.encodeBuffer(t.pcm)).length&&(n.takeoff?self.postMessage({action:"takeoff",id:t.id,chunk:r}):(n.mp3Size+=r.buffer.byteLength,n.encArr.push(r.buffer)));break;case"complete":var r;0<(r=n.encObj.flush()).length&&(n.takeoff?self.postMessage({action:"takeoff",id:t.id,chunk:r}):(n.mp3Size+=r.buffer.byteLength,n.encArr.push(r.buffer)));var a=wk_mp3TrimFix.fn(n.encArr,n.mp3Size,n.pcmSize,n.sampleRate);self.postMessage({action:t.action,id:t.id,blob:new Blob(n.encArr,{type:"audio/mp3"}),meta:a})}};s+=";var wk_mp3TrimFix={rm:"+r.rm+",fn:"+r.fn+"}";var i=Recorder.lamejs.toString(),o=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",i,s],{type:"text/javascript"}));a=new Worker(o),setTimeout((function(){(window.URL||webkitURL).revokeObjectURL(o)}),1e4),a.onmessage=function(e){var n=e.data,r=t[n.id];r&&("takeoff"==n.action?r.set.takeoffEncodeChunk(new Uint8Array(n.chunk.buffer)):(r.call&&r.call(n),r.call=null))}}var l={worker:a,set:n,takeoffQueue:[]};return n?(l.id=++t.id,t[l.id]=l,a.postMessage({action:"init",id:l.id,sampleRate:n.sampleRate,bitRate:n.bitRate,takeoff:!!n.takeoffEncodeChunk,x:new Int16Array(5)})):a.postMessage({x:new Int16Array(5)}),e=a,l}catch(n){return a&&a.terminate(),console.error(n),null}};Recorder.prototype.mp3_stop=function(e){if(e&&e.worker){e.worker.postMessage({action:"stop",id:e.id}),e.worker=null,delete t[e.id];var n=-1;for(var r in t)n++;n&&console.warn("mp3 worker剩"+n+"个在串行等待")}},Recorder.prototype.mp3_encode=function(e,t){e&&e.worker&&e.worker.postMessage({action:"encode",id:e.id,pcm:t})},Recorder.prototype.mp3_complete=function(e,t,n,r){var s=this;e&&e.worker?(e.call=function(n){a(n.meta,e.set),t(n.blob),r&&s.mp3_stop(e)},e.worker.postMessage({action:"complete",id:e.id})):n("mp3编码器未打开")},Recorder.mp3ReadMeta=function(e,t){var n="object"==typeof window?window.parseInt:self.parseInt,r=new Uint8Array(e[0]||[]);if(r.length<4)return null;var a=function(e,t){return("0000000"+((t||r)[e]||0).toString(2)).substr(-8)},s=a(0)+a(1),i=a(2)+a(3);if(!/^1{11}/.test(s))return null;var o={"00":2.5,10:2,11:1}[s.substr(11,2)],l={"01":3}[s.substr(13,2)],f={1:[44100,48e3,32e3],2:[22050,24e3,16e3],2.5:[11025,12e3,8e3]}[o];f&&(f=f[n(i.substr(4,2),2)]);var c=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][1==o?1:0][n(i.substr(0,4),2)];if(!(o&&l&&c&&f))return null;for(var _=Math.round(8*t/c),u=1==l?384:2==l||1==o?1152:576,h=u/f*1e3,p=Math.floor(u*c/8/f*1e3),d=0,m=0,b=0;b<e.length;b++){var v=e[b];if(p+3<=(m+=v.byteLength)){var g=new Uint8Array(v);d="1"==a(v.byteLength-(m-(p+3)+1),g).charAt(6);break}}return d&&p++,{version:o,layer:l,sampleRate:f,bitRate:c,duration:_,size:t,hasPadding:d,frameSize:p,frameDurationFloat:h}};var r={rm:Recorder.mp3ReadMeta,fn:function(e,t,n,r){var a=this.rm(e,t);if(!a)return{err:"mp3非预定格式"};var s=Math.round(n/r*1e3),i=Math.floor((a.duration-s)/a.frameDurationFloat);if(0<i){var o=i*a.frameSize-(a.hasPadding?1:0);t-=o;for(var l=0,f=[],c=0;c<e.length;c++){var _=e[c];if(o<=0)break;o>=_.byteLength?(o-=_.byteLength,f.push(_),e.splice(c,1),c--):(e[c]=_.slice(o),l=_,o=0)}if(!this.rm(e,t)){for(l&&(e[0]=l),c=0;c<f.length;c++)e.splice(c,0,f[c]);a.err="fix后数据错误，已还原，错误原因不明"}var u=a.trimFix={};u.remove=i,u.removeDuration=Math.round(i*a.frameDurationFloat),u.duration=Math.round(8*t/a.bitRate)}return a}},a=function(e,t){var n="MP3信息 ";(e.sampleRate&&e.sampleRate!=t.sampleRate||e.bitRate&&e.bitRate!=t.bitRate)&&(console.warn(n+"和设置的不匹配set:"+t.bitRate+"kbps "+t.sampleRate+"hz，已更新set:"+e.bitRate+"kbps "+e.sampleRate+"hz",t),t.sampleRate=e.sampleRate,t.bitRate=e.bitRate);var r=e.trimFix;r?(n+="Fix移除"+r.remove+"帧"+r.removeDuration+"ms -> "+r.duration+"ms",2<r.remove&&(e.err=(e.err?e.err+", ":"")+"移除帧数过多")):n+=(e.duration||"-")+"ms",e.err?console.error(n,e.err,e):console.log(n,e)}}(),function(){"use strict";function e(){var t=function(e){return Math.log(e)/Math.log(10)};function n(e){return new Int8Array(e)}function r(e){return new Int16Array(e)}function a(e){return new Int32Array(e)}function s(e){return new Float32Array(e)}function i(e){return new Float64Array(e)}function o(e){if(1==e.length)return s(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(o(e));return n}function l(e){if(1==e.length)return a(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(l(e));return n}function f(e){if(1==e.length)return r(e[0]);var t=e[0];e=e.slice(1);for(var n=[],a=0;a<t;a++)n.push(f(e));return n}function c(e){if(1==e.length)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(c(e));return n}var _={fill:function(e,t,n,r){if(2==arguments.length)for(var a=0;a<e.length;a++)e[a]=t;else for(a=t;a<n;a++)e[a]=r}},u={arraycopy:function(e,t,n,r,a){for(var s=t+a;t<s;)n[r++]=e[t++]}},h={};function p(e){this.ordinal=e}h.SQRT2=1.4142135623730951,h.FAST_LOG10=function(e){return t(e)},h.FAST_LOG10_X=function(e,n){return t(e)*n},p.short_block_allowed=new p(0),p.short_block_coupled=new p(1),p.short_block_dispensed=new p(2),p.short_block_forced=new p(3);var d={};function m(e){this.ordinal=e}function b(e){var t=e;this.ordinal=function(){return t}}function v(){var e=null;function t(e){this.bits=0|e}this.qupvt=null,this.setModules=function(t){this.qupvt=t,e=t};var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r(e,t,n,r,a,s){var i=.5946/t;for(e>>=1;0!=e--;)a[s++]=i>n[r++]?0:1,a[s++]=i>n[r++]?0:1}function s(t,n,r,a,s,i){var o=(t>>=1)%2;for(t>>=1;0!=t--;){var l,f,c,_,u,h,p,d;l=r[a++]*n,f=r[a++]*n,u=0|l,c=r[a++]*n,h=0|f,_=r[a++]*n,p=0|c,l+=e.adj43[u],d=0|_,f+=e.adj43[h],s[i++]=0|l,c+=e.adj43[p],s[i++]=0|f,_+=e.adj43[d],s[i++]=0|c,s[i++]=0|_}0!=o&&(u=0|(l=r[a++]*n),h=0|(f=r[a++]*n),l+=e.adj43[u],f+=e.adj43[h],s[i++]=0|l,s[i++]=0|f)}var i=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function o(e,t,n,r){var a=function(e,t,n){var r=0,a=0;do{var s=e[t++],i=e[t++];r<s&&(r=s),a<i&&(a=i)}while(t<n);return r<a&&(r=a),r}(e,t,n);switch(a){case 0:return a;case 1:return function(e,t,n,r){var a=0,s=R.ht[1].hlen;do{var i=2*e[t+0]+e[t+1];t+=2,a+=s[i]}while(t<n);return r.bits+=a,1}(e,t,n,r);case 2:case 3:return function(e,t,n,r,a){var s,i,o=0,l=R.ht[r].xlen;i=2==r?R.table23:R.table56;do{var f=e[t+0]*l+e[t+1];t+=2,o+=i[f]}while(t<n);return(s=65535&o)<(o>>=16)&&(o=s,r++),a.bits+=o,r}(e,t,n,i[a-1],r);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(e,t,n,r,a){var s=0,i=0,o=0,l=R.ht[r].xlen,f=R.ht[r].hlen,c=R.ht[r+1].hlen,_=R.ht[r+2].hlen;do{var u=e[t+0]*l+e[t+1];t+=2,s+=f[u],i+=c[u],o+=_[u]}while(t<n);var h=r;return i<s&&(s=i,h++),o<s&&(s=o,h=r+2),a.bits+=s,h}(e,t,n,i[a-1],r);default:if(T.IXMAX_VAL<a)return r.bits=T.LARGE_BITS,-1;var s,o;for(a-=15,s=24;s<32&&!(R.ht[s].linmax>=a);s++);for(o=s-8;o<24&&!(R.ht[o].linmax>=a);o++);return function(e,t,n,r,a,s){var i,o=65536*R.ht[r].xlen+R.ht[a].xlen,l=0;do{var f=e[t++],c=e[t++];0!=f&&(14<f&&(f=15,l+=o),f*=16),0!=c&&(14<c&&(c=15,l+=o),f+=c),l+=R.largetbl[f]}while(t<n);return(i=65535&l)<(l>>=16)&&(l=i,r=a),s.bits+=l,r}(e,t,n,o,s,r)}}function l(e,n,r,a,s,i,l,f){for(var c=n.big_values,_=2;_<I.SBMAX_l+1;_++){var u=e.scalefac_band.l[_];if(c<=u)break;var h=s[_-2]+n.count1bits;if(r.part2_3_length<=h)break;var p=new t(h),d=o(a,u,c,p);h=p.bits,r.part2_3_length<=h||(r.assign(n),r.part2_3_length=h,r.region0_count=i[_-2],r.region1_count=_-2-i[_-2],r.table_select[0]=l[_-2],r.table_select[1]=f[_-2],r.table_select[2]=d)}}this.noquant_count_bits=function(e,n,r){var a=n.l3_enc,s=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(null!=r&&(r.sfb_count1=0);1<s&&0==(a[s-1]|a[s-2]);s-=2);n.count1=s;for(var i=0,l=0;3<s;s-=4){var f;if(1<(2147483647&(a[s-1]|a[s-2]|a[s-3]|a[s-4])))break;f=2*(2*(2*a[s-4]+a[s-3])+a[s-2])+a[s-1],i+=R.t32l[f],l+=R.t33l[f]}var c=i;if(n.count1table_select=0,l<i&&(c=l,n.count1table_select=1),n.count1bits=c,0==(n.big_values=s))return c;if(n.block_type==I.SHORT_TYPE)(i=3*e.scalefac_band.s[3])>n.big_values&&(i=n.big_values),l=n.big_values;else if(n.block_type==I.NORM_TYPE){if(i=n.region0_count=e.bv_scf[s-2],l=n.region1_count=e.bv_scf[s-1],l=e.scalefac_band.l[i+l+2],i=e.scalefac_band.l[i+1],l<s){var _=new t(c);n.table_select[2]=o(a,l,s,_),c=_.bits}}else n.region0_count=7,n.region1_count=I.SBMAX_l-1-7-1,(l=s)<(i=e.scalefac_band.l[8])&&(i=l);if(i=Math.min(i,s),l=Math.min(l,s),0<i&&(_=new t(c),n.table_select[0]=o(a,0,i,_),c=_.bits),i<l&&(_=new t(c),n.table_select[1]=o(a,i,l,_),c=_.bits),2==e.use_best_huffman&&(n.part2_3_length=c,best_huffman_divide(e,n),c=n.part2_3_length),null!=r&&n.block_type==I.NORM_TYPE){for(var u=0;e.scalefac_band.l[u]<n.big_values;)u++;r.sfb_count1=u}return c},this.count_bits=function(t,n,a,i){var o=a.l3_enc,l=T.IXMAX_VAL/e.IPOW20(a.global_gain);if(a.xrpow_max>l)return T.LARGE_BITS;if(function(t,n,a,i,o){var l,f,c,u=0,h=0,p=0,d=0,m=n,b=0,v=m,g=0,w=t,y=0;for(c=null!=o&&i.global_gain==o.global_gain,f=i.block_type==I.SHORT_TYPE?38:21,l=0;l<=f;l++){var S=-1;if((c||i.block_type==I.NORM_TYPE)&&(S=i.global_gain-(i.scalefac[l]+(0!=i.preflag?e.pretab[l]:0)<<i.scalefac_scale+1)-8*i.subblock_gain[i.window[l]]),c&&o.step[l]==S)0!=h&&(s(h,a,w,y,v,g),h=0),0!=p&&(r(p,a,w,y,v,g),p=0);else{var R,A=i.width[l];if(u+i.width[l]>i.max_nonzero_coeff&&(R=i.max_nonzero_coeff-u+1,_.fill(n,i.max_nonzero_coeff,576,0),(A=R)<0&&(A=0),l=f+1),0==h&&0==p&&(v=m,g=b,w=t,y=d),null!=o&&0<o.sfb_count1&&l>=o.sfb_count1&&0<o.step[l]&&S>=o.step[l]?(0!=h&&(s(h,a,w,y,v,g),h=0,v=m,g=b,w=t,y=d),p+=A):(0!=p&&(r(p,a,w,y,v,g),p=0,v=m,g=b,w=t,y=d),h+=A),A<=0){0!=p&&(r(p,a,w,y,v,g),p=0),0!=h&&(s(h,a,w,y,v,g),h=0);break}}l<=f&&(b+=i.width[l],d+=i.width[l],u+=i.width[l])}0!=h&&(s(h,a,w,y,v,g),h=0),0!=p&&(r(p,a,w,y,v,g),p=0)}(n,o,e.IPOW20(a.global_gain),a,i),0!=(2&t.substep_shaping))for(var f=0,c=a.global_gain+a.scalefac_scale,u=.634521682242439/e.IPOW20(c),h=0;h<a.sfbmax;h++){var p,d=a.width[h];if(0==t.pseudohalf[h])f+=d;else for(p=f,f+=d;p<f;++p)o[p]=n[p]>=u?o[p]:0}return this.noquant_count_bits(t,a,i)},this.best_huffman_divide=function(e,n){var r=new B,s=n.l3_enc,i=a(23),f=a(23),c=a(23),_=a(23);if(n.block_type!=I.SHORT_TYPE||1!=e.mode_gr){r.assign(n),n.block_type==I.NORM_TYPE&&(function(e,n,r,a,s,i,l){for(var f=n.big_values,c=0;c<=22;c++)a[c]=T.LARGE_BITS;for(c=0;c<16;c++){var _=e.scalefac_band.l[c+1];if(f<=_)break;var u=0,h=new t(u),p=o(r,0,_,h);u=h.bits;for(var d=0;d<8;d++){var m=e.scalefac_band.l[c+d+2];if(f<=m)break;var b=u,v=o(r,_,m,h=new t(b));b=h.bits,a[c+d]>b&&(a[c+d]=b,i[(s[c+d]=c)+d]=p,l[c+d]=v)}}}(e,n,s,i,f,c,_),l(e,r,n,s,i,f,c,_));var u=r.big_values;if(!(0==u||1<(s[u-2]|s[u-1])||576<(u=n.count1+2))){r.assign(n),r.count1=u;for(var h=0,p=0;u>r.big_values;u-=4){var d=2*(2*(2*s[u-4]+s[u-3])+s[u-2])+s[u-1];h+=R.t32l[d],p+=R.t33l[d]}if(r.big_values=u,r.count1table_select=0,p<h&&(h=p,r.count1table_select=1),r.count1bits=h,r.block_type==I.NORM_TYPE)l(e,r,n,s,i,f,c,_);else{if(r.part2_3_length=h,u<(h=e.scalefac_band.l[8])&&(h=u),0<h){var m=new t(r.part2_3_length);r.table_select[0]=o(s,0,h,m),r.part2_3_length=m.bits}h<u&&(m=new t(r.part2_3_length),r.table_select[1]=o(s,h,u,m),r.part2_3_length=m.bits),n.part2_3_length>r.part2_3_length&&n.assign(r)}}}};var f=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],c=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],h=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],p=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];v.slen1_tab=h,v.slen2_tab=p,this.best_scalefac_store=function(t,n,r,a){var s,i,o,l,_=a.tt[n][r],u=0;for(s=o=0;s<_.sfbmax;s++){var d=_.width[s];for(o+=d,l=-d;l<0&&0==_.l3_enc[l+o];l++);0==l&&(_.scalefac[s]=u=-2)}if(0==_.scalefac_scale&&0==_.preflag){var m=0;for(s=0;s<_.sfbmax;s++)0<_.scalefac[s]&&(m|=_.scalefac[s]);if(0==(1&m)&&0!=m){for(s=0;s<_.sfbmax;s++)0<_.scalefac[s]&&(_.scalefac[s]>>=1);_.scalefac_scale=u=1}}if(0==_.preflag&&_.block_type!=I.SHORT_TYPE&&2==t.mode_gr){for(s=11;s<I.SBPSY_l&&!(_.scalefac[s]<e.pretab[s]&&-2!=_.scalefac[s]);s++);if(s==I.SBPSY_l){for(s=11;s<I.SBPSY_l;s++)0<_.scalefac[s]&&(_.scalefac[s]-=e.pretab[s]);_.preflag=u=1}}for(i=0;i<4;i++)a.scfsi[r][i]=0;for(2==t.mode_gr&&1==n&&a.tt[0][r].block_type!=I.SHORT_TYPE&&a.tt[1][r].block_type!=I.SHORT_TYPE&&(function(e,t){for(var n,r=t.tt[1][e],a=t.tt[0][e],s=0;s<R.scfsi_band.length-1;s++){for(n=R.scfsi_band[s];n<R.scfsi_band[s+1]&&!(a.scalefac[n]!=r.scalefac[n]&&0<=r.scalefac[n]);n++);if(n==R.scfsi_band[s+1]){for(n=R.scfsi_band[s];n<R.scfsi_band[s+1];n++)r.scalefac[n]=-1;t.scfsi[e][s]=1}}var i=0,o=0;for(n=0;n<11;n++)-1!=r.scalefac[n]&&(o++,i<r.scalefac[n]&&(i=r.scalefac[n]));for(var l=0,_=0;n<I.SBPSY_l;n++)-1!=r.scalefac[n]&&(_++,l<r.scalefac[n]&&(l=r.scalefac[n]));for(s=0;s<16;s++)if(i<f[s]&&l<c[s]){var u=h[s]*o+p[s]*_;r.part2_length>u&&(r.part2_length=u,r.scalefac_compress=s)}}(r,a),u=0),s=0;s<_.sfbmax;s++)-2==_.scalefac[s]&&(_.scalefac[s]=0);0!=u&&(2==t.mode_gr?this.scale_bitcount(_):this.scale_bitcount_lsf(t,_))};var d=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],m=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],b=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(t){var n,r,a,s=0,i=0,o=t.scalefac;if(t.block_type==I.SHORT_TYPE)a=d,0!=t.mixed_block_flag&&(a=m);else if(a=b,0==t.preflag){for(r=11;r<I.SBPSY_l&&!(o[r]<e.pretab[r]);r++);if(r==I.SBPSY_l)for(t.preflag=1,r=11;r<I.SBPSY_l;r++)o[r]-=e.pretab[r]}for(r=0;r<t.sfbdivide;r++)s<o[r]&&(s=o[r]);for(;r<t.sfbmax;r++)i<o[r]&&(i=o[r]);for(t.part2_length=T.LARGE_BITS,n=0;n<16;n++)s<f[n]&&i<c[n]&&t.part2_length>a[n]&&(t.part2_length=a[n],t.scalefac_compress=n);return t.part2_length==T.LARGE_BITS};var g=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(t,n){var r,s,i,o,l,f,c,_,h=a(4),p=n.scalefac;for(r=0!=n.preflag?2:0,c=0;c<4;c++)h[c]=0;if(n.block_type==I.SHORT_TYPE){s=1;var d=e.nr_of_sfb_block[r][s];for(i=_=0;i<4;i++)for(o=d[i]/3,c=0;c<o;c++,_++)for(l=0;l<3;l++)p[3*_+l]>h[i]&&(h[i]=p[3*_+l])}else for(s=0,d=e.nr_of_sfb_block[r][s],i=_=0;i<4;i++)for(o=d[i],c=0;c<o;c++,_++)p[_]>h[i]&&(h[i]=p[_]);for(f=!1,i=0;i<4;i++)h[i]>g[r][i]&&(f=!0);if(!f){var m,b,v,y;for(n.sfb_partition_table=e.nr_of_sfb_block[r][s],i=0;i<4;i++)n.slen[i]=w[h[i]];switch(m=n.slen[0],b=n.slen[1],v=n.slen[2],y=n.slen[3],r){case 0:n.scalefac_compress=(5*m+b<<4)+(v<<2)+y;break;case 1:n.scalefac_compress=400+(5*m+b<<2)+v;break;case 2:n.scalefac_compress=500+3*m+b;break;default:u.err.printf("intensity stereo not implemented yet\n")}}if(!f)for(i=n.part2_length=0;i<4;i++)n.part2_length+=n.slen[i]*n.sfb_partition_table[i];return f};var w=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var r,a=0;e.scalefac_band.l[++a]<t;);for(r=n[a][0];e.scalefac_band.l[r+1]>t;)r--;for(r<0&&(r=n[a][0]),e.bv_scf[t-2]=r,r=n[a][1];e.scalefac_band.l[r+e.bv_scf[t-2]+2]>t;)r--;r<0&&(r=n[a][1]),e.bv_scf[t-1]=r}}}function g(){}function w(){this.setModules=function(e,t,n){};var e=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.updateMusicCRC=function(t,n,r,a){for(var s=0;s<a;++s)t[0]=(i=n[r+s],o=(o=t[0])>>8^e[255&(o^i)]);var i,o}}function y(){var e=this,r=32773,s=null,i=null,l=null,f=null;this.setModules=function(e,t,n,r){s=e,i=t,l=n,f=r};var c=null,h=0,p=0,d=0;function m(e,t,n){for(;0<n;){var r;0==d&&(d=8,p++,e.header[e.w_ptr].write_timing==h&&(a=e,u.arraycopy(a.header[a.w_ptr].buf,0,c,p,a.sideinfo_len),p+=a.sideinfo_len,h+=8*a.sideinfo_len,a.w_ptr=a.w_ptr+1&O.MAX_HEADER_BUF-1),c[p]=0),n-=r=Math.min(n,d),d-=r,c[p]|=t>>n<<d,h+=r}var a}function b(e,t,n){for(;0<n;){var r;0==d&&(d=8,c[++p]=0),n-=r=Math.min(n,d),d-=r,c[p]|=t>>n<<d,h+=r}}function w(e,t){var n,r=e.internal_flags;if(8<=t&&(m(r,76,8),t-=8),8<=t&&(m(r,65,8),t-=8),8<=t&&(m(r,77,8),t-=8),8<=t&&(m(r,69,8),t-=8),32<=t){var a=l.getLameShortVersion();if(32<=t)for(n=0;n<a.length&&8<=t;++n)t-=8,m(r,a.charCodeAt(n),8)}for(;1<=t;t-=1)m(r,r.ancillary_flag,1),r.ancillary_flag^=e.disable_reservoir?0:1}function y(e,t,n){for(var r=e.header[e.h_ptr].ptr;0<n;){var a=Math.min(n,8-(7&r));n-=a,e.header[e.h_ptr].buf[r>>3]|=t>>n<<8-(7&r)-a,r+=a}e.header[e.h_ptr].ptr=r}function S(e,t){e<<=8;for(var n=0;n<8;n++)0!=(65536&((t<<=1)^(e<<=1)))&&(t^=r);return t}function A(e,t){var n,r=R.ht[t.count1table_select+32],a=0,s=t.big_values,i=t.big_values;for(n=(t.count1-t.big_values)/4;0<n;--n){var o=0,l=0;0!=t.l3_enc[s+0]&&(l+=8,t.xr[i+0]<0&&o++),0!=t.l3_enc[s+1]&&(l+=4,o*=2,t.xr[i+1]<0&&o++),0!=t.l3_enc[s+2]&&(l+=2,o*=2,t.xr[i+2]<0&&o++),0!=t.l3_enc[s+3]&&(l++,o*=2,t.xr[i+3]<0&&o++),s+=4,i+=4,m(e,o+r.table[l],r.hlen[l]),a+=r.hlen[l]}return a}function M(e,t,n,r,a){var s=R.ht[t],i=0;if(0==t)return i;for(var o=n;o<r;o+=2){var l=0,f=0,c=s.xlen,_=s.xlen,u=0,h=a.l3_enc[o],p=a.l3_enc[o+1];0!=h&&(a.xr[o]<0&&u++,l--),15<t&&(14<h&&(u|=h-15<<1,f=c,h=15),14<p&&(u<<=c,u|=p-15,f+=c,p=15),_=16),0!=p&&(u<<=1,a.xr[o+1]<0&&u++,l--),h=h*_+p,f-=l,l+=s.hlen[h],m(e,s.table[h],l),m(e,u,f),i+=l+f}return i}function x(e,t){var n=3*e.scalefac_band.s[3];n>t.big_values&&(n=t.big_values);var r=M(e,t.table_select[0],0,n,t);return r+M(e,t.table_select[1],n,t.big_values,t)}function T(e,t){var n,r,a,s;n=t.big_values;var i=t.region0_count+1;return a=e.scalefac_band.l[i],i+=t.region1_count+1,n<a&&(a=n),n<(s=e.scalefac_band.l[i])&&(s=n),r=M(e,t.table_select[0],0,a,t),r+=M(e,t.table_select[1],a,s,t),r+M(e,t.table_select[2],s,n,t)}function B(){this.total=0}function E(t,n){var r,a,s,i,o,l=t.internal_flags;return o=l.w_ptr,-1==(i=l.h_ptr-1)&&(i=O.MAX_HEADER_BUF-1),r=l.header[i].write_timing-h,0<=(n.total=r)&&(a=1+i-o,i<o&&(a=1+i-o+O.MAX_HEADER_BUF),r-=8*a*l.sideinfo_len),r+=s=e.getframebits(t),n.total+=s,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=p+1,r<0&&u.err.println("strange error flushing buffer ... \n"),r}this.getframebits=function(e){var t,n=e.internal_flags;return t=0!=n.bitrate_index?R.bitrate_table[e.version][n.bitrate_index]:e.brate,8*(0|72e3*(e.version+1)*t/e.out_samplerate+n.padding)},this.CRC_writeheader=function(e,t){var n=65535;n=S(255&t[2],n),n=S(255&t[3],n);for(var r=6;r<e.sideinfo_len;r++)n=S(255&t[r],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var n,r,a=e.internal_flags,i=a.h_ptr-1;if(-1==i&&(i=O.MAX_HEADER_BUF-1),n=a.l3_side,!((r=E(e,new B))<0)){if(w(e,r),a.ResvSize=0,n.main_data_begin=0,a.findReplayGain){var o=s.GetTitleGain(a.rgdata);a.RadioGain=0|Math.floor(10*o+.5)}a.findPeakSample&&(a.noclipGainChange=0|Math.ceil(20*t(a.PeakSample/32767)*10),0<a.noclipGainChange&&(EQ(e.scale,1)||EQ(e.scale,0))?a.noclipScale=Math.floor(32767/a.PeakSample*100)/100:a.noclipScale=-1)}},this.add_dummy_byte=function(e,t,n){for(var r,a=e.internal_flags;0<n--;)for(b(0,t,8),r=0;r<O.MAX_HEADER_BUF;++r)a.header[r].write_timing+=8},this.format_bitstream=function(e){var t,n=e.internal_flags;t=n.l3_side;var r=this.getframebits(e);w(e,t.resvDrain_pre),function(e,t){var n,r,a,s=e.internal_flags;if(n=s.l3_side,s.header[s.h_ptr].ptr=0,_.fill(s.header[s.h_ptr].buf,0,s.sideinfo_len,0),e.out_samplerate<16e3?y(s,4094,12):y(s,4095,12),y(s,e.version,1),y(s,1,2),y(s,e.error_protection?0:1,1),y(s,s.bitrate_index,4),y(s,s.samplerate_index,2),y(s,s.padding,1),y(s,e.extension,1),y(s,e.mode.ordinal(),2),y(s,s.mode_ext,2),y(s,e.copyright,1),y(s,e.original,1),y(s,e.emphasis,2),e.error_protection&&y(s,0,16),1==e.version){for(y(s,n.main_data_begin,9),2==s.channels_out?y(s,n.private_bits,3):y(s,n.private_bits,5),a=0;a<s.channels_out;a++){var i;for(i=0;i<4;i++)y(s,n.scfsi[a][i],1)}for(r=0;r<2;r++)for(a=0;a<s.channels_out;a++)y(s,(o=n.tt[r][a]).part2_3_length+o.part2_length,12),y(s,o.big_values/2,9),y(s,o.global_gain,8),y(s,o.scalefac_compress,4),o.block_type!=I.NORM_TYPE?(y(s,1,1),y(s,o.block_type,2),y(s,o.mixed_block_flag,1),14==o.table_select[0]&&(o.table_select[0]=16),y(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),y(s,o.table_select[1],5),y(s,o.subblock_gain[0],3),y(s,o.subblock_gain[1],3),y(s,o.subblock_gain[2],3)):(y(s,0,1),14==o.table_select[0]&&(o.table_select[0]=16),y(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),y(s,o.table_select[1],5),14==o.table_select[2]&&(o.table_select[2]=16),y(s,o.table_select[2],5),y(s,o.region0_count,4),y(s,o.region1_count,3)),y(s,o.preflag,1),y(s,o.scalefac_scale,1),y(s,o.count1table_select,1)}else for(y(s,n.main_data_begin,8),y(s,n.private_bits,s.channels_out),a=r=0;a<s.channels_out;a++){var o;y(s,(o=n.tt[r][a]).part2_3_length+o.part2_length,12),y(s,o.big_values/2,9),y(s,o.global_gain,8),y(s,o.scalefac_compress,9),o.block_type!=I.NORM_TYPE?(y(s,1,1),y(s,o.block_type,2),y(s,o.mixed_block_flag,1),14==o.table_select[0]&&(o.table_select[0]=16),y(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),y(s,o.table_select[1],5),y(s,o.subblock_gain[0],3),y(s,o.subblock_gain[1],3),y(s,o.subblock_gain[2],3)):(y(s,0,1),14==o.table_select[0]&&(o.table_select[0]=16),y(s,o.table_select[0],5),14==o.table_select[1]&&(o.table_select[1]=16),y(s,o.table_select[1],5),14==o.table_select[2]&&(o.table_select[2]=16),y(s,o.table_select[2],5),y(s,o.region0_count,4),y(s,o.region1_count,3)),y(s,o.scalefac_scale,1),y(s,o.count1table_select,1)}e.error_protection&&CRC_writeheader(s,s.header[s.h_ptr].buf);var l=s.h_ptr;s.h_ptr=l+1&O.MAX_HEADER_BUF-1,s.header[s.h_ptr].write_timing=s.header[l].write_timing+t,s.h_ptr==s.w_ptr&&u.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}(e,r);var a=8*n.sideinfo_len;if(a+=function(e){var t,n,r,a,s=0,i=e.internal_flags,o=i.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<i.channels_out;n++){var l=o.tt[t][n],f=v.slen1_tab[l.scalefac_compress],c=v.slen2_tab[l.scalefac_compress];for(r=a=0;r<l.sfbdivide;r++)-1!=l.scalefac[r]&&(m(i,l.scalefac[r],f),a+=f);for(;r<l.sfbmax;r++)-1!=l.scalefac[r]&&(m(i,l.scalefac[r],c),a+=c);l.block_type==I.SHORT_TYPE?a+=x(i,l):a+=T(i,l),s+=a+=A(i,l)}else for(n=t=0;n<i.channels_out;n++){var _,u,h=0;if(u=r=a=0,(l=o.tt[t][n]).block_type==I.SHORT_TYPE){for(;u<4;u++){var p=l.sfb_partition_table[u]/3,d=l.slen[u];for(_=0;_<p;_++,r++)m(i,Math.max(l.scalefac[3*r+0],0),d),m(i,Math.max(l.scalefac[3*r+1],0),d),m(i,Math.max(l.scalefac[3*r+2],0),d),h+=3*d}a+=x(i,l)}else{for(;u<4;u++)for(p=l.sfb_partition_table[u],d=l.slen[u],_=0;_<p;_++,r++)m(i,Math.max(l.scalefac[r],0),d),h+=d;a+=T(i,l)}s+=h+(a+=A(i,l))}return s}(e),w(e,t.resvDrain_post),a+=t.resvDrain_post,t.main_data_begin+=(r-a)/8,E(e,new B)!=n.ResvSize&&u.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*t.main_data_begin!=n.ResvSize&&(u.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*t.main_data_begin,n.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*n.sideinfo_len,a-t.resvDrain_post-8*n.sideinfo_len,a,a%8,r),u.err.println("This is a fatal error.  It has several possible causes:"),u.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),u.err.println(" 9%%  Your system is overclocked"),u.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=8*t.main_data_begin),1e9<h){var s;for(s=0;s<O.MAX_HEADER_BUF;++s)n.header[s].write_timing-=h;h=0}return 0},this.copy_buffer=function(e,t,n,r,l){var _=p+1;if(_<=0)return 0;if(0!=r&&r<_)return-1;if(u.arraycopy(c,0,t,n,_),p=-1,(d=0)!=l){var h=a(1);if(h[0]=e.nMusicCRC,f.updateMusicCRC(h,t,n,_),e.nMusicCRC=h[0],0<_&&(e.VBR_seek_table.nBytesWritten+=_),e.decode_on_the_fly)for(var m,b=o([2,1152]),v=_,w=-1;0!=w;)if(w=i.hip_decode1_unclipped(e.hip,t,n,v,b[0],b[1]),v=0,-1==w&&(w=0),0<w){if(e.findPeakSample){for(m=0;m<w;m++)b[0][m]>e.PeakSample?e.PeakSample=b[0][m]:-b[0][m]>e.PeakSample&&(e.PeakSample=-b[0][m]);if(1<e.channels_out)for(m=0;m<w;m++)b[1][m]>e.PeakSample?e.PeakSample=b[1][m]:-b[1][m]>e.PeakSample&&(e.PeakSample=-b[1][m])}if(e.findReplayGain&&s.AnalyzeSamples(e.rgdata,b[0],0,b[1],0,w,e.channels_out)==g.GAIN_ANALYSIS_ERROR)return-6}}return _},this.init_bit_stream_w=function(e){c=n(N.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,p=-1,h=d=0}}function S(e,t,n,r){this.xlen=e,this.linmax=t,this.table=n,this.hlen=r}d.MAX_VALUE=34028235e31,m.vbr_off=new m(0),m.vbr_mt=new m(1),m.vbr_rh=new m(2),m.vbr_abr=new m(3),m.vbr_mtrh=new m(4),m.vbr_default=m.vbr_mtrh,b.STEREO=new b(0),b.JOINT_STEREO=new b(1),b.DUAL_CHANNEL=new b(2),b.MONO=new b(3),b.NOT_SET=new b(4),g.STEPS_per_dB=100,g.MAX_dB=120,g.GAIN_NOT_ENOUGH_SAMPLES=-24601,g.GAIN_ANALYSIS_ERROR=0,g.GAIN_ANALYSIS_OK=1,g.INIT_GAIN_ANALYSIS_ERROR=0,g.INIT_GAIN_ANALYSIS_OK=1,g.MAX_ORDER=g.YULE_ORDER=10,g.MAX_SAMPLES_PER_WINDOW=(g.MAX_SAMP_FREQ=48e3)*(g.RMS_WINDOW_TIME_NUMERATOR=1)/(g.RMS_WINDOW_TIME_DENOMINATOR=20)+1,w.NUMTOCENTRIES=100,w.MAXFRAMESIZE=2880,y.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},y.NEQ=function(e,t){return!y.EQ(e,t)};var R={};function A(e){this.bits=e}function M(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function x(e,t,n,r){this.l=a(1+I.SBMAX_l),this.s=a(1+I.SBMAX_s),this.psfb21=a(1+I.PSFB21),this.psfb12=a(1+I.PSFB12);var s=this.l,i=this.s;4==arguments.length&&(this.arrL=e,this.arrS=t,this.arr21=n,this.arr12=r,u.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),u.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),u.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),u.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function T(){var e=null,n=null,r=null;this.setModules=function(t,a,s){e=t,n=a,r=s},this.IPOW20=function(e){return p[e]};var i=2220446049250313e-31,o=T.IXMAX_VAL+2,l=T.Q_MAX,f=T.Q_MAX2,c=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var _=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=_,this.sfBandIndex=[new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var u=s(l+f+1),p=s(l),b=s(o),v=s(o);function g(e,t){var n=r.ATHformula(t,e);return n-=c,Math.pow(10,n/10+e.ATHlower)}function w(e){this.s=e}this.adj43=v,this.iteration_init=function(n){var r,a=n.internal_flags,s=a.l3_side;if(0==a.iteration_init_init){for(a.iteration_init_init=1,s.main_data_begin=0,function(e){for(var n=e.internal_flags.ATH.l,r=e.internal_flags.ATH.psfb21,a=e.internal_flags.ATH.s,s=e.internal_flags.ATH.psfb12,i=e.internal_flags,o=e.out_samplerate,l=0;l<I.SBMAX_l;l++){var f=i.scalefac_band.l[l],c=i.scalefac_band.l[l+1];n[l]=d.MAX_VALUE;for(var _=f;_<c;_++){var u=g(e,_*o/1152);n[l]=Math.min(n[l],u)}}for(l=0;l<I.PSFB21;l++)for(f=i.scalefac_band.psfb21[l],c=i.scalefac_band.psfb21[l+1],r[l]=d.MAX_VALUE,_=f;_<c;_++)u=g(e,_*o/1152),r[l]=Math.min(r[l],u);for(l=0;l<I.SBMAX_s;l++){for(f=i.scalefac_band.s[l],c=i.scalefac_band.s[l+1],a[l]=d.MAX_VALUE,_=f;_<c;_++)u=g(e,_*o/384),a[l]=Math.min(a[l],u);a[l]*=i.scalefac_band.s[l+1]-i.scalefac_band.s[l]}for(l=0;l<I.PSFB12;l++){for(f=i.scalefac_band.psfb12[l],c=i.scalefac_band.psfb12[l+1],s[l]=d.MAX_VALUE,_=f;_<c;_++)u=g(e,_*o/384),s[l]=Math.min(s[l],u);s[l]*=i.scalefac_band.s[13]-i.scalefac_band.s[12]}if(e.noATH){for(l=0;l<I.SBMAX_l;l++)n[l]=1e-20;for(l=0;l<I.PSFB21;l++)r[l]=1e-20;for(l=0;l<I.SBMAX_s;l++)a[l]=1e-20;for(l=0;l<I.PSFB12;l++)s[l]=1e-20}i.ATH.floor=10*t(g(e,-1))}(n),b[0]=0,r=1;r<o;r++)b[r]=Math.pow(r,4/3);for(r=0;r<o-1;r++)v[r]=r+1-Math.pow(.5*(b[r]+b[r+1]),.75);for(v[r]=.5,r=0;r<l;r++)p[r]=Math.pow(2,-.1875*(r-210));for(r=0;r<=l+f;r++)u[r]=Math.pow(2,.25*(r-210-f));var i,c,_,h;for(e.huffman_init(a),32<=(r=n.exp_nspsytune>>2&63)&&(r-=64),i=Math.pow(10,r/4/10),32<=(r=n.exp_nspsytune>>8&63)&&(r-=64),c=Math.pow(10,r/4/10),32<=(r=n.exp_nspsytune>>14&63)&&(r-=64),_=Math.pow(10,r/4/10),32<=(r=n.exp_nspsytune>>20&63)&&(r-=64),h=_*Math.pow(10,r/4/10),r=0;r<I.SBMAX_l;r++)m=r<=6?i:r<=13?c:r<=20?_:h,a.nsPsy.longfact[r]=m;for(r=0;r<I.SBMAX_s;r++){var m;m=r<=5?i:r<=10?c:r<=11?_:h,a.nsPsy.shortfact[r]=m}}},this.on_pe=function(e,t,r,s,i,o){var l,f,c=e.internal_flags,_=0,u=a(2),h=new A(_),p=n.ResvMaxBits(e,s,h,o),d=(_=h.bits)+p;for(O.MAX_BITS_PER_GRANULE<d&&(d=O.MAX_BITS_PER_GRANULE),f=l=0;f<c.channels_out;++f)r[f]=Math.min(O.MAX_BITS_PER_CHANNEL,_/c.channels_out),u[f]=0|r[f]*t[i][f]/700-r[f],u[f]>3*s/4&&(u[f]=3*s/4),u[f]<0&&(u[f]=0),u[f]+r[f]>O.MAX_BITS_PER_CHANNEL&&(u[f]=Math.max(0,O.MAX_BITS_PER_CHANNEL-r[f])),l+=u[f];if(p<l)for(f=0;f<c.channels_out;++f)u[f]=p*u[f]/l;for(f=0;f<c.channels_out;++f)r[f]+=u[f],p-=u[f];for(f=l=0;f<c.channels_out;++f)l+=r[f];if(O.MAX_BITS_PER_GRANULE<l)for(f=0;f<c.channels_out;++f)r[f]*=O.MAX_BITS_PER_GRANULE,r[f]/=l,r[f];return d},this.reduce_side=function(e,t,n,r){var a=.33*(.5-t)/.5;a<0&&(a=0),.5<a&&(a=.5);var s=0|.5*a*(e[0]+e[1]);s>O.MAX_BITS_PER_CHANNEL-e[0]&&(s=O.MAX_BITS_PER_CHANNEL-e[0]),s<0&&(s=0),125<=e[1]&&(125<e[1]-s?(e[0]<n&&(e[0]+=s),e[1]-=s):(e[0]+=e[1]-125,e[1]=125)),r<(s=e[0]+e[1])&&(e[0]=r*e[0]/s,e[1]=r*e[1]/s)},this.athAdjust=function(e,t,n){var r=90.30873362,a=h.FAST_LOG10_X(t,10),s=e*e,i=0;return a-=n,1e-20<s&&(i=1+h.FAST_LOG10_X(s,10/r)),i<0&&(i=0),a*=i,a+=n+r-94.82444863,Math.pow(10,.1*a)},this.calc_xmin=function(e,t,n,r){var a,s=0,o=e.internal_flags,l=0,f=0,c=o.ATH,_=n.xr,u=e.VBR==m.vbr_mtrh?1:0,h=o.masking_lower;for(e.VBR!=m.vbr_mtrh&&e.VBR!=m.vbr_mt||(h=1),a=0;a<n.psy_lmax;a++){R=(S=e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh?athAdjust(c.adjust,c.l[a],c.floor):c.adjust*c.l[a])/(v=n.width[a]),A=i,B=v>>1,T=0;do{T+=E=_[l]*_[l],A+=E<R?E:R,T+=k=_[++l]*_[l],A+=k<R?k:R,l++}while(0<--B);S<T&&f++,a==I.SBPSY_l&&A<(x=S*o.nsPsy.longfact[a])&&(A=x),0!=u&&(S=A),e.ATHonly||0<(M=t.en.l[a])&&(x=T*t.thm.l[a]*h/M,0!=u&&(x*=o.nsPsy.longfact[a]),S<x&&(S=x)),r[s++]=0!=u?S:S*o.nsPsy.longfact[a]}var p=575;if(n.block_type!=I.SHORT_TYPE)for(var d=576;0!=d--&&y.EQ(_[d],0);)p=d;n.max_nonzero_coeff=p;for(var b=n.sfb_smin;a<n.psymax;b++,a+=3){var v,g,w;for(w=e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh?athAdjust(c.adjust,c.s[b],c.floor):c.adjust*c.s[b],v=n.width[a],g=0;g<3;g++){var S,R,A,M,x,T=0,B=v>>1;R=w/v,A=i;do{var E,k;T+=E=_[l]*_[l],A+=E<R?E:R,T+=k=_[++l]*_[l],A+=k<R?k:R,l++}while(0<--B);w<T&&f++,b==I.SBPSY_s&&A<(x=w*o.nsPsy.shortfact[b])&&(A=x),S=0!=u?A:w,e.ATHonly||e.ATHshort||0<(M=t.en.s[b][g])&&(x=T*t.thm.s[b][g]*h/M,0!=u&&(x*=o.nsPsy.shortfact[b]),S<x&&(S=x)),r[s++]=0!=u?S:S*o.nsPsy.shortfact[b]}e.useTemporal&&(r[s-3]>r[s-3+1]&&(r[s-3+1]+=(r[s-3]-r[s-3+1])*o.decay),r[s-3+1]>r[s-3+2]&&(r[s-3+2]+=(r[s-3+1]-r[s-3+2])*o.decay))}return f},this.calc_noise_core=function(e,t,n,r){var a=0,i=t.s,o=e.l3_enc;if(i>e.count1)for(;0!=n--;)f=e.xr[i],i++,a+=f*f,f=e.xr[i],i++,a+=f*f;else if(i>e.big_values){var l=s(2);for(l[0]=0,l[1]=r;0!=n--;)f=Math.abs(e.xr[i])-l[o[i]],i++,a+=f*f,f=Math.abs(e.xr[i])-l[o[i]],i++,a+=f*f}else for(;0!=n--;){var f;f=Math.abs(e.xr[i])-b[o[i]]*r,i++,a+=f*f,f=Math.abs(e.xr[i])-b[o[i]]*r,i++,a+=f*f}return t.s=i,a},this.calc_noise=function(e,t,n,r,a){var s,i,o=0,l=0,f=0,c=0,p=0,d=-20,m=0,b=e.scalefac,v=0;for(s=r.over_SSD=0;s<e.psymax;s++){var g,y=e.global_gain-(b[v++]+(0!=e.preflag?_[s]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[s]],S=0;if(null!=a&&a.step[s]==y)S=a.noise[s],m+=e.width[s],n[o++]=S/t[l++],S=a.noise_log[s];else{var R,A=u[y+T.Q_MAX2];i=e.width[s]>>1,m+e.width[s]>e.max_nonzero_coeff&&(i=0<(R=e.max_nonzero_coeff-m+1)?R>>1:0);var M=new w(m);S=this.calc_noise_core(e,M,i,A),m=M.s,null!=a&&(a.step[s]=y,a.noise[s]=S),S=n[o++]=S/t[l++],S=h.FAST_LOG10(Math.max(S,1e-20)),null!=a&&(a.noise_log[s]=S)}null!=a&&(a.global_gain=e.global_gain),p+=S,0<S&&(g=Math.max(0|10*S+.5,1),r.over_SSD+=g*g,f++,c+=S),d=Math.max(d,S)}return r.over_count=f,r.tot_noise=p,r.over_noise=c,r.max_noise=d,f},this.set_pinfo=function(e,t,n,r,a){var i,o,l,f,c,u=e.internal_flags,h=0==t.scalefac_scale?.5:1,p=t.scalefac,d=s(E.SFBMAX),m=s(E.SFBMAX),b=new M;calc_xmin(e,n,t,d),calc_noise(t,d,m,b,null);var v=0;for(o=t.sfb_lmax,t.block_type!=I.SHORT_TYPE&&0==t.mixed_block_flag&&(o=22),i=0;i<o;i++){var g=u.scalefac_band.l[i],w=(y=u.scalefac_band.l[i+1])-g;for(f=0;v<y;v++)f+=t.xr[v]*t.xr[v];f/=w,c=1e15,u.pinfo.en[r][a][i]=c*f,u.pinfo.xfsf[r][a][i]=c*d[i]*m[i]/w,0<n.en.l[i]&&!e.ATHonly?f/=n.en.l[i]:f=0,u.pinfo.thr[r][a][i]=c*Math.max(f*n.thm.l[i],u.ATH.l[i]),(u.pinfo.LAMEsfb[r][a][i]=0)!=t.preflag&&11<=i&&(u.pinfo.LAMEsfb[r][a][i]=-h*_[i]),i<I.SBPSY_l&&(u.pinfo.LAMEsfb[r][a][i]-=h*p[i])}if(t.block_type==I.SHORT_TYPE)for(o=i,i=t.sfb_smin;i<I.SBMAX_s;i++){g=u.scalefac_band.s[i],w=(y=u.scalefac_band.s[i+1])-g;for(var y,S=0;S<3;S++){for(f=0,l=g;l<y;l++)f+=t.xr[v]*t.xr[v],v++;f=Math.max(f/w,1e-20),c=1e15,u.pinfo.en_s[r][a][3*i+S]=c*f,u.pinfo.xfsf_s[r][a][3*i+S]=c*d[o]*m[o]/w,0<n.en.s[i][S]?f/=n.en.s[i][S]:f=0,(e.ATHonly||e.ATHshort)&&(f=0),u.pinfo.thr_s[r][a][3*i+S]=c*Math.max(f*n.thm.s[i][S],u.ATH.s[i]),u.pinfo.LAMEsfb_s[r][a][3*i+S]=-2*t.subblock_gain[S],i<I.SBPSY_s&&(u.pinfo.LAMEsfb_s[r][a][3*i+S]-=h*p[o]),o++}}u.pinfo.LAMEqss[r][a]=t.global_gain,u.pinfo.LAMEmainbits[r][a]=t.part2_3_length+t.part2_length,u.pinfo.LAMEsfbits[r][a]=t.part2_length,u.pinfo.over[r][a]=b.over_count,u.pinfo.max_noise[r][a]=10*b.max_noise,u.pinfo.over_noise[r][a]=10*b.over_noise,u.pinfo.tot_noise[r][a]=10*b.tot_noise,u.pinfo.over_SSD[r][a]=b.over_SSD}}function B(){this.xr=s(576),this.l3_enc=a(576),this.scalefac=a(E.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=a(3),this.subblock_gain=a(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=a(E.SFBMAX),this.window=a(E.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=a(4),this.max_nonzero_coeff=0;var e=this;function t(e){return new Int32Array(e)}this.assign=function(n){var r;e.xr=(r=n.xr,new Float32Array(r)),e.l3_enc=t(n.l3_enc),e.scalefac=t(n.scalefac),e.xrpow_max=n.xrpow_max,e.part2_3_length=n.part2_3_length,e.big_values=n.big_values,e.count1=n.count1,e.global_gain=n.global_gain,e.scalefac_compress=n.scalefac_compress,e.block_type=n.block_type,e.mixed_block_flag=n.mixed_block_flag,e.table_select=t(n.table_select),e.subblock_gain=t(n.subblock_gain),e.region0_count=n.region0_count,e.region1_count=n.region1_count,e.preflag=n.preflag,e.scalefac_scale=n.scalefac_scale,e.count1table_select=n.count1table_select,e.part2_length=n.part2_length,e.sfb_lmax=n.sfb_lmax,e.sfb_smin=n.sfb_smin,e.psy_lmax=n.psy_lmax,e.sfbmax=n.sfbmax,e.psymax=n.psymax,e.sfbdivide=n.sfbdivide,e.width=t(n.width),e.window=t(n.window),e.count1bits=n.count1bits,e.sfb_partition_table=n.sfb_partition_table.slice(0),e.slen=t(n.slen),e.max_nonzero_coeff=n.max_nonzero_coeff}}R.t1HB=[1,1,1,0],R.t2HB=[1,2,1,3,1,1,3,2,0],R.t3HB=[3,2,1,1,1,1,3,2,0],R.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],R.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],R.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],R.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],R.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],R.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],R.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],R.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],R.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],R.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],R.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],R.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],R.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],R.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],R.t1l=[1,4,3,5],R.t2l=[1,4,7,4,5,7,6,7,8],R.t3l=[2,3,7,4,4,7,6,7,8],R.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],R.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],R.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],R.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],R.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],R.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],R.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],R.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],R.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],R.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],R.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],R.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],R.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],R.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],R.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],R.ht=[new S(0,0,null,null),new S(2,0,R.t1HB,R.t1l),new S(3,0,R.t2HB,R.t2l),new S(3,0,R.t3HB,R.t3l),new S(0,0,null,null),new S(4,0,R.t5HB,R.t5l),new S(4,0,R.t6HB,R.t6l),new S(6,0,R.t7HB,R.t7l),new S(6,0,R.t8HB,R.t8l),new S(6,0,R.t9HB,R.t9l),new S(8,0,R.t10HB,R.t10l),new S(8,0,R.t11HB,R.t11l),new S(8,0,R.t12HB,R.t12l),new S(16,0,R.t13HB,R.t13l),new S(0,0,null,R.t16_5l),new S(16,0,R.t15HB,R.t15l),new S(1,1,R.t16HB,R.t16l),new S(2,3,R.t16HB,R.t16l),new S(3,7,R.t16HB,R.t16l),new S(4,15,R.t16HB,R.t16l),new S(6,63,R.t16HB,R.t16l),new S(8,255,R.t16HB,R.t16l),new S(10,1023,R.t16HB,R.t16l),new S(13,8191,R.t16HB,R.t16l),new S(4,15,R.t24HB,R.t24l),new S(5,31,R.t24HB,R.t24l),new S(6,63,R.t24HB,R.t24l),new S(7,127,R.t24HB,R.t24l),new S(8,255,R.t24HB,R.t24l),new S(9,511,R.t24HB,R.t24l),new S(11,2047,R.t24HB,R.t24l),new S(13,8191,R.t24HB,R.t24l),new S(0,0,R.t32HB,R.t32l),new S(0,0,R.t33HB,R.t33l)],R.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],R.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],R.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],R.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],R.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],R.scfsi_band=[0,6,11,16,21],T.Q_MAX=257,T.Q_MAX2=116,T.LARGE_BITS=1e5,T.IXMAX_VAL=8206;var E={};function k(){var e,t,n;this.rv=null,this.qupvt=null;var r,i=new function(){this.setModules=function(e,t){}};function o(e){this.ordinal=e}function l(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function f(e,t,n,r,a){var s;switch(e){default:case 9:0<t.over_count?(s=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(s=n.bits<t.bits)):s=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:s=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&y.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=function(e,t){for(var n,r=1e-37,a=0;a<t.psymax;a++)r+=(n=e[a],h.FAST_LOG10(.368+.632*n*n*n));return Math.max(1e-20,r)}(a,r);case 1:s=n.max_noise<t.max_noise;break;case 2:s=n.tot_noise<t.tot_noise;break;case 3:s=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:s=n.max_noise<=0&&.2<t.max_noise||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&0<t.max_noise&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||0<n.max_noise&&-.05<t.max_noise&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||0<n.max_noise&&-.1<t.max_noise&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:s=n.over_noise<t.over_noise||y.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:s=n.over_noise<t.over_noise||y.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||y.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:s=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(s=s&&n.bits<t.bits),s}function c(e,t,a,s,i){var o=e.internal_flags;!function(e,t,n,r,a){var s,i=e.internal_flags;s=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var o=0,l=0;l<t.sfbmax;l++)o<n[l]&&(o=n[l]);var f=i.noise_shaping_amp;switch(3==f&&(f=a?2:1),f){case 2:break;case 1:1<o?o=Math.pow(o,.5):o*=.95;break;case 0:default:1<o?o=1:o*=.95}var c=0;for(l=0;l<t.sfbmax;l++){var _,u=t.width[l];if(c+=u,!(n[l]<o)){if(0!=(2&i.substep_shaping)&&(i.pseudohalf[l]=0==i.pseudohalf[l]?1:0,0==i.pseudohalf[l]&&2==i.noise_shaping_amp))return;for(t.scalefac[l]++,_=-u;_<0;_++)r[c+_]*=s,r[c+_]>t.xrpow_max&&(t.xrpow_max=r[c+_]);if(2==i.noise_shaping_amp)return}}}(e,t,a,s,i);var f=l(t);return!f&&(!(f=2==o.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(o,t))||(1<o.noise_shaping&&(_.fill(o.pseudohalf,0),0==t.scalefac_scale?(function(e,t){for(var r=0,a=0;a<e.sfbmax;a++){var s=e.width[a],i=e.scalefac[a];if(0!=e.preflag&&(i+=n.pretab[a]),r+=s,0!=(1&i)){i++;for(var o=-s;o<0;o++)t[r+o]*=1.2968395546510096,t[r+o]>e.xrpow_max&&(e.xrpow_max=t[r+o])}e.scalefac[a]=i>>1}e.preflag=0,e.scalefac_scale=1}(t,s),f=!1):t.block_type==I.SHORT_TYPE&&0<o.subblock_gain&&(f=function(e,t,r){var a,s=t.scalefac;for(a=0;a<t.sfb_lmax;a++)if(16<=s[a])return!0;for(var i=0;i<3;i++){var o=0,l=0;for(a=t.sfb_lmax+i;a<t.sfbdivide;a+=3)o<s[a]&&(o=s[a]);for(;a<t.sfbmax;a+=3)l<s[a]&&(l=s[a]);if(!(o<16&&l<8)){if(7<=t.subblock_gain[i])return!0;t.subblock_gain[i]++;var f=e.scalefac_band.l[t.sfb_lmax];for(a=t.sfb_lmax+i;a<t.sfbmax;a+=3){var c=t.width[a],_=s[a];if(0<=(_-=4>>t.scalefac_scale))s[a]=_,f+=3*c;else{s[a]=0;var u=210+(_<<t.scalefac_scale+1);p=n.IPOW20(u),f+=c*(i+1);for(var h=-c;h<0;h++)r[f+h]*=p,r[f+h]>t.xrpow_max&&(t.xrpow_max=r[f+h]);f+=c*(3-i-1)}}var p=n.IPOW20(202);for(f+=t.width[a]*(i+1),h=-t.width[a];h<0;h++)r[f+h]*=p,r[f+h]>t.xrpow_max&&(t.xrpow_max=r[f+h])}}return!1}(o,t,s)||l(t))),f||(f=2==o.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(o,t)),!f))}this.setModules=function(a,s,o,l){e=a,t=s,this.rv=s,n=o,this.qupvt=o,r=l,i.setModules(n,r)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var r=e.tt[t][0].xr[n],a=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(r+a)*(.5*h.SQRT2),e.tt[t][1].xr[n]=(r-a)*(.5*h.SQRT2)}},this.init_xrpow=function(e,t,n){var r=0,a=0|t.max_nonzero_coeff;if(t.xrpow_max=0,_.fill(n,a,576,0),1e-20<(r=function(e,t,n,r){for(var a=r=0;a<=n;++a){var s=Math.abs(e.xr[a]);r+=s,t[a]=Math.sqrt(s*Math.sqrt(s)),t[a]>e.xrpow_max&&(e.xrpow_max=t[a])}return r}(t,n,a,r))){var s=0;0!=(2&e.substep_shaping)&&(s=1);for(var i=0;i<t.psymax;i++)e.pseudohalf[i]=s;return!0}return _.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=I.SBPSY_l,t.sfb_smin=I.SBPSY_s,t.psy_lmax=e.sfb21_extra?I.SBMAX_l:I.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var r=0;r<I.SBMAX_l;r++)t.width[r]=e.scalefac_band.l[r+1]-e.scalefac_band.l[r],t.window[r]=3;if(t.block_type==I.SHORT_TYPE){var a=s(576);t.sfb_smin=0,(t.sfb_lmax=0)!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?I.SBMAX_s:I.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(I.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var i=e.scalefac_band.l[t.sfb_lmax];for(u.arraycopy(t.xr,0,a,0,576),r=t.sfb_smin;r<I.SBMAX_s;r++)for(var o=e.scalefac_band.s[r],l=e.scalefac_band.s[r+1],f=0;f<3;f++)for(var c=o;c<l;c++)t.xr[i++]=a[3*c+f];var h=t.sfb_lmax;for(r=t.sfb_smin;r<I.SBMAX_s;r++)t.width[h]=t.width[h+1]=t.width[h+2]=e.scalefac_band.s[r+1]-e.scalefac_band.s[r],t.window[h]=0,t.window[h+1]=1,t.window[h+2]=2,h+=3}t.count1bits=0,t.sfb_partition_table=n.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,_.fill(t.scalefac,0),function(e,t){var r=e.ATH,a=t.xr;if(t.block_type!=I.SHORT_TYPE)for(var s=!1,i=I.PSFB21-1;0<=i&&!s;i--){var o=e.scalefac_band.psfb21[i],l=e.scalefac_band.psfb21[i+1],f=n.athAdjust(r.adjust,r.psfb21[i],r.floor);1e-12<e.nsPsy.longfact[21]&&(f*=e.nsPsy.longfact[21]);for(var c=l-1;o<=c;c--){if(!(Math.abs(a[c])<f)){s=!0;break}a[c]=0}}else for(var _=0;_<3;_++)for(s=!1,i=I.PSFB12-1;0<=i&&!s;i--){l=(o=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*_+(e.scalefac_band.psfb12[i]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[i+1]-e.scalefac_band.psfb12[i]);var u=n.athAdjust(r.adjust,r.psfb12[i],r.floor);for(1e-12<e.nsPsy.shortfact[12]&&(u*=e.nsPsy.shortfact[12]),c=l-1;o<=c;c--){if(!(Math.abs(a[c])<u)){s=!0;break}a[c]=0}}}(e,t)},o.BINSEARCH_NONE=new o(0),o.BINSEARCH_UP=new o(1),o.BINSEARCH_DOWN=new o(2),this.trancate_smallspectrums=function(e,t,a,i){var o=s(E.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=I.SHORT_TYPE)&&0==(128&e.substep_shaping)){n.calc_noise(t,a,o,new M,null);for(var l=0;l<576;l++){var f=0;0!=t.l3_enc[l]&&(f=Math.abs(t.xr[l])),i[l]=f}l=0;var c=8;t.block_type==I.SHORT_TYPE&&(c=6);do{var u,h,p,d,m=t.width[c];if(l+=m,!(1<=o[c]||(_.sort(i,l-m,m),y.EQ(i[l-1],0)))){u=(1-o[c])*a[c],d=h=0;do{var b;for(p=1;d+p<m&&!y.NEQ(i[d+l-m],i[d+l+p-m]);p++);if(u<(b=i[d+l-m]*i[d+l-m]*p)){0!=d&&(h=i[d+l-m-1]);break}u-=b,d+=p}while(d<m);if(!y.EQ(h,0))for(;Math.abs(t.xr[l-m])<=h&&(t.l3_enc[l-m]=0),0<--m;);}}while(++c<t.psymax);t.part2_3_length=r.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,i,l,_,h){var p=e.internal_flags,d=new B,b=s(576),v=s(E.SFBMAX),g=new M,w=new function(){this.global_gain=0,this.sfb_count1=0,this.step=a(39),this.noise=s(39),this.noise_log=s(39)},y=9999999,S=!1,R=!1,A=0;if(function(e,t,n,a,s){var i,l=e.CurrentStep[a],f=!1,c=e.OldValue[a],_=o.BINSEARCH_NONE;for(t.global_gain=c,n-=t.part2_length;;){var u;if(i=r.count_bits(e,s,t,null),1==l||i==n)break;n<i?(_==o.BINSEARCH_DOWN&&(f=!0),f&&(l/=2),_=o.BINSEARCH_UP,u=l):(_==o.BINSEARCH_UP&&(f=!0),f&&(l/=2),_=o.BINSEARCH_DOWN,u=-l),t.global_gain+=u,t.global_gain<0&&(f=!(t.global_gain=0)),255<t.global_gain&&(t.global_gain=255,f=!0)}for(;n<i&&t.global_gain<255;)t.global_gain++,i=r.count_bits(e,s,t,null);e.CurrentStep[a]=4<=c-t.global_gain?4:2,e.OldValue[a]=t.global_gain,t.part2_3_length=i}(p,t,h,_,l),0==p.noise_shaping)return 100;n.calc_noise(t,i,v,g,w),g.bits=t.part2_3_length,d.assign(t);var x=0;for(u.arraycopy(l,0,b,0,576);!S;){do{var T,k=new M,P=255;if(T=0!=(2&p.substep_shaping)?20:3,p.sfb21_extra){if(1<v[d.sfbmax])break;if(d.block_type==I.SHORT_TYPE&&(1<v[d.sfbmax+1]||1<v[d.sfbmax+2]))break}if(!c(e,d,v,l,R))break;0!=d.scalefac_scale&&(P=254);var L=h-d.part2_length;if(L<=0)break;for(;(d.part2_3_length=r.count_bits(p,l,d,w))>L&&d.global_gain<=P;)d.global_gain++;if(d.global_gain>P)break;if(0==g.over_count){for(;(d.part2_3_length=r.count_bits(p,l,d,w))>y&&d.global_gain<=P;)d.global_gain++;if(d.global_gain>P)break}if(n.calc_noise(d,i,v,k,w),k.bits=d.part2_3_length,0!=(f(t.block_type!=I.SHORT_TYPE?e.quant_comp:e.quant_comp_short,g,k,d,v)?1:0))y=t.part2_3_length,g=k,t.assign(d),x=0,u.arraycopy(l,0,b,0,576);else if(0==p.full_outer_loop){if(++x>T&&0==g.over_count)break;if(3==p.noise_shaping_amp&&R&&30<x)break;if(3==p.noise_shaping_amp&&R&&15<d.global_gain-A)break}}while(d.global_gain+d.scalefac_scale<255);3==p.noise_shaping_amp?R?S=!0:(d.assign(t),u.arraycopy(b,0,l,0,576),x=0,A=d.global_gain,R=!0):S=!0}return e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh?u.arraycopy(b,0,l,0,576):0!=(1&p.substep_shaping)&&trancate_smallspectrums(p,t,i,l),g.over_count},this.iteration_finish_one=function(e,n,a){var s=e.l3_side,i=s.tt[n][a];r.best_scalefac_store(e,n,a,s),1==e.use_best_huffman&&r.best_huffman_divide(e,i),t.ResvAdjust(e,i)},this.VBR_encode_granule=function(e,t,n,r,a,i,o){var l,f=e.internal_flags,c=new B,h=s(576),p=o,d=o+1,m=(o+i)/2,b=0,v=f.sfb21_extra;for(_.fill(c.l3_enc,0);f.sfb21_extra=!(p-42<m)&&v,outer_loop(e,t,n,r,a,m)<=0?(b=1,d=t.part2_3_length,c.assign(t),u.arraycopy(r,0,h,0,576),l=(o=d-32)-i,m=(o+i)/2):(l=o-(i=m+32),m=(o+i)/2,0!=b&&(b=2,t.assign(c),u.arraycopy(h,0,r,0,576))),12<l;);f.sfb21_extra=v,2==b&&u.arraycopy(c.l3_enc,0,t.l3_enc,0,576)},this.get_framebits=function(n,r){var a=n.internal_flags;a.bitrate_index=a.VBR_min_bitrate;var s=e.getframebits(n);a.bitrate_index=1,s=e.getframebits(n);for(var i=1;i<=a.VBR_max_bitrate;i++){a.bitrate_index=i;var o=new A(s);r[i]=t.ResvFrameBegin(n,o),s=o.bits}},this.VBR_old_prepare=function(e,r,a,s,i,o,l,f,c){var _,u=e.internal_flags,h=0,p=1,d=0;u.bitrate_index=u.VBR_max_bitrate;var m=t.ResvFrameBegin(e,new A(0))/u.mode_gr;get_framebits(e,o);for(var b=0;b<u.mode_gr;b++){var v=n.on_pe(e,r,f[b],m,b,0);u.mode_ext==I.MPG_MD_MS_LR&&(ms_convert(u.l3_side,b),n.reduce_side(f[b],a[b],m,v));for(var g=0;g<u.channels_out;++g){var w=u.l3_side.tt[b][g];w.block_type!=I.SHORT_TYPE?(h=1.28/(1+Math.exp(3.5-r[b][g]/300))-.05,_=u.PSY.mask_adjust-h):(h=2.56/(1+Math.exp(3.5-r[b][g]/300))-.14,_=u.PSY.mask_adjust_short-h),u.masking_lower=Math.pow(10,.1*_),init_outer_loop(u,w),c[b][g]=n.calc_xmin(e,s[b][g],w,i[b][g]),0!=c[b][g]&&(p=0),l[b][g]=126,d+=f[b][g]}}for(b=0;b<u.mode_gr;b++)for(g=0;g<u.channels_out;g++)d>o[u.VBR_max_bitrate]&&(f[b][g]*=o[u.VBR_max_bitrate],f[b][g]/=d),l[b][g]>f[b][g]&&(l[b][g]=f[b][g]);return p},this.bitpressure_strategy=function(e,t,n,r){for(var a=0;a<e.mode_gr;a++)for(var s=0;s<e.channels_out;s++){for(var i=e.l3_side.tt[a][s],o=t[a][s],l=0,f=0;f<i.psy_lmax;f++)o[l++]*=1+.029*f*f/I.SBMAX_l/I.SBMAX_l;if(i.block_type==I.SHORT_TYPE)for(f=i.sfb_smin;f<I.SBMAX_s;f++)o[l++]*=1+.029*f*f/I.SBMAX_s/I.SBMAX_s,o[l++]*=1+.029*f*f/I.SBMAX_s/I.SBMAX_s,o[l++]*=1+.029*f*f/I.SBMAX_s/I.SBMAX_s;r[a][s]=0|Math.max(n[a][s],.9*r[a][s])}},this.VBR_new_prepare=function(e,r,a,s,i,o){var l,f=e.internal_flags,c=1,_=0,u=0;if(e.free_format)f.bitrate_index=0,h=new A(_),l=t.ResvFrameBegin(e,h),_=h.bits,i[0]=l;else{f.bitrate_index=f.VBR_max_bitrate;var h=new A(_);t.ResvFrameBegin(e,h),_=h.bits,get_framebits(e,i),l=i[f.VBR_max_bitrate]}for(var p=0;p<f.mode_gr;p++){n.on_pe(e,r,o[p],_,p,0),f.mode_ext==I.MPG_MD_MS_LR&&ms_convert(f.l3_side,p);for(var d=0;d<f.channels_out;++d){var m=f.l3_side.tt[p][d];f.masking_lower=Math.pow(10,.1*f.PSY.mask_adjust),init_outer_loop(f,m),0!=n.calc_xmin(e,a[p][d],m,s[p][d])&&(c=0),u+=o[p][d]}}for(p=0;p<f.mode_gr;p++)for(d=0;d<f.channels_out;d++)l<u&&(o[p][d]*=l,o[p][d]/=u);return c},this.calc_target_bits=function(r,a,s,i,o,l){var f,c,_,u,h=r.internal_flags,p=h.l3_side,d=0;h.bitrate_index=h.VBR_max_bitrate;var m=new A(d);for(l[0]=t.ResvFrameBegin(r,m),d=m.bits,h.bitrate_index=1,d=e.getframebits(r)-8*h.sideinfo_len,o[0]=d/(h.mode_gr*h.channels_out),d=r.VBR_mean_bitrate_kbps*r.framesize*1e3,0!=(1&h.substep_shaping)&&(d*=1.09),d/=r.out_samplerate,d-=8*h.sideinfo_len,d/=h.mode_gr*h.channels_out,(f=.93+.07*(11-r.compression_ratio)/5.5)<.9&&(f=.9),1<f&&(f=1),c=0;c<h.mode_gr;c++){var b=0;for(_=0;_<h.channels_out;_++){if(i[c][_]=int(f*d),700<a[c][_]){var v=int((a[c][_]-700)/1.4),g=p.tt[c][_];i[c][_]=int(f*d),g.block_type==I.SHORT_TYPE&&v<d/2&&(v=d/2),3*d/2<v?v=3*d/2:v<0&&(v=0),i[c][_]+=v}i[c][_]>O.MAX_BITS_PER_CHANNEL&&(i[c][_]=O.MAX_BITS_PER_CHANNEL),b+=i[c][_]}if(O.MAX_BITS_PER_GRANULE<b)for(_=0;_<h.channels_out;++_)i[c][_]*=O.MAX_BITS_PER_GRANULE,i[c][_]/=b}if(h.mode_ext==I.MPG_MD_MS_LR)for(c=0;c<h.mode_gr;c++)n.reduce_side(i[c],s[c],d*h.channels_out,O.MAX_BITS_PER_GRANULE);for(c=u=0;c<h.mode_gr;c++)for(_=0;_<h.channels_out;_++)i[c][_]>O.MAX_BITS_PER_CHANNEL&&(i[c][_]=O.MAX_BITS_PER_CHANNEL),u+=i[c][_];if(u>l[0])for(c=0;c<h.mode_gr;c++)for(_=0;_<h.channels_out;_++)i[c][_]*=l[0],i[c][_]/=u}}function P(){this.thm=new L,this.en=new L}function I(){var e=I.FFTOFFSET,t=I.MPG_MD_MS_LR,n=null,r=this.psy=null,i=null,l=null;this.setModules=function(e,t,a,s){n=e,this.psy=t,r=t,i=s,l=a};var f=new function(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*h.SQRT2*.5/2384e-9,.017876148*h.SQRT2*.5/2384e-9,.003134727*h.SQRT2*.5/2384e-9,.002457142*h.SQRT2*.5/2384e-9,971317e-9*h.SQRT2*.5/2384e-9,218868e-9*h.SQRT2*.5/2384e-9,101566e-9*h.SQRT2*.5/2384e-9,13828e-9*h.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],n=t[I.SHORT_TYPE],r=t[I.SHORT_TYPE],a=t[I.SHORT_TYPE],i=t[I.SHORT_TYPE],o=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function l(t,n,r){for(var a,s,i,o=10,l=n+238-14-286,f=-15;f<0;f++){var c,_,u;c=e[o+-10],_=t[l+-224]*c,u=t[n+224]*c,c=e[o+-9],_+=t[l+-160]*c,u+=t[n+160]*c,c=e[o+-8],_+=t[l+-96]*c,u+=t[n+96]*c,c=e[o+-7],_+=t[l+-32]*c,u+=t[n+32]*c,c=e[o+-6],_+=t[l+32]*c,u+=t[n+-32]*c,c=e[o+-5],_+=t[l+96]*c,u+=t[n+-96]*c,c=e[o+-4],_+=t[l+160]*c,u+=t[n+-160]*c,c=e[o+-3],_+=t[l+224]*c,u+=t[n+-224]*c,c=e[o+-2],_+=t[n+-256]*c,u-=t[l+256]*c,c=e[o+-1],_+=t[n+-192]*c,u-=t[l+192]*c,c=e[o+0],_+=t[n+-128]*c,u-=t[l+128]*c,c=e[o+1],_+=t[n+-64]*c,u-=t[l+64]*c,c=e[o+2],_+=t[n+0]*c,u-=t[l+0]*c,c=e[o+3],_+=t[n+64]*c,u-=t[l+-64]*c,c=e[o+4],_+=t[n+128]*c,u-=t[l+-128]*c,c=e[o+5],_+=t[n+192]*c,c=(u-=t[l+-192]*c)-(_*=e[o+6]),r[30+2*f]=u+_,r[31+2*f]=e[o+7]*c,o+=18,n--,l++}u=t[n+-16]*e[o+-10],_=t[n+-32]*e[o+-2],u+=(t[n+-48]-t[n+16])*e[o+-9],_+=t[n+-96]*e[o+-1],u+=(t[n+-80]+t[n+48])*e[o+-8],_+=t[n+-160]*e[o+0],u+=(t[n+-112]-t[n+80])*e[o+-7],_+=t[n+-224]*e[o+1],u+=(t[n+-144]+t[n+112])*e[o+-6],_-=t[n+32]*e[o+2],u+=(t[n+-176]-t[n+144])*e[o+-5],_-=t[n+96]*e[o+3],u+=(t[n+-208]+t[n+176])*e[o+-4],_-=t[n+160]*e[o+4],u+=(t[n+-240]-t[n+208])*e[o+-3],a=(_-=t[n+224])-u,s=_+u,u=r[14],_=r[15]-u,r[31]=s+u,r[30]=a+_,r[15]=a-_,r[14]=s-u,i=r[28]-r[0],r[0]+=r[28],r[28]=i*e[o+-36+7],i=r[29]-r[1],r[1]+=r[29],r[29]=i*e[o+-36+7],i=r[26]-r[2],r[2]+=r[26],r[26]=i*e[o+-72+7],i=r[27]-r[3],r[3]+=r[27],r[27]=i*e[o+-72+7],i=r[24]-r[4],r[4]+=r[24],r[24]=i*e[o+-108+7],i=r[25]-r[5],r[5]+=r[25],r[25]=i*e[o+-108+7],i=r[22]-r[6],r[6]+=r[22],r[22]=i*h.SQRT2,i=r[23]-r[7],r[7]+=r[23],r[23]=i*h.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],i=r[6],r[6]=r[31]-i,r[31]=r[31]+i,i=r[7],r[7]=r[30]-i,r[30]=r[30]+i,i=r[22],r[22]=r[15]-i,r[15]=r[15]+i,i=r[23],r[23]=r[14]-i,r[14]=r[14]+i,i=r[20]-r[8],r[8]+=r[20],r[20]=i*e[o+-180+7],i=r[21]-r[9],r[9]+=r[21],r[21]=i*e[o+-180+7],i=r[18]-r[10],r[10]+=r[18],r[18]=i*e[o+-216+7],i=r[19]-r[11],r[11]+=r[19],r[19]=i*e[o+-216+7],i=r[16]-r[12],r[12]+=r[16],r[16]=i*e[o+-252+7],i=r[17]-r[13],r[13]+=r[17],r[17]=i*e[o+-252+7],i=-r[20]+r[24],r[20]+=r[24],r[24]=i*e[o+-216+7],i=-r[21]+r[25],r[21]+=r[25],r[25]=i*e[o+-216+7],i=r[4]-r[8],r[4]+=r[8],r[8]=i*e[o+-216+7],i=r[5]-r[9],r[5]+=r[9],r[9]=i*e[o+-216+7],i=r[0]-r[12],r[0]+=r[12],r[12]=i*e[o+-72+7],i=r[1]-r[13],r[1]+=r[13],r[13]=i*e[o+-72+7],i=r[16]-r[28],r[16]+=r[28],r[28]=i*e[o+-72+7],i=-r[17]+r[29],r[17]+=r[29],r[29]=i*e[o+-72+7],i=h.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=i,i=h.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=i,i=h.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=i-r[18],i=h.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=i-r[19],i=r[2],r[19]-=r[3],r[3]-=i,r[2]=r[31]-i,r[31]+=i,i=r[3],r[11]-=r[19],r[18]-=i,r[3]=r[30]-i,r[30]+=i,i=r[18],r[27]-=r[11],r[19]-=i,r[18]=r[15]-i,r[15]+=i,i=r[19],r[10]-=i,r[19]=r[14]-i,r[14]+=i,i=r[10],r[11]-=i,r[10]=r[23]-i,r[23]+=i,i=r[11],r[26]-=i,r[11]=r[22]-i,r[22]+=i,i=r[26],r[27]-=i,r[26]=r[7]-i,r[7]+=i,i=r[27],r[27]=r[6]-i,r[6]+=i,i=h.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=i,i=h.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=i,i=h.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=i,i=h.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=i,i=-h.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=i-r[8],i=-h.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=i-r[9],i=-h.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=i-r[25],i=-h.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=i-r[24],i=r[24]-r[16],r[24]=i,i=r[20]-i,r[20]=i,i=r[28]-i,r[28]=i,i=r[25]-r[17],r[25]=i,i=r[21]-i,r[21]=i,i=r[29]-i,r[29]=i,i=r[17]-r[1],r[17]=i,i=r[9]-i,r[9]=i,i=r[25]-i,r[25]=i,i=r[5]-i,r[5]=i,i=r[21]-i,r[21]=i,i=r[13]-i,r[13]=i,i=r[29]-i,r[29]=i,i=r[1]-r[0],r[1]=i,i=r[16]-i,r[16]=i,i=r[17]-i,r[17]=i,i=r[8]-i,r[8]=i,i=r[9]-i,r[9]=i,i=r[24]-i,r[24]=i,i=r[25]-i,r[25]=i,i=r[4]-i,r[4]=i,i=r[5]-i,r[5]=i,i=r[20]-i,r[20]=i,i=r[21]-i,r[21]=i,i=r[12]-i,r[12]=i,i=r[13]-i,r[13]=i,i=r[28]-i,r[28]=i,i=r[29]-i,r[29]=i,i=r[0],r[0]+=r[31],r[31]-=i,i=r[1],r[1]+=r[30],r[30]-=i,i=r[16],r[16]+=r[15],r[15]-=i,i=r[17],r[17]+=r[14],r[14]-=i,i=r[8],r[8]+=r[23],r[23]-=i,i=r[9],r[9]+=r[22],r[22]-=i,i=r[24],r[24]+=r[7],r[7]-=i,i=r[25],r[25]+=r[6],r[6]-=i,i=r[4],r[4]+=r[27],r[27]-=i,i=r[5],r[5]+=r[26],r[26]-=i,i=r[20],r[20]+=r[11],r[11]-=i,i=r[21],r[21]+=r[10],r[10]-=i,i=r[12],r[12]+=r[19],r[19]-=i,i=r[13],r[13]+=r[18],r[18]-=i,i=r[28],r[28]+=r[3],r[3]-=i,i=r[29],r[29]+=r[2],r[2]-=i}function f(e,n){for(var r=0;r<3;r++){var a,s,i,o,l,f;s=(o=e[n+6]*t[I.SHORT_TYPE][0]-e[n+15])+(a=e[n+0]*t[I.SHORT_TYPE][2]-e[n+9]),i=o-a,l=(o=e[n+15]*t[I.SHORT_TYPE][0]+e[n+6])+(a=e[n+9]*t[I.SHORT_TYPE][2]+e[n+0]),f=-o+a,a=2069978111953089e-26*(e[n+3]*t[I.SHORT_TYPE][1]-e[n+12]),o=2069978111953089e-26*(e[n+12]*t[I.SHORT_TYPE][1]+e[n+3]),e[n+0]=190752519173728e-25*s+a,e[n+15]=190752519173728e-25*-l+o,i=.8660254037844387*i*1907525191737281e-26,l=.5*l*1907525191737281e-26+o,e[n+3]=i-l,e[n+6]=i+l,s=.5*s*1907525191737281e-26-a,f=.8660254037844387*f*1907525191737281e-26,e[n+9]=s+f,e[n+12]=s-f,n++}}this.mdct_sub48=function(e,c,h){for(var p,d,m,b,v,g,w,y,S,R,A,M,x,T,B,E,k,P,L,O,C,N=c,H=286,V=0;V<e.channels_out;V++){for(var D=0;D<e.mode_gr;D++){for(var Y,U=e.l3_side.tt[D][V],j=U.xr,q=0,F=e.sb_sample[V][1-D],X=0,z=0;z<9;z++)for(l(N,H,F[X]),l(N,H+32,F[X+1]),X+=2,H+=64,Y=1;Y<32;Y+=2)F[X-1][Y]*=-1;for(Y=0;Y<32;Y++,q+=18){var Z=U.block_type,G=e.sb_sample[V][D],K=e.sb_sample[V][1-D];if(0!=U.mixed_block_flag&&Y<2&&(Z=0),e.amp_filter[Y]<1e-12)_.fill(j,q+0,q+18,0);else{if(e.amp_filter[Y]<1)for(z=0;z<18;z++)K[z][o[Y]]*=e.amp_filter[Y];if(Z==I.SHORT_TYPE){for(z=-3;z<0;z++){var Q=t[I.SHORT_TYPE][z+3];j[q+3*z+9]=G[9+z][o[Y]]*Q-G[8-z][o[Y]],j[q+3*z+18]=G[14-z][o[Y]]*Q+G[15+z][o[Y]],j[q+3*z+10]=G[15+z][o[Y]]*Q-G[14-z][o[Y]],j[q+3*z+19]=K[2-z][o[Y]]*Q+K[3+z][o[Y]],j[q+3*z+11]=K[3+z][o[Y]]*Q-K[2-z][o[Y]],j[q+3*z+20]=K[8-z][o[Y]]*Q+K[9+z][o[Y]]}f(j,q)}else{var W=s(18);for(z=-9;z<0;z++){var J,$;J=t[Z][z+27]*K[z+9][o[Y]]+t[Z][z+36]*K[8-z][o[Y]],$=t[Z][z+9]*G[z+9][o[Y]]-t[Z][z+18]*G[8-z][o[Y]],W[z+9]=J-$*n[3+z+9],W[z+18]=J*n[3+z+9]+$}p=j,d=q,C=O=L=P=k=E=B=T=x=M=A=R=S=y=w=g=v=b=void 0,g=(m=W)[17]-m[9],y=m[15]-m[11],S=m[14]-m[12],R=m[0]+m[8],A=m[1]+m[7],M=m[2]+m[6],x=m[3]+m[5],p[d+17]=R+M-x-(A-m[4]),v=(R+M-x)*r[19]+(A-m[4]),b=(g-y-S)*r[18],p[d+5]=b+v,p[d+6]=b-v,w=(m[16]-m[10])*r[18],A=A*r[19]+m[4],b=g*r[12]+w+y*r[13]+S*r[14],v=-R*r[16]+A-M*r[17]+x*r[15],p[d+1]=b+v,p[d+2]=b-v,b=g*r[13]-w-y*r[14]+S*r[12],v=-R*r[17]+A-M*r[15]+x*r[16],p[d+9]=b+v,p[d+10]=b-v,b=g*r[14]-w+y*r[12]-S*r[13],v=R*r[15]-A+M*r[16]-x*r[17],p[d+13]=b+v,p[d+14]=b-v,T=m[8]-m[0],E=m[6]-m[2],k=m[5]-m[3],P=m[17]+m[9],L=m[16]+m[10],O=m[15]+m[11],C=m[14]+m[12],p[d+0]=P+O+C+(L+m[13]),b=(P+O+C)*r[19]-(L+m[13]),v=(T-E+k)*r[18],p[d+11]=b+v,p[d+12]=b-v,B=(m[7]-m[1])*r[18],L=m[13]-L*r[19],b=P*r[15]-L+O*r[16]+C*r[17],v=T*r[14]+B+E*r[12]+k*r[13],p[d+3]=b+v,p[d+4]=b-v,b=-P*r[17]+L-O*r[15]-C*r[16],v=T*r[13]+B-E*r[14]-k*r[12],p[d+7]=b+v,p[d+8]=b-v,b=-P*r[16]+L-O*r[17]-C*r[15],v=T*r[12]-B+E*r[13]-k*r[14],p[d+15]=b+v,p[d+16]=b-v}}if(Z!=I.SHORT_TYPE&&0!=Y)for(z=7;0<=z;--z){var ee,te;ee=j[q+z]*a[20+z]+j[q+-1-z]*i[28+z],te=j[q+z]*i[28+z]-j[q+-1-z]*a[20+z],j[q+-1-z]=ee,j[q+z]=te}}}if(N=h,H=286,1==e.mode_gr)for(var ne=0;ne<18;ne++)u.arraycopy(e.sb_sample[V][1][ne],0,e.sb_sample[V][0][ne],0,32)}}};this.lame_encode_mp3_frame=function(_,h,p,d,v,g){var w,y=c([2,2]);y[0][0]=new P,y[0][1]=new P,y[1][0]=new P,y[1][1]=new P;var S,R=c([2,2]);R[0][0]=new P,R[0][1]=new P,R[1][0]=new P,R[1][1]=new P;var A,M,x,T=[null,null],B=_.internal_flags,E=o([2,4]),k=[.5,.5],L=[[0,0],[0,0]],O=[[0,0],[0,0]];if(T[0]=h,T[1]=p,0==B.lame_encode_frame_init&&function(e,t){var n,r,a=e.internal_flags;if(0==a.lame_encode_frame_init){var i,o,l=s(2014),c=s(2014);for(a.lame_encode_frame_init=1,o=i=0;i<286+576*(1+a.mode_gr);++i)i<576*a.mode_gr?(l[i]=0,2==a.channels_out&&(c[i]=0)):(l[i]=t[0][o],2==a.channels_out&&(c[i]=t[1][o]),++o);for(r=0;r<a.mode_gr;r++)for(n=0;n<a.channels_out;n++)a.l3_side.tt[r][n].block_type=I.SHORT_TYPE;f.mdct_sub48(a,l,c)}}(_,T),B.padding=0,(B.slot_lag-=B.frac_SpF)<0&&(B.slot_lag+=_.out_samplerate,B.padding=1),0!=B.psymodel){var C=[null,null],N=0,H=a(2);for(x=0;x<B.mode_gr;x++){for(M=0;M<B.channels_out;M++)C[M]=T[M],N=576+576*x-I.FFTOFFSET;if(0!=(_.VBR==m.vbr_mtrh||_.VBR==m.vbr_mt?r.L3psycho_anal_vbr(_,C,N,x,y,R,L[x],O[x],E[x],H):r.L3psycho_anal_ns(_,C,N,x,y,R,L[x],O[x],E[x],H)))return-4;for(_.mode==b.JOINT_STEREO&&(k[x]=E[x][2]+E[x][3],0<k[x]&&(k[x]=E[x][3]/k[x])),M=0;M<B.channels_out;M++){var V=B.l3_side.tt[x][M];V.block_type=H[M],V.mixed_block_flag=0}}}else for(x=0;x<B.mode_gr;x++)for(M=0;M<B.channels_out;M++)B.l3_side.tt[x][M].block_type=I.NORM_TYPE,B.l3_side.tt[x][M].mixed_block_flag=0,O[x][M]=L[x][M]=700;if(function(e){var t,n;if(0!=e.ATH.useAdjust)if(n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,.03125<(n*=e.ATH.aaSensitivityP))1<=e.ATH.adjust?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var r=31.98*n+625e-6;e.ATH.adjust>=r?(e.ATH.adjust*=.075*r+.925,e.ATH.adjust<r&&(e.ATH.adjust=r)):e.ATH.adjustLimit>=r?e.ATH.adjust=r:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=r}else e.ATH.adjust=1}(B),f.mdct_sub48(B,T[0],T[1]),B.mode_ext=I.MPG_MD_LR_LR,_.force_ms)B.mode_ext=I.MPG_MD_MS_LR;else if(_.mode==b.JOINT_STEREO){var D=0,Y=0;for(x=0;x<B.mode_gr;x++)for(M=0;M<B.channels_out;M++)D+=O[x][M],Y+=L[x][M];if(D<=1*Y){var U=B.l3_side.tt[0],j=B.l3_side.tt[B.mode_gr-1];U[0].block_type==U[1].block_type&&j[0].block_type==j[1].block_type&&(B.mode_ext=I.MPG_MD_MS_LR)}}if(B.mode_ext==t?(S=R,A=O):(S=y,A=L),_.analysis&&null!=B.pinfo)for(x=0;x<B.mode_gr;x++)for(M=0;M<B.channels_out;M++)B.pinfo.ms_ratio[x]=B.ms_ratio[x],B.pinfo.ms_ener_ratio[x]=k[x],B.pinfo.blocktype[x][M]=B.l3_side.tt[x][M].block_type,B.pinfo.pe[x][M]=A[x][M],u.arraycopy(B.l3_side.tt[x][M].xr,0,B.pinfo.xr[x][M],0,576),B.mode_ext==t&&(B.pinfo.ers[x][M]=B.pinfo.ers[x][M+2],u.arraycopy(B.pinfo.energy[x][M+2],0,B.pinfo.energy[x][M],0,B.pinfo.energy[x][M].length));if(_.VBR==m.vbr_off||_.VBR==m.vbr_abr){var q,F;for(q=0;q<18;q++)B.nsPsy.pefirbuf[q]=B.nsPsy.pefirbuf[q+1];for(x=F=0;x<B.mode_gr;x++)for(M=0;M<B.channels_out;M++)F+=A[x][M];for(B.nsPsy.pefirbuf[18]=F,F=B.nsPsy.pefirbuf[9],q=0;q<9;q++)F+=(B.nsPsy.pefirbuf[q]+B.nsPsy.pefirbuf[18-q])*I.fircoef[q];for(F=3350*B.mode_gr*B.channels_out/F,x=0;x<B.mode_gr;x++)for(M=0;M<B.channels_out;M++)A[x][M]*=F}if(B.iteration_loop.iteration_loop(_,A,k,S),n.format_bitstream(_),w=n.copy_buffer(B,d,v,g,1),_.bWriteVbrTag&&i.addVbrFrame(_),_.analysis&&null!=B.pinfo){for(M=0;M<B.channels_out;M++){var X;for(X=0;X<e;X++)B.pinfo.pcmdata[M][X]=B.pinfo.pcmdata[M][X+_.framesize];for(X=e;X<1600;X++)B.pinfo.pcmdata[M][X]=T[M][X-e]}l.set_frame_pinfo(_,S)}return function(e){var t,n;for(e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var r=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(r=4),e.bitrate_blockType_Hist[e.bitrate_index][r]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][r]++,e.bitrate_blockType_Hist[15][5]++}}(B),w}}function L(){this.l=s(I.SBMAX_l),this.s=o([I.SBMAX_s,3]);var e=this;this.assign=function(t){u.arraycopy(t.l,0,e.l,0,I.SBMAX_l);for(var n=0;n<I.SBMAX_s;n++)for(var r=0;r<3;r++)e.s[n][r]=t.s[n][r]}}function O(){var e=40;function t(){this.write_timing=0,this.ptr=0,this.buf=n(e)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=o([2,O.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new function(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[a(4),a(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new B},this.ms_ratio=s(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=a(2),this.CurrentStep=a(2),this.masking_lower=0,this.bv_scf=a(576),this.pseudohalf=a(E.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*O.BPC+1),this.itime=i(2),this.sideinfo_len=0,this.sb_sample=o([2,2,18,I.SBLIMIT]),this.amp_filter=s(32),this.header=new Array(O.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new x,this.minval_l=s(I.CBANDS),this.minval_s=s(I.CBANDS),this.nb_1=o([4,I.CBANDS]),this.nb_2=o([4,I.CBANDS]),this.nb_s1=o([4,I.CBANDS]),this.nb_s2=o([4,I.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=s(4),this.loudness_sq=o([2,2]),this.loudness_sq_save=s(2),this.mld_l=s(I.SBMAX_l),this.mld_s=s(I.SBMAX_s),this.bm_l=a(I.SBMAX_l),this.bo_l=a(I.SBMAX_l),this.bm_s=a(I.SBMAX_s),this.bo_s=a(I.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=l([I.CBANDS,2]),this.s3ind_s=l([I.CBANDS,2]),this.numlines_s=a(I.CBANDS),this.numlines_l=a(I.CBANDS),this.rnumlines_l=s(I.CBANDS),this.mld_cb_l=s(I.CBANDS),this.mld_cb_s=s(I.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=s(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=a(2),this.nsPsy=new function(){this.last_en_subshort=o([4,9]),this.lastAttacks=a(4),this.pefirbuf=s(19),this.longfact=s(I.SBMAX_l),this.shortfact=s(I.SBMAX_s),this.attackthre=0,this.attackthre_s=0},this.VBR_seek_table=new function(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0},this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=l([16,5]),this.bitrate_blockType_Hist=l([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var r=0;r<this.en.length;r++)this.en[r]=new L;for(r=0;r<this.thm.length;r++)this.thm[r]=new L;for(r=0;r<this.header.length;r++)this.header[r]=new t}function C(){var e=new function(){var e=s(I.BLKSIZE),t=s(I.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(e,t,r){var a,s,i,o=0,l=t+(r<<=1);a=4;do{var f,c,_,u,p,d,m;for(m=a>>1,d=(p=(u=a)<<1)+u,a=p<<1,i=(s=t)+m;R=e[s+0]-e[s+u],S=e[s+0]+e[s+u],T=e[s+p]-e[s+d],M=e[s+p]+e[s+d],e[s+p]=S-M,e[s+0]=S+M,e[s+d]=R-T,e[s+u]=R+T,R=e[i+0]-e[i+u],S=e[i+0]+e[i+u],T=h.SQRT2*e[i+d],M=h.SQRT2*e[i+p],e[i+p]=S-M,e[i+0]=S+M,e[i+d]=R-T,e[i+u]=R+T,i+=a,(s+=a)<l;);for(c=n[o+0],f=n[o+1],_=1;_<m;_++){var b,v;b=1-2*f*f,v=2*f*c,s=t+_,i=t+u-_;do{var g,w,y,S,R,A,M,x,T,B;w=v*e[s+u]-b*e[i+u],g=b*e[s+u]+v*e[i+u],R=e[s+0]-g,S=e[s+0]+g,A=e[i+0]-w,y=e[i+0]+w,w=v*e[s+d]-b*e[i+d],g=b*e[s+d]+v*e[i+d],T=e[s+p]-g,M=e[s+p]+g,B=e[i+p]-w,x=e[i+p]+w,w=f*M-c*B,g=c*M+f*B,e[s+p]=S-g,e[s+0]=S+g,e[i+d]=A-w,e[i+u]=A+w,w=c*x-f*T,g=f*x+c*T,e[i+p]=y-g,e[i+0]=y+g,e[s+d]=R-w,e[s+u]=R+w,i+=a,s+=a}while(s<l);c=(b=c)*n[o+0]-f*n[o+1],f=b*n[o+1]+f*n[o+0]}o+=2}while(a<r)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,n,s,i,o){for(var l=0;l<3;l++){var f=I.BLKSIZE_s/2,c=65535&192*(l+1),_=I.BLKSIZE_s/8-1;do{var u,h,p,d,m,b=255&a[_<<2];h=(u=t[b]*i[s][o+b+c])-(m=t[127-b]*i[s][o+b+c+128]),u+=m,d=(p=t[b+64]*i[s][o+b+c+64])-(m=t[63-b]*i[s][o+b+c+192]),p+=m,f-=4,n[l][f+0]=u+p,n[l][f+2]=u-p,n[l][f+1]=h+d,n[l][f+3]=h-d,h=(u=t[b+1]*i[s][o+b+c+1])-(m=t[126-b]*i[s][o+b+c+129]),u+=m,d=(p=t[b+65]*i[s][o+b+c+65])-(m=t[62-b]*i[s][o+b+c+193]),p+=m,n[l][f+I.BLKSIZE_s/2+0]=u+p,n[l][f+I.BLKSIZE_s/2+2]=u-p,n[l][f+I.BLKSIZE_s/2+1]=h+d,n[l][f+I.BLKSIZE_s/2+3]=h-d}while(0<=--_);r(n[l],f,I.BLKSIZE_s/2)}},this.fft_long=function(t,n,s,i,o){var l=I.BLKSIZE/8-1,f=I.BLKSIZE/2;do{var c,_,u,h,p,d=255&a[l];_=(c=e[d]*i[s][o+d])-(p=e[d+512]*i[s][o+d+512]),c+=p,h=(u=e[d+256]*i[s][o+d+256])-(p=e[d+768]*i[s][o+d+768]),u+=p,n[0+(f-=4)]=c+u,n[f+2]=c-u,n[f+1]=_+h,n[f+3]=_-h,_=(c=e[d+1]*i[s][o+d+1])-(p=e[d+513]*i[s][o+d+513]),c+=p,h=(u=e[d+257]*i[s][o+d+257])-(p=e[d+769]*i[s][o+d+769]),u+=p,n[f+I.BLKSIZE/2+0]=c+u,n[f+I.BLKSIZE/2+2]=c-u,n[f+I.BLKSIZE/2+1]=_+h,n[f+I.BLKSIZE/2+3]=_-h}while(0<=--l);r(n,f,I.BLKSIZE/2)},this.init_fft=function(n){for(var r=0;r<I.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/I.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/I.BLKSIZE);for(r=0;r<I.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/I.BLKSIZE_s))}},t=2.302585092994046,n=2,r=16,i=2,l=16,f=.34,c=1/217621504/(I.BLKSIZE/2),u=.3,v=21,g=.2302585093;function w(e){return e}function y(e,t){for(var n=0,r=0;r<I.BLKSIZE/2;++r)n+=e[r]*t.ATH.eql_w[r];return n*c}function S(t,n,r,a,s,i,o,l,f,c,_){var u=t.internal_flags;if(f<2)e.fft_long(u,a[s],f,c,_),e.fft_short(u,i[o],f,c,_);else if(2==f){for(var p=I.BLKSIZE-1;0<=p;--p){var d=a[s+0][p],m=a[s+1][p];a[s+0][p]=(d+m)*h.SQRT2*.5,a[s+1][p]=(d-m)*h.SQRT2*.5}for(var b=2;0<=b;--b)for(p=I.BLKSIZE_s-1;0<=p;--p)d=i[o+0][b][p],m=i[o+1][b][p],i[o+0][b][p]=(d+m)*h.SQRT2*.5,i[o+1][b][p]=(d-m)*h.SQRT2*.5}for(n[0]=w(a[s+0][0]),n[0]*=n[0],p=I.BLKSIZE/2-1;0<=p;--p){var v=a[s+0][I.BLKSIZE/2-p],g=a[s+0][I.BLKSIZE/2+p];n[I.BLKSIZE/2-p]=w(.5*(v*v+g*g))}for(b=2;0<=b;--b)for(r[b][0]=i[o+0][b][0],r[b][0]*=r[b][0],p=I.BLKSIZE_s/2-1;0<=p;--p)v=i[o+0][b][I.BLKSIZE_s/2-p],g=i[o+0][b][I.BLKSIZE_s/2+p],r[b][I.BLKSIZE_s/2-p]=w(.5*(v*v+g*g));var S=0;for(p=11;p<I.HBLKSIZE;p++)S+=n[p];if(u.tot_ener[f]=S,t.analysis){for(p=0;p<I.HBLKSIZE;p++)u.pinfo.energy[l][f][p]=u.pinfo.energy_save[f][p],u.pinfo.energy_save[f][p]=n[p];u.pinfo.pe[l][f]=u.pe[f]}2==t.athaa_loudapprox&&f<2&&(u.loudness_sq[l][f]=u.loudness_sq_save[f],u.loudness_sq_save[f]=y(n,u))}var R,A,M,x=8,T=23,B=15,E=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],k=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],P=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],L=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function O(e,t,n,r,a,s){var i,o,l;if(e<t){if(!(t<e*A))return e+t;i=t/e}else{if(t*A<=e)return e+t;i=e/t}if(e+=t,r+3<=6){if(R<=i)return e;var f=0|h.FAST_LOG10_X(i,16);return e*P[f]}return f=0|h.FAST_LOG10_X(i,16),t=0!=s?a.ATH.cb_s[n]*a.ATH.adjust:a.ATH.cb_l[n]*a.ATH.adjust,e<M*t?t<e?(o=1,f<=13&&(o=L[f]),l=h.FAST_LOG10_X(e/t,10/15),e*((k[f]-o)*l+o)):13<f?e:e*L[f]:e*k[f]}var C=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function N(e,t,n){var r;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(r=e<t?t/e:e/t,-2<=n&&n<=2){if(R<=r)return e+t;var a=0|h.FAST_LOG10_X(r,16);return(e+t)*C[a]}return r<A?e+t:(e<t&&(e=t),e)}function H(e,t,n,r,a){var s,i,o=0,l=0;for(s=i=0;s<I.SBMAX_s;++i,++s){for(var f=e.bo_s[s],c=e.npart_s,_=f<c?f:c;i<_;)o+=t[i],l+=n[i],i++;if(e.en[r].s[s][a]=o,e.thm[r].s[s][a]=l,c<=i){++s;break}var u=e.PSY.bo_s_weight[s],h=1-u;o=u*t[i],l=u*n[i],e.en[r].s[s][a]+=o,e.thm[r].s[s][a]+=l,o=h*t[i],l=h*n[i]}for(;s<I.SBMAX_s;++s)e.en[r].s[s][a]=0,e.thm[r].s[s][a]=0}function V(e,t,n,r){var a,s,i=0,o=0;for(a=s=0;a<I.SBMAX_l;++s,++a){for(var l=e.bo_l[a],f=e.npart_l,c=l<f?l:f;s<c;)i+=t[s],o+=n[s],s++;if(e.en[r].l[a]=i,e.thm[r].l[a]=o,f<=s){++a;break}var _=e.PSY.bo_l_weight[a],u=1-_;i=_*t[s],o=_*n[s],e.en[r].l[a]+=i,e.thm[r].l[a]+=o,i=u*t[s],o=u*n[s]}for(;a<I.SBMAX_l;++a)e.en[r].l[a]=0,e.thm[r].l[a]=0}function D(e,t,n,r,a,s){var o,f,c=e.internal_flags;for(f=o=0;f<c.npart_s;++f){for(var _=0,u=0,h=c.numlines_s[f],p=0;p<h;++p,++o){var d=t[s][o];_+=d,u<d&&(u=d)}n[f]=_}for(o=f=0;f<c.npart_s;f++){var m=c.s3ind_s[f][0],b=c.s3_ss[o++]*n[m];for(++m;m<=c.s3ind_s[f][1];)b+=c.s3_ss[o]*n[m],++o,++m;var v=i*c.nb_s1[a][f];if(r[f]=Math.min(b,v),c.blocktype_old[1&a]==I.SHORT_TYPE){v=l*c.nb_s2[a][f];var g=r[f];r[f]=Math.min(v,g)}c.nb_s2[a][f]=c.nb_s1[a][f],c.nb_s1[a][f]=b}for(;f<=I.CBANDS;++f)n[f]=0,r[f]=0}function Y(e,t,n){return 1<=n?e:n<=0?t:0<t?Math.pow(e/t,n)*t:0}var U=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function j(e,n){for(var r=309.07,a=0;a<I.SBMAX_s-1;a++)for(var s=0;s<3;s++){var i=e.thm.s[a][s];if(0<i){var o=i*n,l=e.en.s[a][s];o<l&&(r+=1e10*o<l?U[a]*(10*t):U[a]*h.FAST_LOG10(l/o))}}return r}var q=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function F(e,n){for(var r=281.0575,a=0;a<I.SBMAX_l-1;a++){var s=e.thm.l[a];if(0<s){var i=s*n,o=e.en.l[a];i<o&&(r+=1e10*i<o?q[a]*(10*t):q[a]*h.FAST_LOG10(o/i))}}return r}function X(e,t,n,r,a){var s,i;for(s=i=0;s<e.npart_l;++s){var o,l=0,f=0;for(o=0;o<e.numlines_l[s];++o,++i){var c=t[i];l+=c,f<c&&(f=c)}n[s]=l,r[s]=f,a[s]=l*e.rnumlines_l[s]}}function z(e,t,n,r){var a=E.length-1,s=0,i=n[s]+n[s+1];for(0<i?((o=t[s])<t[s+1]&&(o=t[s+1]),a<(l=0|(i=20*(2*o-i)/(i*(e.numlines_l[s]+e.numlines_l[s+1]-1))))&&(l=a),r[s]=l):r[s]=0,s=1;s<e.npart_l-1;s++){var o,l;0<(i=n[s-1]+n[s]+n[s+1])?((o=t[s-1])<t[s]&&(o=t[s]),o<t[s+1]&&(o=t[s+1]),a<(l=0|(i=20*(3*o-i)/(i*(e.numlines_l[s-1]+e.numlines_l[s]+e.numlines_l[s+1]-1))))&&(l=a),r[s]=l):r[s]=0}0<(i=n[s-1]+n[s])?((o=t[s-1])<t[s]&&(o=t[s]),a<(l=0|(i=20*(2*o-i)/(i*(e.numlines_l[s-1]+e.numlines_l[s]-1))))&&(l=a),r[s]=l):r[s]=0}var Z=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function G(t,n,r,a,s,i,o,l){var f=t.internal_flags;if(a<2)e.fft_long(f,o[l],a,n,r);else if(2==a)for(var c=I.BLKSIZE-1;0<=c;--c){var _=o[l+0][c],u=o[l+1][c];o[l+0][c]=(_+u)*h.SQRT2*.5,o[l+1][c]=(_-u)*h.SQRT2*.5}for(i[0]=w(o[l+0][0]),i[0]*=i[0],c=I.BLKSIZE/2-1;0<=c;--c){var p=o[l+0][I.BLKSIZE/2-c],d=o[l+0][I.BLKSIZE/2+c];i[I.BLKSIZE/2-c]=w(.5*(p*p+d*d))}var m=0;for(c=11;c<I.HBLKSIZE;c++)m+=i[c];if(f.tot_ener[a]=m,t.analysis){for(c=0;c<I.HBLKSIZE;c++)f.pinfo.energy[s][a][c]=f.pinfo.energy_save[a][c],f.pinfo.energy_save[a][c]=i[c];f.pinfo.pe[s][a]=f.pe[a]}}function K(t,n,r,a,s,i,o,l){var f=t.internal_flags;if(0==s&&a<2&&e.fft_short(f,o[l],a,n,r),2==a)for(var c=I.BLKSIZE_s-1;0<=c;--c){var _=o[l+0][s][c],u=o[l+1][s][c];o[l+0][s][c]=(_+u)*h.SQRT2*.5,o[l+1][s][c]=(_-u)*h.SQRT2*.5}for(i[s][0]=o[l+0][s][0],i[s][0]*=i[s][0],c=I.BLKSIZE_s/2-1;0<=c;--c){var p=o[l+0][s][I.BLKSIZE_s/2-c],d=o[l+0][s][I.BLKSIZE_s/2+c];i[s][I.BLKSIZE_s/2-c]=w(.5*(p*p+d*d))}}this.L3psycho_anal_ns=function(e,t,i,l,f,c,h,d,g,w){var y,R,A,M,x,T,B,k,P,L,C=e.internal_flags,N=o([2,I.BLKSIZE]),U=o([2,3,I.BLKSIZE_s]),q=s(I.CBANDS+1),G=s(I.CBANDS+1),K=s(I.CBANDS+2),Q=a(2),W=a(2),J=o([2,576]),$=a(I.CBANDS+2),ee=a(I.CBANDS+2);for(_.fill(ee,0),y=C.channels_out,e.mode==b.JOINT_STEREO&&(y=4),P=e.VBR==m.vbr_off?0==C.ResvMax?0:C.ResvSize/C.ResvMax*.5:e.VBR==m.vbr_rh||e.VBR==m.vbr_mtrh||e.VBR==m.vbr_mt?.6:1,R=0;R<C.channels_out;R++){var te=t[R],ne=i+576-350-v+192;for(M=0;M<576;M++){var re,ae;for(re=te[ne+M+10],x=ae=0;x<(v-1)/2-1;x+=2)re+=Z[x]*(te[ne+M+x]+te[ne+M+v-x]),ae+=Z[x+1]*(te[ne+M+x+1]+te[ne+M+v-x-1]);J[R][M]=re+ae}f[l][R].en.assign(C.en[R]),f[l][R].thm.assign(C.thm[R]),2<y&&(c[l][R].en.assign(C.en[R+2]),c[l][R].thm.assign(C.thm[R+2]))}for(R=0;R<y;R++){var se,ie=s(12),oe=[0,0,0,0],le=s(12),fe=1,ce=s(I.CBANDS),_e=s(I.CBANDS),ue=[0,0,0,0],he=s(I.HBLKSIZE),pe=o([3,I.HBLKSIZE_s]);for(M=0;M<3;M++)ie[M]=C.nsPsy.last_en_subshort[R][M+6],le[M]=ie[M]/C.nsPsy.last_en_subshort[R][M+4],oe[0]+=ie[M];if(2==R)for(M=0;M<576;M++){var de,me;de=J[0][M],me=J[1][M],J[0][M]=de+me,J[1][M]=de-me}var be=J[1&R],ve=0;for(M=0;M<9;M++){for(var ge=ve+64,we=1;ve<ge;ve++)we<Math.abs(be[ve])&&(we=Math.abs(be[ve]));C.nsPsy.last_en_subshort[R][M]=ie[M+3]=we,oe[1+M/3]+=we,we>ie[M+3-2]?we/=ie[M+3-2]:we=ie[M+3-2]>10*we?ie[M+3-2]/(10*we):0,le[M+3]=we}if(e.analysis){var ye=le[0];for(M=1;M<12;M++)ye<le[M]&&(ye=le[M]);C.pinfo.ers[l][R]=C.pinfo.ers_save[R],C.pinfo.ers_save[R]=ye}for(se=3==R?C.nsPsy.attackthre_s:C.nsPsy.attackthre,M=0;M<12;M++)0==ue[M/3]&&le[M]>se&&(ue[M/3]=M%3+1);for(M=1;M<4;M++)(oe[M-1]>oe[M]?oe[M-1]/oe[M]:oe[M]/oe[M-1])<1.7&&(ue[M]=0,1==M&&(ue[0]=0));for(0!=ue[0]&&0!=C.nsPsy.lastAttacks[R]&&(ue[0]=0),3!=C.nsPsy.lastAttacks[R]&&ue[0]+ue[1]+ue[2]+ue[3]==0||((fe=0)!=ue[1]&&0!=ue[0]&&(ue[1]=0),0!=ue[2]&&0!=ue[1]&&(ue[2]=0),0!=ue[3]&&0!=ue[2]&&(ue[3]=0)),R<2?W[R]=fe:0==fe&&(W[0]=W[1]=0),g[R]=C.tot_ener[R],S(e,he,pe,N,1&R,U,1&R,l,R,t,i),X(C,he,q,ce,_e),z(C,ce,_e,$),k=0;k<3;k++){var Se,Re;for(D(e,pe,G,K,R,k),H(C,G,K,R,k),B=0;B<I.SBMAX_s;B++){if(Re=C.thm[R].s[B][k],Re*=.8,2<=ue[k]||1==ue[k+1]){var Ae=0!=k?k-1:2;we=Y(C.thm[R].s[B][Ae],Re,.6*P),Re=Math.min(Re,we)}1==ue[k]?(Ae=0!=k?k-1:2,we=Y(C.thm[R].s[B][Ae],Re,u*P),Re=Math.min(Re,we)):(0!=k&&3==ue[k-1]||0==k&&3==C.nsPsy.lastAttacks[R])&&(Ae=2!=k?k+1:0,we=Y(C.thm[R].s[B][Ae],Re,u*P),Re=Math.min(Re,we)),Se=ie[3*k+3]+ie[3*k+4]+ie[3*k+5],6*ie[3*k+5]<Se&&(Re*=.5,6*ie[3*k+4]<Se&&(Re*=.5)),C.thm[R].s[B][k]=Re}}for(C.nsPsy.lastAttacks[R]=ue[2],A=T=0;A<C.npart_l;A++){for(var Me=C.s3ind[A][0],xe=q[Me]*E[$[Me]],Te=C.s3_ll[T++]*xe;++Me<=C.s3ind[A][1];)xe=q[Me]*E[$[Me]],Te=O(Te,C.s3_ll[T++]*xe,Me,Me-A,C,0);Te*=.158489319246111,C.blocktype_old[1&R]==I.SHORT_TYPE?K[A]=Te:K[A]=Y(Math.min(Te,Math.min(n*C.nb_1[R][A],r*C.nb_2[R][A])),Te,P),C.nb_2[R][A]=C.nb_1[R][A],C.nb_1[R][A]=Te}for(;A<=I.CBANDS;++A)q[A]=0,K[A]=0;V(C,q,K,R)}for(e.mode!=b.STEREO&&e.mode!=b.JOINT_STEREO||0<e.interChRatio&&function(e,t){var n=e.internal_flags;if(1<n.channels_out){for(var r=0;r<I.SBMAX_l;r++){var a=n.thm[0].l[r],s=n.thm[1].l[r];n.thm[0].l[r]+=s*t,n.thm[1].l[r]+=a*t}for(r=0;r<I.SBMAX_s;r++)for(var i=0;i<3;i++)a=n.thm[0].s[r][i],s=n.thm[1].s[r][i],n.thm[0].s[r][i]+=s*t,n.thm[1].s[r][i]+=a*t}}(e,e.interChRatio),e.mode==b.JOINT_STEREO&&(function(e){for(var t=0;t<I.SBMAX_l;t++)if(!(e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t])){var n=e.mld_l[t]*e.en[3].l[t],r=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n));n=e.mld_l[t]*e.en[2].l[t];var a=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n));e.thm[2].l[t]=r,e.thm[3].l[t]=a}for(t=0;t<I.SBMAX_s;t++)for(var s=0;s<3;s++)e.thm[0].s[t][s]>1.58*e.thm[1].s[t][s]||e.thm[1].s[t][s]>1.58*e.thm[0].s[t][s]||(n=e.mld_s[t]*e.en[3].s[t][s],r=Math.max(e.thm[2].s[t][s],Math.min(e.thm[3].s[t][s],n)),n=e.mld_s[t]*e.en[2].s[t][s],a=Math.max(e.thm[3].s[t][s],Math.min(e.thm[2].s[t][s],n)),e.thm[2].s[t][s]=r,e.thm[3].s[t][s]=a)}(C),L=e.msfix,0<Math.abs(L)&&function(e,t,n){var r=t,a=Math.pow(10,n);t*=2,r*=2;for(var s=0;s<I.SBMAX_l;s++)c=e.ATH.cb_l[e.bm_l[s]]*a,(o=Math.min(Math.max(e.thm[0].l[s],c),Math.max(e.thm[1].l[s],c)))*t<(l=Math.max(e.thm[2].l[s],c))+(f=Math.max(e.thm[3].l[s],c))&&(l*=_=o*r/(l+f),f*=_),e.thm[2].l[s]=Math.min(l,e.thm[2].l[s]),e.thm[3].l[s]=Math.min(f,e.thm[3].l[s]);for(a*=I.BLKSIZE_s/I.BLKSIZE,s=0;s<I.SBMAX_s;s++)for(var i=0;i<3;i++){var o,l,f,c,_;c=e.ATH.cb_s[e.bm_s[s]]*a,(o=Math.min(Math.max(e.thm[0].s[s][i],c),Math.max(e.thm[1].s[s][i],c)))*t<(l=Math.max(e.thm[2].s[s][i],c))+(f=Math.max(e.thm[3].s[s][i],c))&&(l*=_=o*t/(l+f),f*=_),e.thm[2].s[s][i]=Math.min(e.thm[2].s[s][i],l),e.thm[3].s[s][i]=Math.min(e.thm[3].s[s][i],f)}}(C,L,e.ATHlower*C.ATH.adjust)),function(e,t,n,r){var a=e.internal_flags;e.short_blocks!=p.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var s=0;s<a.channels_out;s++)r[s]=I.NORM_TYPE,e.short_blocks==p.short_block_dispensed&&(t[s]=1),e.short_blocks==p.short_block_forced&&(t[s]=0),0!=t[s]?a.blocktype_old[s]==I.SHORT_TYPE&&(r[s]=I.STOP_TYPE):(r[s]=I.SHORT_TYPE,a.blocktype_old[s]==I.NORM_TYPE&&(a.blocktype_old[s]=I.START_TYPE),a.blocktype_old[s]==I.STOP_TYPE&&(a.blocktype_old[s]=I.SHORT_TYPE)),n[s]=a.blocktype_old[s],a.blocktype_old[s]=r[s]}(e,W,w,Q),R=0;R<y;R++){var Be,Ee,ke,Pe=0;1<R?(Be=d,Pe=-2,Ee=I.NORM_TYPE,w[0]!=I.SHORT_TYPE&&w[1]!=I.SHORT_TYPE||(Ee=I.SHORT_TYPE),ke=c[l][R-2]):(Be=h,Pe=0,Ee=w[R],ke=f[l][R]),Be[Pe+R]=Ee==I.SHORT_TYPE?j(ke,C.masking_lower):F(ke,C.masking_lower),e.analysis&&(C.pinfo.pe[l][R]=Be[Pe+R])}return 0};var Q=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function W(e,t,n){if(0==n)for(var r=0;r<e.npart_s;r++)e.nb_s2[t][r]=e.nb_s1[t][r],e.nb_s1[t][r]=0}function J(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}function $(e,t,n,r,a,i){var o,l,f,c=e.internal_flags,_=new float[I.CBANDS],u=s(I.CBANDS),h=new int[I.CBANDS];for(f=l=0;f<c.npart_s;++f){var p=0,d=0,m=c.numlines_s[f];for(o=0;o<m;++o,++l){var b=t[i][l];p+=b,d<b&&(d=b)}n[f]=p,_[f]=d,u[f]=p/m}for(;f<I.CBANDS;++f)_[f]=0,u[f]=0;for(function(e,t,n,r){var a=E.length-1,s=0,i=n[s]+n[s+1];for(0<i?((o=t[s])<t[s+1]&&(o=t[s+1]),a<(l=0|(i=20*(2*o-i)/(i*(e.numlines_s[s]+e.numlines_s[s+1]-1))))&&(l=a),r[s]=l):r[s]=0,s=1;s<e.npart_s-1;s++){var o,l;0<(i=n[s-1]+n[s]+n[s+1])?((o=t[s-1])<t[s]&&(o=t[s]),o<t[s+1]&&(o=t[s+1]),a<(l=0|(i=20*(3*o-i)/(i*(e.numlines_s[s-1]+e.numlines_s[s]+e.numlines_s[s+1]-1))))&&(l=a),r[s]=l):r[s]=0}0<(i=n[s-1]+n[s])?((o=t[s-1])<t[s]&&(o=t[s]),a<(l=0|(i=20*(2*o-i)/(i*(e.numlines_s[s-1]+e.numlines_s[s]-1))))&&(l=a),r[s]=l):r[s]=0}(c,_,u,h),l=f=0;f<c.npart_s;f++){var v,g,w,y,S,R=c.s3ind_s[f][0],A=c.s3ind_s[f][1];for(v=h[R],g=1,y=c.s3_ss[l]*n[R]*E[h[R]],++l,++R;R<=A;)v+=h[R],g+=1,y=N(y,w=c.s3_ss[l]*n[R]*E[h[R]],R-f),++l,++R;y*=S=.5*E[v=(1+2*v)/(2*g)],r[f]=y,c.nb_s2[a][f]=c.nb_s1[a][f],c.nb_s1[a][f]=y,w=_[f],w*=c.minval_s[f],w*=S,r[f]>w&&(r[f]=w),1<c.masking_lower&&(r[f]*=c.masking_lower),r[f]>n[f]&&(r[f]=n[f]),c.masking_lower<1&&(r[f]*=c.masking_lower)}for(;f<I.CBANDS;++f)n[f]=0,r[f]=0}function ee(e,t,i,o,l){var f,c=s(I.CBANDS),_=s(I.CBANDS),h=a(I.CBANDS+2);X(e,t,i,c,_),z(e,c,_,h);var p=0;for(f=0;f<e.npart_l;f++){var d,m,b,v=e.s3ind[f][0],g=e.s3ind[f][1],w=0,y=0;for(w=h[v],y+=1,m=e.s3_ll[p]*i[v]*E[h[v]],++p,++v;v<=g;)w+=h[v],y+=1,m=N(m,d=e.s3_ll[p]*i[v]*E[h[v]],v-f),++p,++v;if(m*=b=.5*E[w=(1+2*w)/(2*y)],e.blocktype_old[1&l]==I.SHORT_TYPE){var S=n*e.nb_1[l][f];o[f]=0<S?Math.min(m,S):Math.min(m,i[f]*u)}else{var R=r*e.nb_2[l][f],A=n*e.nb_1[l][f];R<=0&&(R=m),A<=0&&(A=m),S=e.blocktype_old[1&l]==I.NORM_TYPE?Math.min(A,R):A,o[f]=Math.min(m,S)}e.nb_2[l][f]=e.nb_1[l][f],e.nb_1[l][f]=m,d=c[f],d*=e.minval_l[f],d*=b,o[f]>d&&(o[f]=d),1<e.masking_lower&&(o[f]*=e.masking_lower),o[f]>i[f]&&(o[f]=i[f]),e.masking_lower<1&&(o[f]*=e.masking_lower)}for(;f<I.CBANDS;++f)i[f]=0,o[f]=0}function te(e,t,n,r,a,s,i){for(var o,l,f=2*s,c=0<s?Math.pow(10,a):1,_=0;_<i;++_){var u=e[2][_],h=e[3][_],p=t[0][_],d=t[1][_],m=t[2][_],b=t[3][_];if(p<=1.58*d&&d<=1.58*p){var v=n[_]*h,g=n[_]*u;l=Math.max(m,Math.min(b,v)),o=Math.max(b,Math.min(m,g))}else l=m,o=b;if(0<s){var w,y,S=r[_]*c;if(w=Math.min(Math.max(p,S),Math.max(d,S)),0<(y=(m=Math.max(l,S))+(b=Math.max(o,S)))&&w*f<y){var R=w*f/y;m*=R,b*=R}l=Math.min(m,l),o=Math.min(b,o)}u<l&&(l=u),h<o&&(o=h),t[2][_]=l,t[3][_]=o}}function ne(e,t){var n;return(n=0<=e?27*-e:e*t)<=-72?0:Math.exp(n*g)}function re(e){var t,n,r,a,s=0;for(s=0;1e-20<ne(s,e);s-=1);for(r=s,a=0;1e-12<Math.abs(a-r);)0<ne(s=(a+r)/2,e)?a=s:r=s;for(t=r,s=0,s=0;1e-20<ne(s,e);s+=1);for(r=0,a=s;1e-12<Math.abs(a-r);)0<ne(s=(a+r)/2,e)?r=s:a=s;n=a;var i,o=0;for(i=0;i<=1e3;++i)o+=ne(s=t+i*(n-t)/1e3,e);return 1001/(o*(n-t))}function ae(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function se(e,t,n,r,i,o,l,c,_,u,h,p){var d,m=s(I.CBANDS+1),b=c/(15<p?1152:384),v=a(I.HBLKSIZE);c/=_;var g=0,w=0;for(d=0;d<I.CBANDS;d++){var y;for(k=ae(c*g),m[d]=c*g,y=g;ae(c*y)-k<f&&y<=_/2;y++);for(e[d]=y-g,w=d+1;g<y;)v[g++]=d;if(_/2<g){g=_/2,++d;break}}m[d]=c*g;for(var S=0;S<p;S++){var R,A,M,x,T;M=u[S],x=u[S+1],(R=0|Math.floor(.5+h*(M-.5)))<0&&(R=0),_/2<(A=0|Math.floor(.5+h*(x-.5)))&&(A=_/2),n[S]=(v[R]+v[A])/2,t[S]=v[A];var B=b*x;l[S]=(B-m[t[S]])/(m[t[S]+1]-m[t[S]]),l[S]<0?l[S]=0:1<l[S]&&(l[S]=1),T=ae(c*u[S]*h),T=Math.min(T,15.5)/15.5,o[S]=Math.pow(10,1.25*(1-Math.cos(Math.PI*T))-2.5)}for(var E=g=0;E<w;E++){var k,P,L=e[E];k=ae(c*g),P=ae(c*(g+L-1)),r[E]=.5*(k+P),k=ae(c*(g-.5)),P=ae(c*(g+L-.5)),i[E]=P-k,g+=L}return w}function ie(e,t,n,r,a,i){var l,f,c,_,u,h,p=o([I.CBANDS,I.CBANDS]),d=0;if(i)for(var m=0;m<t;m++)for(l=0;l<t;l++){var b=(f=n[m]-n[l],h=u=_=c=void 0,c=f,_=.5<=(c*=0<=c?3:1.5)&&c<=2.5?8*((h=c-.5)*h-2*h):0,((u=15.811389+7.5*(c+=.474)-17.5*Math.sqrt(1+c*c))<=-60?0:(c=Math.exp((_+u)*g),c/=.6609193))*r[l]);p[m][l]=b*a[m]}else for(l=0;l<t;l++){var v=15+Math.min(21/n[l],12),w=re(v);for(m=0;m<t;m++)b=w*ne(n[m]-n[l],v)*r[l],p[m][l]=b*a[m]}for(m=0;m<t;m++){for(l=0;l<t&&!(0<p[m][l]);l++);for(e[m][0]=l,l=t-1;0<l&&!(0<p[m][l]);l--);e[m][1]=l,d+=e[m][1]-e[m][0]+1}var y=s(d),S=0;for(m=0;m<t;m++)for(l=e[m][0];l<=e[m][1];l++)y[S++]=p[m][l];return y}function oe(e){var t=ae(e);return t=Math.min(t,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*t))-2.5)}function le(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}this.L3psycho_anal_vbr=function(e,t,n,r,i,l,f,c,_,h){var d,m,g,w,S,R=e.internal_flags,A=s(I.HBLKSIZE),M=o([3,I.HBLKSIZE_s]),x=o([2,I.BLKSIZE]),T=o([2,3,I.BLKSIZE_s]),B=o([4,I.CBANDS]),E=o([4,I.CBANDS]),k=o([4,3]),P=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],L=a(2),O=e.mode==b.JOINT_STEREO?4:R.channels_out;!function(e,t,n,r,a,i,l,f,c,_){for(var u=o([2,576]),h=e.internal_flags,p=h.channels_out,d=e.mode==b.JOINT_STEREO?4:p,m=0;m<p;m++){firbuf=t[m];for(var g=n+576-350-v+192,w=0;w<576;w++){var y,S;y=firbuf[g+w+10];for(var R=S=0;R<(v-1)/2-1;R+=2)y+=Q[R]*(firbuf[g+w+R]+firbuf[g+w+v-R]),S+=Q[R+1]*(firbuf[g+w+R+1]+firbuf[g+w+v-R-1]);u[m][w]=y+S}a[r][m].en.assign(h.en[m]),a[r][m].thm.assign(h.thm[m]),2<d&&(i[r][m].en.assign(h.en[m+2]),i[r][m].thm.assign(h.thm[m+2]))}for(m=0;m<d;m++){var A=s(12),M=s(12),x=[0,0,0,0],T=u[1&m],B=0,E=3==m?h.nsPsy.attackthre_s:h.nsPsy.attackthre,k=1;if(2==m)for(w=0,R=576;0<R;++w,--R){var P=u[0][w],I=u[1][w];u[0][w]=P+I,u[1][w]=P-I}for(w=0;w<3;w++)M[w]=h.nsPsy.last_en_subshort[m][w+6],A[w]=M[w]/h.nsPsy.last_en_subshort[m][w+4],x[0]+=M[w];for(w=0;w<9;w++){for(var L=B+64,O=1;B<L;B++)O<Math.abs(T[B])&&(O=Math.abs(T[B]));h.nsPsy.last_en_subshort[m][w]=M[w+3]=O,x[1+w/3]+=O,O>M[w+3-2]?O/=M[w+3-2]:O=M[w+3-2]>10*O?M[w+3-2]/(10*O):0,A[w+3]=O}for(w=0;w<3;++w){var C=M[3*w+3]+M[3*w+4]+M[3*w+5],N=1;6*M[3*w+5]<C&&(N*=.5,6*M[3*w+4]<C&&(N*=.5)),f[m][w]=N}if(e.analysis){var H=A[0];for(w=1;w<12;w++)H<A[w]&&(H=A[w]);h.pinfo.ers[r][m]=h.pinfo.ers_save[m],h.pinfo.ers_save[m]=H}for(w=0;w<12;w++)0==c[m][w/3]&&A[w]>E&&(c[m][w/3]=w%3+1);for(w=1;w<4;w++){var V=x[w-1],D=x[w];Math.max(V,D)<4e4&&V<1.7*D&&D<1.7*V&&(1==w&&c[m][0]<=c[m][w]&&(c[m][0]=0),c[m][w]=0)}c[m][0]<=h.nsPsy.lastAttacks[m]&&(c[m][0]=0),3!=h.nsPsy.lastAttacks[m]&&c[m][0]+c[m][1]+c[m][2]+c[m][3]==0||((k=0)!=c[m][1]&&0!=c[m][0]&&(c[m][1]=0),0!=c[m][2]&&0!=c[m][1]&&(c[m][2]=0),0!=c[m][3]&&0!=c[m][2]&&(c[m][3]=0)),m<2?_[m]=k:0==k&&(_[0]=_[1]=0),l[m]=h.tot_ener[m]}}(e,t,n,r,i,l,_,k,P,L),function(e,t){var n=e.internal_flags;e.short_blocks!=p.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var r=0;r<n.channels_out;r++)e.short_blocks==p.short_block_dispensed&&(t[r]=1),e.short_blocks==p.short_block_forced&&(t[r]=0)}(e,L);for(var C=0;C<O;C++)G(e,t,n,C,r,A,x,D=1&C),m=r,g=C,w=A,S=void 0,S=(d=e).internal_flags,2==d.athaa_loudapprox&&g<2&&(S.loudness_sq[m][g]=S.loudness_sq_save[g],S.loudness_sq_save[g]=y(w,S)),0!=L[D]?ee(R,A,B[C],E[C],C):J(R,C);for(L[0]+L[1]==2&&e.mode==b.JOINT_STEREO&&te(B,E,R.mld_cb_l,R.ATH.cb_l,e.ATHlower*R.ATH.adjust,e.msfix,R.npart_l),C=0;C<O;C++)0!=L[D=1&C]&&V(R,B[C],E[C],C);for(var N=0;N<3;N++){for(C=0;C<O;++C)0!=L[D=1&C]?W(R,C,N):(K(e,t,n,C,N,M,T,D),$(e,M,B[C],E[C],C,N));for(L[0]+L[1]==0&&e.mode==b.JOINT_STEREO&&te(B,E,R.mld_cb_s,R.ATH.cb_s,e.ATHlower*R.ATH.adjust,e.msfix,R.npart_s),C=0;C<O;++C)0==L[D=1&C]&&H(R,B[C],E[C],C,N)}for(C=0;C<O;C++){var D;if(0==L[D=1&C])for(var U=0;U<I.SBMAX_s;U++){var q=s(3);for(N=0;N<3;N++){var X=R.thm[C].s[U][N];if(X*=.8,2<=P[C][N]||1==P[C][N+1]){var z=0!=N?N-1:2,Z=Y(R.thm[C].s[U][z],X,.36);X=Math.min(X,Z)}else 1==P[C][N]?(z=0!=N?N-1:2,Z=Y(R.thm[C].s[U][z],X,.6*u),X=Math.min(X,Z)):(0!=N&&3==P[C][N-1]||0==N&&3==R.nsPsy.lastAttacks[C])&&(z=2!=N?N+1:0,Z=Y(R.thm[C].s[U][z],X,.6*u),X=Math.min(X,Z));X*=k[C][N],q[N]=X}for(N=0;N<3;N++)R.thm[C].s[U][N]=q[N]}}for(C=0;C<O;C++)R.nsPsy.lastAttacks[C]=P[C][2];for(function(e,t,n){for(var r=e.internal_flags,a=0;a<r.channels_out;a++){var s=I.NORM_TYPE;0!=t[a]?r.blocktype_old[a]==I.SHORT_TYPE&&(s=I.STOP_TYPE):(s=I.SHORT_TYPE,r.blocktype_old[a]==I.NORM_TYPE&&(r.blocktype_old[a]=I.START_TYPE),r.blocktype_old[a]==I.STOP_TYPE&&(r.blocktype_old[a]=I.SHORT_TYPE)),n[a]=r.blocktype_old[a],r.blocktype_old[a]=s}}(e,L,h),C=0;C<O;C++){var ne,re,ae,se;1<C?(ne=c,re=-2,ae=I.NORM_TYPE,h[0]!=I.SHORT_TYPE&&h[1]!=I.SHORT_TYPE||(ae=I.SHORT_TYPE),se=l[r][C-2]):(ne=f,re=0,ae=h[C],se=i[r][C]),ne[re+C]=ae==I.SHORT_TYPE?j(se,R.masking_lower):F(se,R.masking_lower),e.analysis&&(R.pinfo.pe[r][C]=ne[re+C])}return 0},this.psymodel_init=function(n){var r,a,i=n.internal_flags,o=!0,l=13,f=0,c=0,_=-8.25,u=-4.5,h=s(I.CBANDS),p=s(I.CBANDS),b=s(I.CBANDS),v=n.out_samplerate;switch(n.experimentalZ){default:case 0:o=!0;break;case 1:o=n.VBR!=m.vbr_mtrh&&n.VBR!=m.vbr_mt;break;case 2:o=!1;break;case 3:l=8,f=-1.75,c=-.0125,_=-8.25,u=-2.25}for(i.ms_ener_ratio_old=.25,i.blocktype_old[0]=i.blocktype_old[1]=I.NORM_TYPE,r=0;r<4;++r){for(var g=0;g<I.CBANDS;++g)i.nb_1[r][g]=1e20,i.nb_2[r][g]=1e20,i.nb_s1[r][g]=i.nb_s2[r][g]=1;for(var w=0;w<I.SBMAX_l;w++)i.en[r].l[w]=1e20,i.thm[r].l[w]=1e20;for(g=0;g<3;++g){for(w=0;w<I.SBMAX_s;w++)i.en[r].s[w][g]=1e20,i.thm[r].s[w][g]=1e20;i.nsPsy.lastAttacks[r]=0}for(g=0;g<9;g++)i.nsPsy.last_en_subshort[r][g]=10}for(i.loudness_sq_save[0]=i.loudness_sq_save[1]=0,i.npart_l=se(i.numlines_l,i.bo_l,i.bm_l,h,p,i.mld_l,i.PSY.bo_l_weight,v,I.BLKSIZE,i.scalefac_band.l,I.BLKSIZE/1152,I.SBMAX_l),r=0;r<i.npart_l;r++){var y=f;h[r]>=l&&(y=c*(h[r]-l)/(24-l)+f*(24-h[r])/(24-l)),b[r]=Math.pow(10,y/10),0<i.numlines_l[r]?i.rnumlines_l[r]=1/i.numlines_l[r]:i.rnumlines_l[r]=0}for(i.s3_ll=ie(i.s3ind,i.npart_l,h,p,b,o),g=0,r=0;r<i.npart_l;r++){k=d.MAX_VALUE;for(var S=0;S<i.numlines_l[r];S++,g++){var E=v*g/(1e3*I.BLKSIZE);P=this.ATHformula(1e3*E,n)-20,P=Math.pow(10,.1*P),(P*=i.numlines_l[r])<k&&(k=P)}i.ATH.cb_l[r]=k,6<(k=20*h[r]/10-20)&&(k=100),k<-15&&(k=-15),k-=8,i.minval_l[r]=Math.pow(10,k/10)*i.numlines_l[r]}for(i.npart_s=se(i.numlines_s,i.bo_s,i.bm_s,h,p,i.mld_s,i.PSY.bo_s_weight,v,I.BLKSIZE_s,i.scalefac_band.s,I.BLKSIZE_s/384,I.SBMAX_s),r=g=0;r<i.npart_s;r++){var k;for(y=_,h[r]>=l&&(y=u*(h[r]-l)/(24-l)+_*(24-h[r])/(24-l)),b[r]=Math.pow(10,y/10),k=d.MAX_VALUE,S=0;S<i.numlines_s[r];S++,g++){var P;E=v*g/(1e3*I.BLKSIZE_s),P=this.ATHformula(1e3*E,n)-20,P=Math.pow(10,.1*P),(P*=i.numlines_s[r])<k&&(k=P)}i.ATH.cb_s[r]=k,k=7*h[r]/12-7,12<h[r]&&(k*=1+3.1*Math.log(1+k)),h[r]<12&&(k*=1+2.3*Math.log(1-k)),k<-15&&(k=-15),k-=8,i.minval_s[r]=Math.pow(10,k/10)*i.numlines_s[r]}i.s3_ss=ie(i.s3ind_s,i.npart_s,h,p,b,o),R=Math.pow(10,(x+1)/16),A=Math.pow(10,(T+1)/16),M=Math.pow(10,B/10),e.init_fft(i),i.decay=Math.exp(-1*t/(.01*v/192)),a=3.5,0!=(2&n.exp_nspsytune)&&(a=1),0<Math.abs(n.msfix)&&(a=n.msfix),n.msfix=a;for(var L=0;L<i.npart_l;L++)i.s3ind[L][1]>i.npart_l-1&&(i.s3ind[L][1]=i.npart_l-1);var O=576*i.mode_gr/v;if(i.ATH.decay=Math.pow(10,-1.2*O),i.ATH.adjust=.01,-(i.ATH.adjustLimit=1)!=n.ATHtype){var C=n.out_samplerate/I.BLKSIZE,N=0;for(r=E=0;r<I.BLKSIZE/2;++r)E+=C,i.ATH.eql_w[r]=1/Math.pow(10,this.ATHformula(E,n)/10),N+=i.ATH.eql_w[r];for(N=1/N,r=I.BLKSIZE/2;0<=--r;)i.ATH.eql_w[r]*=N}for(L=g=0;L<i.npart_s;++L)for(r=0;r<i.numlines_s[L];++r)++g;for(L=g=0;L<i.npart_l;++L)for(r=0;r<i.numlines_l[L];++r)++g;for(r=g=0;r<i.npart_l;r++)E=v*(g+i.numlines_l[r]/2)/(1*I.BLKSIZE),i.mld_cb_l[r]=oe(E),g+=i.numlines_l[r];for(;r<I.CBANDS;++r)i.mld_cb_l[r]=1;for(r=g=0;r<i.npart_s;r++)E=v*(g+i.numlines_s[r]/2)/(1*I.BLKSIZE_s),i.mld_cb_s[r]=oe(E),g+=i.numlines_s[r];for(;r<I.CBANDS;++r)i.mld_cb_s[r]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=le(e,9);break;case 1:n=le(e,-1);break;case 2:n=le(e,0);break;case 3:n=le(e,1)+6;break;case 4:n=le(e,t.ATHcurve);break;default:n=le(e,0)}return n}}function N(){var e,t,n,r,i,o=this;N.V9=410,N.V8=420,N.V7=430,N.V6=440,N.V5=450,N.V4=460,N.V3=470,N.V2=480,N.V1=490,N.V0=500,N.R3MIX=1e3,N.STANDARD=1001,N.EXTREME=1002,N.INSANE=1003,N.STANDARD_FAST=1004,N.EXTREME_FAST=1005,N.MEDIUM=1006,N.MEDIUM_FAST=1007,N.LAME_MAXMP3BUFFER=147456;var c,_,h,d=new C;function v(){this.lowerlimit=0}function w(e,t){this.lowpass=t}this.enc=new I,this.setModules=function(a,s,o,l,f,u,p,m,b){e=a,t=s,n=o,r=l,i=f,c=u,_=m,h=b,this.enc.setModules(t,d,r,c)};var S=4294479419;function M(e){return 1<e?0:e<=0?1:Math.cos(Math.PI/2*e)}function x(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1;case 32e3:return t.version=1,2;case 22050:return t.version=0;case 24e3:return t.version=0,1;case 16e3:return t.version=0,2;case 11025:return t.version=0;case 12e3:return t.version=0,1;case 8e3:return t.version=0,2;default:return t.version=0,-1}}function T(e,t,n){n<16e3&&(t=2);for(var r=R.bitrate_table[t][1],a=2;a<=14;a++)0<R.bitrate_table[t][a]&&Math.abs(R.bitrate_table[t][a]-e)<Math.abs(r-e)&&(r=R.bitrate_table[t][a]);return r}function B(e,t,n){n<16e3&&(t=2);for(var r=0;r<=14;r++)if(0<R.bitrate_table[t][r]&&R.bitrate_table[t][r]==e)return r;return-1}function k(e,t){var n=[new w(8,2e3),new w(16,3700),new w(24,3900),new w(32,5500),new w(40,7e3),new w(48,7500),new w(56,1e4),new w(64,11e3),new w(80,13500),new w(96,15100),new w(112,15600),new w(128,17e3),new w(160,17500),new w(192,18600),new w(224,19400),new w(256,19700),new w(320,20500)],r=o.nearestBitrateFullIndex(t);e.lowerlimit=n[r].lowpass}function P(e){var t=I.BLKSIZE+e.framesize-I.FFTOFFSET;return Math.max(t,512+e.framesize-32)}function L(e,t,n,r,a,s){var i=o.enc.lame_encode_mp3_frame(e,t,n,r,a,s);return e.frameNum++,i}function H(){this.n_in=0,this.n_out=0}function V(){this.num_used=0}function D(e,t,n){var r=Math.PI*t;(e/=n)<0&&(e=0),1<e&&(e=1);var a=e-.5,s=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(a)<1e-9?r/Math.PI:s*Math.sin(n*r*a)/(Math.PI*n*a)}function Y(e,t,n,r,a,i,o,l,f){var c,_,u=e.internal_flags,h=0,p=e.out_samplerate/function e(t,n){return 0!=n?e(n,t%n):t}(e.out_samplerate,e.in_samplerate);O.BPC<p&&(p=O.BPC);var d=Math.abs(u.resample_ratio-Math.floor(.5+u.resample_ratio))<1e-4?1:0,m=1/u.resample_ratio;1<m&&(m=1);var b=31;0==b%2&&--b;var v=(b+=d)+1;if(0==u.fill_buffer_resample_init){for(u.inbuf_old[0]=s(v),u.inbuf_old[1]=s(v),c=0;c<=2*p;++c)u.blackfilt[c]=s(v);for(u.itime[0]=0,h=u.itime[1]=0;h<=2*p;h++){var g=0,w=(h-p)/(2*p);for(c=0;c<=b;c++)g+=u.blackfilt[h][c]=D(c-w,m,b);for(c=0;c<=b;c++)u.blackfilt[h][c]/=g}u.fill_buffer_resample_init=1}var y=u.inbuf_old[f];for(_=0;_<r;_++){var S,R;if(S=_*u.resample_ratio,o<=b+(h=0|Math.floor(S-u.itime[f]))-b/2)break;w=S-u.itime[f]-(h+b%2*.5),R=0|Math.floor(2*w*p+p+.5);var A=0;for(c=0;c<=b;++c){var M=c+h-b/2;A+=(M<0?y[v+M]:a[i+M])*u.blackfilt[R][c]}t[n+_]=A}if(l.num_used=Math.min(o,b+h-b/2),u.itime[f]+=l.num_used-_*u.resample_ratio,l.num_used>=v)for(c=0;c<v;c++)y[c]=a[i+l.num_used+c-v];else{var x=v-l.num_used;for(c=0;c<x;++c)y[c]=y[c+l.num_used];for(h=0;c<v;++c,++h)y[c]=a[i+h]}return _}function U(e,t,n,r,a,s){var i=e.internal_flags;if(i.resample_ratio<.9999||1.0001<i.resample_ratio)for(var o=0;o<i.channels_out;o++){var l=new V;s.n_out=Y(e,t[o],i.mf_size,e.framesize,n[o],r,a,l,o),s.n_in=l.num_used}else{s.n_out=Math.min(e.framesize,a),s.n_in=s.n_out;for(var f=0;f<s.n_out;++f)t[0][i.mf_size+f]=n[0][r+f],2==i.channels_out&&(t[1][i.mf_size+f]=n[1][r+f])}}this.lame_init=function(){var e,t,n=new function(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=b.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null};return 0!=((e=n).class_id=S,t=e.internal_flags=new O,e.mode=b.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=m.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=I.ENCDELAY+I.POSTDELAY,e.encoder_padding=0,t.mf_size=I.ENCDELAY-I.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0,0)?null:(n.lame_allocated_gfp=1,n)},this.nearestBitrateFullIndex=function(e){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,r=0,a=0,s=0;s=t[16],r=t[a=16],n=16;for(var i=0;i<16;i++)if(Math.max(e,t[i+1])!=e){s=t[i+1],a=i+1,r=t[i],n=i;break}return e-r<s-e?n:a},this.lame_init_params=function(o){var f,w,P,L=o.internal_flags;if(L.Class_ID=0,null==L.ATH&&(L.ATH=new function(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=s(I.SBMAX_l),this.s=s(I.SBMAX_s),this.psfb21=s(I.PSFB21),this.psfb12=s(I.PSFB12),this.cb_l=s(I.CBANDS),this.cb_s=s(I.CBANDS),this.eql_w=s(I.BLKSIZE/2)}),null==L.PSY&&(L.PSY=new function(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=s(I.SBMAX_l),this.bo_s_weight=s(I.SBMAX_s)}),null==L.rgdata&&(L.rgdata=new function(){}),L.channels_in=o.num_channels,1==L.channels_in&&(o.mode=b.MONO),L.channels_out=o.mode==b.MONO?1:2,L.mode_ext=I.MPG_MD_MS_LR,o.mode==b.MONO&&(o.force_ms=!1),o.VBR==m.vbr_off&&128!=o.VBR_mean_bitrate_kbps&&0==o.brate&&(o.brate=o.VBR_mean_bitrate_kbps),o.VBR==m.vbr_off||o.VBR==m.vbr_mtrh||o.VBR==m.vbr_mt||(o.free_format=!1),o.VBR==m.vbr_off&&0==o.brate&&y.EQ(o.compression_ratio,0)&&(o.compression_ratio=11.025),o.VBR==m.vbr_off&&0<o.compression_ratio&&(0==o.out_samplerate&&(o.out_samplerate=map2MP3Frequency(int(.97*o.in_samplerate))),o.brate=0|16*o.out_samplerate*L.channels_out/(1e3*o.compression_ratio),L.samplerate_index=x(o.out_samplerate,o),o.free_format||(o.brate=T(o.brate,o.version,o.out_samplerate))),0!=o.out_samplerate&&(o.out_samplerate<16e3?(o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,8),o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,64)):o.out_samplerate<32e3?(o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,8),o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,160)):(o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,32),o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,320))),0==o.lowpassfreq){var O=16e3;switch(o.VBR){case m.vbr_off:k(N=new v,o.brate),O=N.lowerlimit;break;case m.vbr_abr:var N;k(N=new v,o.VBR_mean_bitrate_kbps),O=N.lowerlimit;break;case m.vbr_rh:var H=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=o.VBR_q&&o.VBR_q<=9){var V=H[o.VBR_q],D=H[o.VBR_q+1],Y=o.VBR_q_frac;O=linear_int(V,D,Y)}else O=19500;break;default:H=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],0<=o.VBR_q&&o.VBR_q<=9?(V=H[o.VBR_q],D=H[o.VBR_q+1],Y=o.VBR_q_frac,O=linear_int(V,D,Y)):O=19500}o.mode!=b.MONO||o.VBR!=m.vbr_off&&o.VBR!=m.vbr_abr||(O*=1.5),o.lowpassfreq=0|O}if(0==o.out_samplerate&&(2*o.lowpassfreq>o.in_samplerate&&(o.lowpassfreq=o.in_samplerate/2),o.out_samplerate=(f=0|o.lowpassfreq,w=o.in_samplerate,P=44100,48e3<=w?P=48e3:44100<=w?P=44100:32e3<=w?P=32e3:24e3<=w?P=24e3:22050<=w?P=22050:16e3<=w?P=16e3:12e3<=w?P=12e3:11025<=w?P=11025:8e3<=w&&(P=8e3),-1==f?P:(f<=15960&&(P=44100),f<=15250&&(P=32e3),f<=11220&&(P=24e3),f<=9970&&(P=22050),f<=7230&&(P=16e3),f<=5420&&(P=12e3),f<=4510&&(P=11025),f<=3970&&(P=8e3),w<P?44100<w?48e3:32e3<w?44100:24e3<w?32e3:22050<w?24e3:16e3<w?22050:12e3<w?16e3:11025<w?12e3:8e3<w?11025:8e3:P))),o.lowpassfreq=Math.min(20500,o.lowpassfreq),o.lowpassfreq=Math.min(o.out_samplerate/2,o.lowpassfreq),o.VBR==m.vbr_off&&(o.compression_ratio=16*o.out_samplerate*L.channels_out/(1e3*o.brate)),o.VBR==m.vbr_abr&&(o.compression_ratio=16*o.out_samplerate*L.channels_out/(1e3*o.VBR_mean_bitrate_kbps)),o.bWriteVbrTag||(o.findReplayGain=!1,o.decode_on_the_fly=!1,L.findPeakSample=!1),L.findReplayGain=o.findReplayGain,L.decode_on_the_fly=o.decode_on_the_fly,L.decode_on_the_fly&&(L.findPeakSample=!0),L.findReplayGain&&e.InitGainAnalysis(L.rgdata,o.out_samplerate)==g.INIT_GAIN_ANALYSIS_ERROR)return o.internal_flags=null,-6;switch(L.decode_on_the_fly&&!o.decode_only&&(null!=L.hip&&h.hip_decode_exit(L.hip),L.hip=h.hip_decode_init()),L.mode_gr=o.out_samplerate<=24e3?1:2,o.framesize=576*L.mode_gr,o.encoder_delay=I.ENCDELAY,L.resample_ratio=o.in_samplerate/o.out_samplerate,o.VBR){case m.vbr_mt:case m.vbr_rh:case m.vbr_mtrh:o.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][o.VBR_q];break;case m.vbr_abr:o.compression_ratio=16*o.out_samplerate*L.channels_out/(1e3*o.VBR_mean_bitrate_kbps);break;default:o.compression_ratio=16*o.out_samplerate*L.channels_out/(1e3*o.brate)}if(o.mode==b.NOT_SET&&(o.mode=b.JOINT_STEREO),0<o.highpassfreq?(L.highpass1=2*o.highpassfreq,0<=o.highpasswidth?L.highpass2=2*(o.highpassfreq+o.highpasswidth):L.highpass2=2*o.highpassfreq,L.highpass1/=o.out_samplerate,L.highpass2/=o.out_samplerate):(L.highpass1=0,L.highpass2=0),0<o.lowpassfreq?(L.lowpass2=2*o.lowpassfreq,0<=o.lowpasswidth?(L.lowpass1=2*(o.lowpassfreq-o.lowpasswidth),L.lowpass1<0&&(L.lowpass1=0)):L.lowpass1=2*o.lowpassfreq,L.lowpass1/=o.out_samplerate,L.lowpass2/=o.out_samplerate):(L.lowpass1=0,L.lowpass2=0),function(e){var t=e.internal_flags,n=32,r=-1;if(0<t.lowpass1){for(var a=999,s=0;s<=31;s++)(f=s/31)>=t.lowpass2&&(n=Math.min(n,s)),t.lowpass1<f&&f<t.lowpass2&&(a=Math.min(a,s));t.lowpass1=999==a?(n-.75)/31:(a-.75)/31,t.lowpass2=n/31}if(0<t.highpass2&&t.highpass2<.75/31*.9&&(t.highpass1=0,t.highpass2=0,u.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),0<t.highpass2){var i=-1;for(s=0;s<=31;s++)(f=s/31)<=t.highpass1&&(r=Math.max(r,s)),t.highpass1<f&&f<t.highpass2&&(i=Math.max(i,s));t.highpass1=r/31,t.highpass2=-1==i?(r+.75)/31:(i+.75)/31}for(s=0;s<32;s++){var o,l,f=s/31;o=t.highpass2>t.highpass1?M((t.highpass2-f)/(t.highpass2-t.highpass1+1e-20)):1,l=t.lowpass2>t.lowpass1?M((f-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):1,t.amp_filter[s]=o*l}}(o),L.samplerate_index=x(o.out_samplerate,o),L.samplerate_index<0)return o.internal_flags=null,-1;if(o.VBR==m.vbr_off){if(o.free_format)L.bitrate_index=0;else if(o.brate=T(o.brate,o.version,o.out_samplerate),L.bitrate_index=B(o.brate,o.version,o.out_samplerate),L.bitrate_index<=0)return o.internal_flags=null,-1}else L.bitrate_index=1;o.analysis&&(o.bWriteVbrTag=!1),null!=L.pinfo&&(o.bWriteVbrTag=!1),t.init_bit_stream_w(L);for(var U,j,q,F=L.samplerate_index+3*o.version+6*(o.out_samplerate<16e3?1:0),X=0;X<I.SBMAX_l+1;X++)L.scalefac_band.l[X]=r.sfBandIndex[F].l[X];for(X=0;X<I.PSFB21+1;X++){var z=(L.scalefac_band.l[22]-L.scalefac_band.l[21])/I.PSFB21,Z=L.scalefac_band.l[21]+X*z;L.scalefac_band.psfb21[X]=Z}for(L.scalefac_band.psfb21[I.PSFB21]=576,X=0;X<I.SBMAX_s+1;X++)L.scalefac_band.s[X]=r.sfBandIndex[F].s[X];for(X=0;X<I.PSFB12+1;X++)z=(L.scalefac_band.s[13]-L.scalefac_band.s[12])/I.PSFB12,Z=L.scalefac_band.s[12]+X*z,L.scalefac_band.psfb12[X]=Z;for(L.scalefac_band.psfb12[I.PSFB12]=192,1==o.version?L.sideinfo_len=1==L.channels_out?21:36:L.sideinfo_len=1==L.channels_out?13:21,o.error_protection&&(L.sideinfo_len+=2),j=(U=o).internal_flags,U.frameNum=0,U.write_id3tag_automatic&&_.id3tag_write_v2(U),j.bitrate_stereoMode_Hist=l([16,5]),j.bitrate_blockType_Hist=l([16,6]),j.PeakSample=0,U.bWriteVbrTag&&c.InitVbrTag(U),L.Class_ID=S,q=0;q<19;q++)L.nsPsy.pefirbuf[q]=700*L.mode_gr*L.channels_out;switch(-1==o.ATHtype&&(o.ATHtype=4),o.VBR){case m.vbr_mt:o.VBR=m.vbr_mtrh;case m.vbr_mtrh:null==o.useTemporal&&(o.useTemporal=!1),n.apply_preset(o,500-10*o.VBR_q,0),o.quality<0&&(o.quality=LAME_DEFAULT_QUALITY),o.quality<5&&(o.quality=0),5<o.quality&&(o.quality=5),L.PSY.mask_adjust=o.maskingadjust,L.PSY.mask_adjust_short=o.maskingadjust_short,o.experimentalY?L.sfb21_extra=!1:L.sfb21_extra=44e3<o.out_samplerate,L.iteration_loop=new VBRNewIterationLoop(i);break;case m.vbr_rh:n.apply_preset(o,500-10*o.VBR_q,0),L.PSY.mask_adjust=o.maskingadjust,L.PSY.mask_adjust_short=o.maskingadjust_short,o.experimentalY?L.sfb21_extra=!1:L.sfb21_extra=44e3<o.out_samplerate,6<o.quality&&(o.quality=6),o.quality<0&&(o.quality=LAME_DEFAULT_QUALITY),L.iteration_loop=new VBROldIterationLoop(i);break;default:var G;L.sfb21_extra=!1,o.quality<0&&(o.quality=LAME_DEFAULT_QUALITY),(G=o.VBR)==m.vbr_off&&(o.VBR_mean_bitrate_kbps=o.brate),n.apply_preset(o,o.VBR_mean_bitrate_kbps,0),o.VBR=G,L.PSY.mask_adjust=o.maskingadjust,L.PSY.mask_adjust_short=o.maskingadjust_short,L.iteration_loop=G==m.vbr_off?new function(e){var t=e;this.quantize=t,this.iteration_loop=function(e,t,n,r){var i,o=e.internal_flags,l=s(E.SFBMAX),f=s(576),c=a(2),_=0,u=o.l3_side,h=new A(_);this.quantize.rv.ResvFrameBegin(e,h),_=h.bits;for(var p=0;p<o.mode_gr;p++){i=this.quantize.qupvt.on_pe(e,t,c,_,p,p),o.mode_ext==I.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,p),this.quantize.qupvt.reduce_side(c,n[p],_,i));for(var d=0;d<o.channels_out;d++){var m,b,v=u.tt[p][d];v.block_type!=I.SHORT_TYPE?(m=0,b=o.PSY.mask_adjust-m):(m=0,b=o.PSY.mask_adjust_short-m),o.masking_lower=Math.pow(10,.1*b),this.quantize.init_outer_loop(o,v),this.quantize.init_xrpow(o,v,f)&&(this.quantize.qupvt.calc_xmin(e,r[p][d],v,l),this.quantize.outer_loop(e,v,l,f,d,c[d])),this.quantize.iteration_finish_one(o,p,d)}}this.quantize.rv.ResvFrameEnd(o,_)}}(i):new ABRIterationLoop(i)}if(o.VBR!=m.vbr_off){if(L.VBR_min_bitrate=1,L.VBR_max_bitrate=14,o.out_samplerate<16e3&&(L.VBR_max_bitrate=8),0!=o.VBR_min_bitrate_kbps&&(o.VBR_min_bitrate_kbps=T(o.VBR_min_bitrate_kbps,o.version,o.out_samplerate),L.VBR_min_bitrate=B(o.VBR_min_bitrate_kbps,o.version,o.out_samplerate),L.VBR_min_bitrate<0))return-1;if(0!=o.VBR_max_bitrate_kbps&&(o.VBR_max_bitrate_kbps=T(o.VBR_max_bitrate_kbps,o.version,o.out_samplerate),L.VBR_max_bitrate=B(o.VBR_max_bitrate_kbps,o.version,o.out_samplerate),L.VBR_max_bitrate<0))return-1;o.VBR_min_bitrate_kbps=R.bitrate_table[o.version][L.VBR_min_bitrate],o.VBR_max_bitrate_kbps=R.bitrate_table[o.version][L.VBR_max_bitrate],o.VBR_mean_bitrate_kbps=Math.min(R.bitrate_table[o.version][L.VBR_max_bitrate],o.VBR_mean_bitrate_kbps),o.VBR_mean_bitrate_kbps=Math.max(R.bitrate_table[o.version][L.VBR_min_bitrate],o.VBR_mean_bitrate_kbps)}return o.tune&&(L.PSY.mask_adjust+=o.tune_value_a,L.PSY.mask_adjust_short+=o.tune_value_a),function(e){var t=e.internal_flags;switch(e.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,-(t.noise_shaping_stop=1)==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}(o),o.athaa_type<0?L.ATH.useAdjust=3:L.ATH.useAdjust=o.athaa_type,L.ATH.aaSensitivityP=Math.pow(10,o.athaa_sensitivity/-10),null==o.short_blocks&&(o.short_blocks=p.short_block_allowed),o.short_blocks!=p.short_block_allowed||o.mode!=b.JOINT_STEREO&&o.mode!=b.STEREO||(o.short_blocks=p.short_block_coupled),o.quant_comp<0&&(o.quant_comp=1),o.quant_comp_short<0&&(o.quant_comp_short=0),o.msfix<0&&(o.msfix=0),o.exp_nspsytune=1|o.exp_nspsytune,o.internal_flags.nsPsy.attackthre<0&&(o.internal_flags.nsPsy.attackthre=C.NSATTACKTHRE),o.internal_flags.nsPsy.attackthre_s<0&&(o.internal_flags.nsPsy.attackthre_s=C.NSATTACKTHRE_S),o.scale<0&&(o.scale=1),o.ATHtype<0&&(o.ATHtype=4),o.ATHcurve<0&&(o.ATHcurve=4),o.athaa_loudapprox<0&&(o.athaa_loudapprox=2),o.interChRatio<0&&(o.interChRatio=0),null==o.useTemporal&&(o.useTemporal=!0),L.slot_lag=L.frac_SpF=0,o.VBR==m.vbr_off&&(L.slot_lag=L.frac_SpF=72e3*(o.version+1)*o.brate%o.out_samplerate|0),r.iteration_init(o),d.psymodel_init(o),0},this.lame_encode_flush=function(e,n,r,a){var s,i,o,l,c=e.internal_flags,u=f([2,1152]),h=0,p=c.mf_samples_to_encode-I.POSTDELAY,d=P(e);if(c.mf_samples_to_encode<1)return 0;for(s=0,e.in_samplerate!=e.out_samplerate&&(p+=16*e.out_samplerate/e.in_samplerate),(o=e.framesize-p%e.framesize)<576&&(o+=e.framesize),l=(p+(e.encoder_padding=o))/e.framesize;0<l&&0<=h;){var m=d-c.mf_size,b=e.frameNum;m*=e.in_samplerate,1152<(m/=e.out_samplerate)&&(m=1152),m<1&&(m=1),i=a-s,0==a&&(i=0),r+=h=this.lame_encode_buffer(e,u[0],u[1],m,n,r,i),s+=h,l-=b!=e.frameNum?1:0}if(h<(c.mf_samples_to_encode=0))return h;if(i=a-s,0==a&&(i=0),t.flush_bitstream(e),(h=t.copy_buffer(c,n,r,i,1))<0)return h;if(r+=h,i=a-(s+=h),0==a&&(i=0),e.write_id3tag_automatic){if(_.id3tag_write_v1(e),(h=t.copy_buffer(c,n,r,i,0))<0)return h;s+=h}return s},this.lame_encode_buffer=function(n,r,a,i,o,l,f){var c,_,u=n.internal_flags,h=[null,null];if(u.Class_ID!=S)return-3;if(0==i)return 0;_=i,(null==(c=u).in_buffer_0||c.in_buffer_nsamples<_)&&(c.in_buffer_0=s(_),c.in_buffer_1=s(_),c.in_buffer_nsamples=_),h[0]=u.in_buffer_0,h[1]=u.in_buffer_1;for(var p=0;p<i;p++)h[0][p]=r[p],1<u.channels_in&&(h[1][p]=a[p]);return function(n,r,a,s,i,o,l){var f,c,_,u,h,p=n.internal_flags,d=0,m=[null,null],b=[null,null];if(p.Class_ID!=S)return-3;if(0==s)return 0;if((h=t.copy_buffer(p,i,o,l,0))<0)return h;if(o+=h,d+=h,b[0]=r,b[1]=a,y.NEQ(n.scale,0)&&y.NEQ(n.scale,1))for(c=0;c<s;++c)b[0][c]*=n.scale,2==p.channels_out&&(b[1][c]*=n.scale);if(y.NEQ(n.scale_left,0)&&y.NEQ(n.scale_left,1))for(c=0;c<s;++c)b[0][c]*=n.scale_left;if(y.NEQ(n.scale_right,0)&&y.NEQ(n.scale_right,1))for(c=0;c<s;++c)b[1][c]*=n.scale_right;if(2==n.num_channels&&1==p.channels_out)for(c=0;c<s;++c)b[0][c]=.5*(b[0][c]+b[1][c]),b[1][c]=0;u=P(n),m[0]=p.mfbuf[0],m[1]=p.mfbuf[1];for(var v=0;0<s;){var w=[null,null],R=0,A=0;w[0]=b[0],w[1]=b[1];var M=new H;if(U(n,m,w,v,s,M),R=M.n_in,A=M.n_out,p.findReplayGain&&!p.decode_on_the_fly&&e.AnalyzeSamples(p.rgdata,m[0],p.mf_size,m[1],p.mf_size,A,p.channels_out)==g.GAIN_ANALYSIS_ERROR)return-6;if(s-=R,v+=R,p.channels_out,p.mf_size+=A,p.mf_samples_to_encode<1&&(p.mf_samples_to_encode=I.ENCDELAY+I.POSTDELAY),p.mf_samples_to_encode+=A,p.mf_size>=u){var x=l-d;if(0==l&&(x=0),(f=L(n,m[0],m[1],i,o,x))<0)return f;for(o+=f,d+=f,p.mf_size-=n.framesize,p.mf_samples_to_encode-=n.framesize,_=0;_<p.channels_out;_++)for(c=0;c<p.mf_size;c++)m[_][c]=m[_][c+n.framesize]}}return d}(n,h[0],h[1],i,o,l,f)}}E.SFBMAX=3*I.SBMAX_s,I.ENCDELAY=576,I.POSTDELAY=1152,I.FFTOFFSET=224+(I.MDCTDELAY=48),I.DECDELAY=528,I.SBLIMIT=32,I.CBANDS=64,I.SBPSY_l=21,I.SBPSY_s=12,I.SBMAX_l=22,I.SBMAX_s=13,I.PSFB21=6,I.PSFB12=6,I.HBLKSIZE=(I.BLKSIZE=1024)/2+1,I.HBLKSIZE_s=(I.BLKSIZE_s=256)/2+1,I.NORM_TYPE=0,I.START_TYPE=1,I.SHORT_TYPE=2,I.STOP_TYPE=3,I.MPG_MD_LR_LR=0,I.MPG_MD_LR_I=1,I.MPG_MD_MS_LR=2,I.MPG_MD_MS_I=3,I.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],O.MFSIZE=3456+I.ENCDELAY-I.MDCTDELAY,O.MAX_HEADER_BUF=256,O.MAX_BITS_PER_CHANNEL=4095,O.MAX_BITS_PER_GRANULE=7680,O.BPC=320,E.SFBMAX=3*I.SBMAX_s,e.Mp3Encoder=function(e,t,r){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,r=128);var a=new N,s=new function(){this.setModules=function(e,t){}},i=new g,o=new y,l=new function(){function e(e,t,n,r,a,s,i,o,l,f,c,_,u,h,p){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=r,this.st_lrm=a,this.st_s=s,this.masking_adj=i,this.masking_adj_short=o,this.ath_lower=l,this.ath_curve=f,this.ath_sensitivity=c,this.interch=_,this.safejoint=u,this.sfb21mod=h,this.msfix=p}function t(e,t,n,r,a,s,i,o,l,f,c,_,u,h){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=r,this.nsmsfix=a,this.st_lrm=s,this.st_s=i,this.nsbass=o,this.scale=l,this.masking_adj=f,this.ath_lower=c,this.ath_curve=_,this.interch=u,this.sfscale=h}var n;this.setModules=function(e){n=e};var r=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],a=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function s(e,t,n){var s,i,o=e.VBR==m.vbr_rh?r:a,l=e.VBR_q_frac,f=o[t],c=o[t+1],_=f;f.st_lrm=f.st_lrm+l*(c.st_lrm-f.st_lrm),f.st_s=f.st_s+l*(c.st_s-f.st_s),f.masking_adj=f.masking_adj+l*(c.masking_adj-f.masking_adj),f.masking_adj_short=f.masking_adj_short+l*(c.masking_adj_short-f.masking_adj_short),f.ath_lower=f.ath_lower+l*(c.ath_lower-f.ath_lower),f.ath_curve=f.ath_curve+l*(c.ath_curve-f.ath_curve),f.ath_sensitivity=f.ath_sensitivity+l*(c.ath_sensitivity-f.ath_sensitivity),f.interch=f.interch+l*(c.interch-f.interch),f.msfix=f.msfix+l*(c.msfix-f.msfix),s=e,(i=_.vbr_q)<0&&(i=0),9<i&&(i=9),s.VBR_q=i,(s.VBR_q_frac=0)!=n?e.quant_comp=_.quant_comp:0<Math.abs(e.quant_comp- -1)||(e.quant_comp=_.quant_comp),0!=n?e.quant_comp_short=_.quant_comp_s:0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=_.quant_comp_s),0!=_.expY&&(e.experimentalY=0!=_.expY),0!=n?e.internal_flags.nsPsy.attackthre=_.st_lrm:0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=_.st_lrm),0!=n?e.internal_flags.nsPsy.attackthre_s=_.st_s:0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=_.st_s),0!=n?e.maskingadjust=_.masking_adj:0<Math.abs(e.maskingadjust-0)||(e.maskingadjust=_.masking_adj),0!=n?e.maskingadjust_short=_.masking_adj_short:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=_.masking_adj_short),0!=n?e.ATHlower=-_.ath_lower/10:0<Math.abs(10*-e.ATHlower-0)||(e.ATHlower=-_.ath_lower/10),0!=n?e.ATHcurve=_.ath_curve:0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=_.ath_curve),0!=n?e.athaa_sensitivity=_.ath_sensitivity:0<Math.abs(e.athaa_sensitivity- -1)||(e.athaa_sensitivity=_.ath_sensitivity),0<_.interch&&(0!=n?e.interChRatio=_.interch:0<Math.abs(e.interChRatio- -1)||(e.interChRatio=_.interch)),0<_.safejoint&&(e.exp_nspsytune=e.exp_nspsytune|_.safejoint),0<_.sfb21mod&&(e.exp_nspsytune=e.exp_nspsytune|_.sfb21mod<<20),0!=n?e.msfix=_.msfix:0<Math.abs(e.msfix- -1)||(e.msfix=_.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=l)}var i=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function o(e,t,r){var a=t,s=n.nearestBitrateFullIndex(t);if(e.VBR=m.vbr_abr,e.VBR_mean_bitrate_kbps=a,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,320<e.VBR_mean_bitrate_kbps&&(e.disable_reservoir=!0),0<i[s].safejoint&&(e.exp_nspsytune=2|e.exp_nspsytune),0<i[s].sfscale&&(e.internal_flags.noise_shaping=2),0<Math.abs(i[s].nsbass)){var o=int(4*i[s].nsbass);o<0&&(o+=64),e.exp_nspsytune=e.exp_nspsytune|o<<2}return 0!=r?e.quant_comp=i[s].quant_comp:0<Math.abs(e.quant_comp- -1)||(e.quant_comp=i[s].quant_comp),0!=r?e.quant_comp_short=i[s].quant_comp_s:0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=i[s].quant_comp_s),0!=r?e.msfix=i[s].nsmsfix:0<Math.abs(e.msfix- -1)||(e.msfix=i[s].nsmsfix),0!=r?e.internal_flags.nsPsy.attackthre=i[s].st_lrm:0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=i[s].st_lrm),0!=r?e.internal_flags.nsPsy.attackthre_s=i[s].st_s:0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=i[s].st_s),0!=r?e.scale=i[s].scale:0<Math.abs(e.scale- -1)||(e.scale=i[s].scale),0!=r?e.maskingadjust=i[s].masking_adj:0<Math.abs(e.maskingadjust-0)||(e.maskingadjust=i[s].masking_adj),0<i[s].masking_adj?0!=r?e.maskingadjust_short=.9*i[s].masking_adj:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=.9*i[s].masking_adj):0!=r?e.maskingadjust_short=1.1*i[s].masking_adj:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=1.1*i[s].masking_adj),0!=r?e.ATHlower=-i[s].ath_lower/10:0<Math.abs(10*-e.ATHlower-0)||(e.ATHlower=-i[s].ath_lower/10),0!=r?e.ATHcurve=i[s].ath_curve:0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=i[s].ath_curve),0!=r?e.interChRatio=i[s].interch:0<Math.abs(e.interChRatio- -1)||(e.interChRatio=i[s].interch),t}this.apply_preset=function(e,t,n){switch(t){case N.R3MIX:t=N.V3,e.VBR=m.vbr_mtrh;break;case N.MEDIUM:t=N.V4,e.VBR=m.vbr_rh;break;case N.MEDIUM_FAST:t=N.V4,e.VBR=m.vbr_mtrh;break;case N.STANDARD:t=N.V2,e.VBR=m.vbr_rh;break;case N.STANDARD_FAST:t=N.V2,e.VBR=m.vbr_mtrh;break;case N.EXTREME:t=N.V0,e.VBR=m.vbr_rh;break;case N.EXTREME_FAST:t=N.V0,e.VBR=m.vbr_mtrh;break;case N.INSANE:return t=320,e.preset=t,o(e,t,n),e.VBR=m.vbr_off,t}switch(e.preset=t){case N.V9:return s(e,9,n),t;case N.V8:return s(e,8,n),t;case N.V7:return s(e,7,n),t;case N.V6:return s(e,6,n),t;case N.V5:return s(e,5,n),t;case N.V4:return s(e,4,n),t;case N.V3:return s(e,3,n),t;case N.V2:return s(e,2,n),t;case N.V1:return s(e,1,n),t;case N.V0:return s(e,0,n),t}return 8<=t&&t<=320?o(e,t,n):(e.preset=0,t)}},f=new T,c=new k,_=new w,u=new function(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}},h=new function(){this.setModules=function(e,t){}},p=new function(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var r,a=t.internal_flags,s=a.l3_side,i=e.getframebits(t);n.bits=(i-8*a.sideinfo_len)/a.mode_gr;var o=2048*a.mode_gr-8;320<t.brate?r=8*int(1e3*t.brate/(t.out_samplerate/1152)/8+.5):(r=11520,t.strict_ISO&&(r=8*int(32e4/(t.out_samplerate/1152)/8+.5))),a.ResvMax=r-i,a.ResvMax>o&&(a.ResvMax=o),(a.ResvMax<0||t.disable_reservoir)&&(a.ResvMax=0);var l=n.bits*a.mode_gr+Math.min(a.ResvSize,a.ResvMax);return r<l&&(l=r),s.resvDrain_pre=0,null!=a.pinfo&&(a.pinfo.mean_bits=n.bits/2,a.pinfo.resvsize=a.ResvSize),l},this.ResvMaxBits=function(e,t,n,r){var a,s=e.internal_flags,i=s.ResvSize,o=s.ResvMax;0!=r&&(i+=t),0!=(1&s.substep_shaping)&&(o*=.9),n.bits=t,9*o<10*i?(a=i-9*o/10,n.bits+=a,s.substep_shaping|=128):(a=0,s.substep_shaping&=127,e.disable_reservoir||0!=(1&s.substep_shaping)||(n.bits-=.1*t));var l=i<6*s.ResvMax/10?i:6*s.ResvMax/10;return(l-=a)<0&&(l=0),l},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n,r=e.l3_side;e.ResvSize+=t*e.mode_gr;var a=0;r.resvDrain_post=0,(r.resvDrain_pre=0)!=(n=e.ResvSize%8)&&(a+=n),0<(n=e.ResvSize-a-e.ResvMax)&&(a+=n);var s=Math.min(8*r.main_data_begin,a)/8;r.resvDrain_pre+=8*s,a-=8*s,e.ResvSize-=8*s,r.main_data_begin-=s,r.resvDrain_post+=a,e.ResvSize-=a}},d=new v,S=new function(){this.setModules=function(e,t,n){}},R=new function(){};a.setModules(i,o,l,f,c,_,u,h,R),o.setModules(i,R,u,_),h.setModules(o,u),l.setModules(a),c.setModules(o,p,f,d),f.setModules(d,p,a.enc.psy),p.setModules(o),d.setModules(f),_.setModules(a,o,u),s.setModules(S,R),S.setModules(u,h,l);var A=a.lame_init();A.num_channels=e,A.in_samplerate=t,A.out_samplerate=t,A.brate=r,A.mode=b.STEREO,A.quality=3,A.bWriteVbrTag=!1,A.disable_reservoir=!0,A.write_id3tag_automatic=!1,a.lame_init_params(A);var M=1152,x=0|1.25*M+7200,B=n(x);this.encodeBuffer=function(t,r){1==e&&(r=t),t.length>M&&(M=t.length,B=n(x=0|1.25*M+7200));var s=a.lame_encode_buffer(A,t,r,t.length,B,0,x);return new Int8Array(B.subarray(0,s))},this.flush=function(){var e=a.lame_encode_flush(A,B,0,x);return new Int8Array(B.subarray(0,e))}}}e(),Recorder.lamejs=e}()},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"14c3":function(e,t,n){var r=n("c6b6"),a=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var s=n.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"18a0":function(e,t){!function(t,n){e.exports=n(t)}(window,(function(e,t){if(!e.jWeixin){var n,r={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},a=function(){var e={};for(var t in r)e[r[t]]=t;return e}(),s=e.document,i=s.title,o=navigator.userAgent.toLowerCase(),l=navigator.platform.toLowerCase(),f=!(!l.match("mac")&&!l.match("win")),c=-1!=o.indexOf("wxdebugger"),_=-1!=o.indexOf("micromessenger"),u=-1!=o.indexOf("android"),h=-1!=o.indexOf("iphone")||-1!=o.indexOf("ipad"),p=(n=o.match(/micromessenger\/(\d+\.\d+\.\d+)/)||o.match(/micromessenger\/(\d+\.\d+)/))?n[1]:"",d={initStartTime:I(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},m={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:h?1:u?2:-1,clientVersion:p,url:encodeURIComponent(location.href)},b={},v={_completes:[]},g={state:0,data:{}};L((function(){d.initEndTime=I()}));var w=!1,y=[],S={config:function(t){P("config",b=t);var n=!1!==b.check;L((function(){if(n)M(r.config,{verifyJsApiList:k(b.jsApiList),verifyOpenTagList:k(b.openTagList)},function(){v._complete=function(e){d.preVerifyEndTime=I(),g.state=1,g.data=e},v.success=function(e){m.isPreVerifyOk=0},v.fail=function(e){v._fail?v._fail(e):g.state=-1};var e=v._completes;return e.push((function(){!function(){if(!(f||c||b.debug||p<"6.0.2"||m.systemType<0)){var e=new Image;m.appId=b.appId,m.initTime=d.initEndTime-d.initStartTime,m.preVerifyTime=d.preVerifyEndTime-d.preVerifyStartTime,S.getNetworkType({isInnerInvoke:!0,success:function(t){m.networkType=t.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+m.version+"&o="+m.isPreVerifyOk+"&s="+m.systemType+"&c="+m.clientVersion+"&a="+m.appId+"&n="+m.networkType+"&i="+m.initTime+"&p="+m.preVerifyTime+"&u="+m.url;e.src=n}})}}()})),v.complete=function(t){for(var n=0,r=e.length;n<r;++n)e[n]();v._completes=[]},v}()),d.preVerifyStartTime=I();else{g.state=1;for(var e=v._completes,t=0,a=e.length;t<a;++t)e[t]();v._completes=[]}})),S.invoke||(S.invoke=function(t,n,r){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,T(n),r)},S.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})},ready:function(e){0!=g.state?e():(v._completes.push(e),!_&&b.debug&&e())},error:function(e){p<"6.0.2"||(-1==g.state?e(g.data):v._fail=e)},checkJsApi:function(e){M("checkJsApi",{jsApiList:k(e.jsApiList)},(e._complete=function(e){if(u){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var n in t){var r=a[n];r&&(t[r]=t[n],delete t[n])}return e}(e)},e))},onMenuShareTimeline:function(e){x(r.onMenuShareTimeline,{complete:function(){M("shareTimeline",{title:e.title||i,desc:e.title||i,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){x(r.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?M("sendAppMessage",{title:e.title||i,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):M("sendAppMessage",{title:e.title||i,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){x(r.onMenuShareQQ,{complete:function(){M("shareQQ",{title:e.title||i,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){x(r.onMenuShareWeibo,{complete:function(){M("shareWeiboApp",{title:e.title||i,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){x(r.onMenuShareQZone,{complete:function(){M("shareQZone",{title:e.title||i,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){M("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){M("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){M("startRecord",{},e)},stopRecord:function(e){M("stopRecord",{},e)},onVoiceRecordEnd:function(e){x("onVoiceRecordEnd",e)},playVoice:function(e){M("playVoice",{localId:e.localId},e)},pauseVoice:function(e){M("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){M("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){x("onVoicePlayEnd",e)},uploadVoice:function(e){M("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){M("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){M("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){M("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(u){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){M(r.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){M("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){M("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===w?(w=!0,M("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(w=!1,0<y.length){var t=y.shift();wx.getLocalImgData(t)}},e))):y.push(e)},getNetworkType:function(e){M("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var r=t.indexOf(":"),a=t.substring(r+1);switch(a){case"wifi":case"edge":case"wwan":e.networkType=a;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){M("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){M(r.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))},hideOptionMenu:function(e){M("hideOptionMenu",{},e)},showOptionMenu:function(e){M("showOptionMenu",{},e)},closeWindow:function(e){M("closeWindow",{},e=e||{})},hideMenuItems:function(e){M("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){M("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){M("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){M("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){M("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(h){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e))},openAddress:function(e){M(r.openAddress,{},(e._complete=function(e){e=function(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}(e)},e))},openProductSpecificView:function(e){M(r.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,n=[],a=0,s=t.length;a<s;++a){var i=t[a],o={card_id:i.cardId,card_ext:i.cardExt};n.push(o)}M(r.addCard,{card_list:n},(e._complete=function(e){var t=e.card_list;if(t){for(var n=0,r=(t=JSON.parse(t)).length;n<r;++n){var a=t[n];a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ}e.cardList=t,delete e.card_list}},e))},chooseCard:function(e){M("chooseCard",{app_id:b.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},openCard:function(e){for(var t=e.cardList,n=[],a=0,s=t.length;a<s;++a){var i=t[a],o={card_id:i.cardId,code:i.code};n.push(o)}M(r.openCard,{card_list:n},e)},consumeAndShareCard:function(e){M(r.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){M(r.chooseWXPay,B(e),e)},openEnterpriseRedPacket:function(e){M(r.openEnterpriseRedPacket,B(e),e)},startSearchBeacons:function(e){M(r.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){M(r.stopSearchBeacons,{},e)},onSearchBeacons:function(e){x(r.onSearchBeacons,e)},openEnterpriseChat:function(e){M("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)},launchMiniProgram:function(e){M("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}}(e.path),envVersion:e.envVersion},e)},openBusinessView:function(e){M("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(u){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))},miniProgram:{navigateBack:function(e){e=e||{},L((function(){M("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){L((function(){M("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){L((function(){M("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){L((function(){M("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){L((function(){M("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){L((function(){M("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){L((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}},R=1,A={};return s.addEventListener("error",(function(e){if(!u){var t=e.target,n=t.tagName,r=t.src;if(("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n)&&-1!=r.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var a=t["wx-id"];if(a||(a=R++,t["wx-id"]=a),A[a])return;A[a]=!0,wx.ready((function(){wx.getLocalImgData({localId:r,success:function(e){t.src=e.localData}})}))}}}),!0),s.addEventListener("load",(function(e){if(!u){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var r=t["wx-id"];r&&(A[r]=!1)}}}),!0),t&&(e.wx=e.jWeixin=S),S}function M(t,n,r){e.WeixinJSBridge?WeixinJSBridge.invoke(t,T(n),(function(e){E(t,e,r)})):P(t,r)}function x(t,n,r){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){r&&r.trigger&&r.trigger(e),E(t,e,n)})):P(t,r||n)}function T(e){return(e=e||{}).appId=b.appId,e.verifyAppId=b.appId,e.verifySignType="sha1",e.verifyTimestamp=b.timestamp+"",e.verifyNonceStr=b.nonceStr,e.verifySignature=b.signature,e}function B(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function E(e,t,n){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var r=t.errMsg;r||(r=t.err_msg,delete t.err_msg,r=function(e,t){var n=e,r=a[n];r&&(n=r);var s="ok";if(t){var i=t.indexOf(":");"confirm"==(s=t.substring(i+1))&&(s="ok"),"failed"==s&&(s="fail"),-1!=s.indexOf("failed_")&&(s=s.substring(7)),-1!=s.indexOf("fail_")&&(s=s.substring(5)),"access denied"!=(s=(s=s.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=s||(s="permission denied"),"config"==n&&"function not exist"==s&&(s="ok"),""==s&&(s="fail")}return n+":"+s}(e,r),t.errMsg=r),(n=n||{})._complete&&(n._complete(t),delete n._complete),r=t.errMsg||"",b.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var s=r.indexOf(":");switch(r.substring(s+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function k(e){if(e){for(var t=0,n=e.length;t<n;++t){var a=e[t],s=r[a];s&&(e[t]=s)}return e}}function P(e,t){if(!(!b.debug||t&&t.isInnerInvoke)){var n=a[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function I(){return(new Date).getTime()}function L(t){_&&(e.WeixinJSBridge?t():s.addEventListener&&s.addEventListener("WeixinJSBridgeReady",t,!1))}}))},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"1dde":function(e,t,n){var r=n("d039"),a=n("b622"),s=n("2d00"),i=a("species");e.exports=function(e){return s>=51||!r((function(){var t=[],n=t.constructor={};return n[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1fb5":function(e,t,n){"use strict";t.byteLength=c,t.toByteArray=u,t.fromByteArray=d;for(var r=[],a=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=i.length;o<l;++o)r[o]=i[o],a[i.charCodeAt(o)]=o;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=f(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function _(e,t,n){return 3*(t+n)/4-n}function u(e){var t,n,r=f(e),i=r[0],o=r[1],l=new s(_(e,i,o)),c=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===o&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===o&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l}function h(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function p(e,t,n){for(var r,a=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(h(r));return a.join("")}function d(e){for(var t,n=e.length,a=n%3,s=[],i=16383,o=0,l=n-a;o<l;o+=i)s.push(p(e,o,o+i>l?l:o+i));return 1===a?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},2444:function(e,t,n){"use strict";(function(t){var r=n("c532"),a=n("c8af"),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n("b50d")),e}var l={adapter:o(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l}).call(this,n("4362"))},"2d83":function(e,t,n){"use strict";var r=n("387f");e.exports=function(e,t,n,a,s){var i=new Error(e);return r(i,t,n,a,s)}},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"30b5":function(e,t,n){"use strict";var r=n("c532");function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(a(t)+"="+a(e))})))})),s=i.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},"387f":function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},3934:function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"466d":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),s=n("50c4"),i=n("1d80"),o=n("8aa5"),l=n("14c3");r("match",1,(function(e,t,n){return[function(t){var n=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=a(e),f=String(this);if(!i.global)return l(i,f);var c=i.unicode;i.lastIndex=0;var _,u=[],h=0;while(null!==(_=l(i,f))){var p=String(_[0]);u[h]=p,""===p&&(i.lastIndex=o(f,s(i.lastIndex),c)),h++}return 0===h?null:u}]}))},"467f":function(e,t,n){"use strict";var r=n("2d83");e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},"4a7b":function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){t=t||{};var n={},a=["url","method","data"],s=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function f(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(e[a],t[a])}r.forEach(a,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(s,f),r.forEach(i,(function(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(void 0,t[a])})),r.forEach(o,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var c=a.concat(s).concat(i).concat(o),_=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(_,f),n}},5187:function(e,t,n){},5270:function(e,t,n){"use strict";var r=n("c532"),a=n("c401"),s=n("2e67"),i=n("2444");function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){o(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||i.adapter;return t(e).then((function(t){return o(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(o(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5700:function(e,t,n){e.exports=n.p+"static/img/recorder_tip.02eede80.gif"},"58b7":function(e,t,n){(function(t){(function(){var r=n("00d8"),a=n("9a63").utf8,s=n("9a63").bin,i=function(e){e.constructor==String?e=a.stringToBytes(e):"undefined"!==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());var n=r.bytesToWords(e),s=8*e.length,i=[],o=1732584193,l=-271733879,f=-1732584194,c=271733878,_=-1009589776;n[s>>5]|=128<<24-s%32,n[15+(s+64>>>9<<4)]=s;for(var u=0;u<n.length;u+=16){for(var h=o,p=l,d=f,m=c,b=_,v=0;v<80;v++){if(v<16)i[v]=n[u+v];else{var g=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=g<<1|g>>>31}var w=(o<<5|o>>>27)+_+(i[v]>>>0)+(v<20?1518500249+(l&f|~l&c):v<40?1859775393+(l^f^c):v<60?(l&f|l&c|f&c)-1894007588:(l^f^c)-899497514);_=c,c=f,f=l<<30|l>>>2,l=o,o=w}o+=h,l+=p,f+=d,c+=m,_+=b}return[o,l,f,c,_]},o=function(e,t){var n=r.wordsToBytes(i(e));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)};o._blocksize=16,o._digestsize=20,e.exports=o})()}).call(this,n("b639").Buffer)},"5bd5":function(e,t,n){"use strict";var r=n("5187"),a=n.n(r);a.a},"5f02":function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"65f0":function(e,t,n){var r=n("861d"),a=n("e8b5"),s=n("b622"),i=s("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[i],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"7a77":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"7aac":function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,a,s,i){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"83b9":function(e,t,n){"use strict";var r=n("d925"),a=n("e683");e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8df4":function(e,t,n){"use strict";var r=n("7a77");function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e,t=new a((function(t){e=t}));return{token:t,cancel:e}},e.exports=a},9152:function(e,t){t.read=function(e,t,n,r,a){var s,i,o=8*a-r-1,l=(1<<o)-1,f=l>>1,c=-7,_=n?a-1:0,u=n?-1:1,h=e[t+_];for(_+=u,s=h&(1<<-c)-1,h>>=-c,c+=o;c>0;s=256*s+e[t+_],_+=u,c-=8);for(i=s&(1<<-c)-1,s>>=-c,c+=r;c>0;i=256*i+e[t+_],_+=u,c-=8);if(0===s)s=1-f;else{if(s===l)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),s-=f}return(h?-1:1)*i*Math.pow(2,s-r)},t.write=function(e,t,n,r,a,s){var i,o,l,f=8*s-a-1,c=(1<<f)-1,_=c>>1,u=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),t+=i+_>=1?u/l:u*Math.pow(2,1-_),t*l>=2&&(i++,l/=2),i+_>=c?(o=0,i=c):i+_>=1?(o=(t*l-1)*Math.pow(2,a),i+=_):(o=t*Math.pow(2,_-1)*Math.pow(2,a),i=0));a>=8;e[n+h]=255&o,h+=p,o/=256,a-=8);for(i=i<<a|o,f+=a;f>0;e[n+h]=255&i,h+=p,i/=256,f-=8);e[n+h-p]|=128*d}},9263:function(e,t,n){"use strict";var r=n("ad6d"),a=n("9f7f"),s=RegExp.prototype.exec,i=String.prototype.replace,o=s,l=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],_=l||c||f;_&&(o=function(e){var t,n,a,o,_=this,u=f&&_.sticky,h=r.call(_),p=_.source,d=0,m=e;return u&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(e).slice(_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==e[_.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,d++),n=new RegExp("^(?:"+p+")",h)),c&&(n=new RegExp("^"+p+"$(?!\\s)",h)),l&&(t=_.lastIndex),a=s.call(u?n:_,m),u?a?(a.input=a.input.slice(d),a[0]=a[0].slice(d),a.index=_.lastIndex,_.lastIndex+=a[0].length):_.lastIndex=0:l&&a&&(_.lastIndex=_.global?a.index+a[0].length:t),c&&a&&a.length>1&&i.call(a[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a}),e.exports=o},"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),s=n("e8b5"),i=n("861d"),o=n("7b0b"),l=n("50c4"),f=n("8418"),c=n("65f0"),_=n("1dde"),u=n("b622"),h=n("2d00"),p=u("isConcatSpreadable"),d=9007199254740991,m="Maximum allowed index exceeded",b=h>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=_("concat"),g=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)},w=!b||!v;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,a,s,i=o(this),_=c(i,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?i:arguments[t],g(s)){if(a=l(s.length),u+a>d)throw TypeError(m);for(n=0;n<a;n++,u++)n in s&&f(_,u,s[n])}else{if(u>=d)throw TypeError(m);f(_,u++,s)}return _.length=u,_}})},"9a63":function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},"9f7f":function(e,t,n){"use strict";var r=n("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b50d:function(e,t,n){"use strict";var r=n("c532"),a=n("467f"),s=n("7aac"),i=n("30b5"),o=n("83b9"),l=n("c345"),f=n("3934"),c=n("2d83");e.exports=function(e){return new Promise((function(t,n){var _=e.data,u=e.headers;r.isFormData(_)&&delete u["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.Authorization="Basic "+btoa(p+":"+d)}var m=o(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),i(m,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?l(h.getAllResponseHeaders()):null,s=e.responseType&&"text"!==e.responseType?h.response:h.responseText,i={data:s,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};a(t,n,i),h=null}},h.onabort=function(){h&&(n(c("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(c("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||f(m))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;b&&(u[e.xsrfHeaderName]=b)}if("setRequestHeader"in h&&r.forEach(u,(function(e,t){"undefined"===typeof _&&"content-type"===t.toLowerCase()?delete u[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(v){if("json"!==e.responseType)throw v}"function"===typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),_||(_=null),h.send(_)}))}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),a=n("9152"),s=n("e3db");function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=f.prototype):(null===e&&(e=new f(t)),e.length=t),e}function f(e,t,n){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f))return new f(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,n,r):"string"===typeof t?p(e,t,n):b(e,t)}function _(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return _(t),t<=0?l(e,t):void 0!==n?"string"===typeof r?l(e,t).fill(n,r):l(e,t).fill(n):l(e,t)}function h(e,t){if(_(t),e=l(e,t<0?0:0|v(t)),!f.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!f.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(t,n);e=l(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function d(e,t){var n=t.length<0?0:0|v(t.length);e=l(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function m(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),f.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=f.prototype):e=d(e,t),e}function b(e,t){if(f.isBuffer(t)){var n=0|v(t.length);return e=l(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?l(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),f.alloc(+e)}function w(e,t){if(f.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return Q(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return H(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function R(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:A(e,t,n,r,a);if("number"===typeof t)return t&=255,f.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,a){var s,i=1,o=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,n/=2}function f(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){var c=-1;for(s=n;s<o;s++)if(f(e,s)===f(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*i}else-1!==c&&(s-=s-c),c=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){for(var _=!0,u=0;u<l;u++)if(f(e,s+u)!==f(t,u)){_=!1;break}if(_)return s}return-1}function M(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;i<r;++i){var o=parseInt(t.substr(2*i,2),16);if(isNaN(o))return i;e[n+i]=o}return i}function x(e,t,n,r){return ee(Q(t,e.length-n),e,n,r)}function T(e,t,n,r){return ee(W(t),e,n,r)}function B(e,t,n,r){return T(e,t,n,r)}function E(e,t,n,r){return ee($(t),e,n,r)}function k(e,t,n,r){return ee(J(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);var r=[],a=t;while(a<n){var s,i,o,l,f=e[a],c=null,_=f>239?4:f>223?3:f>191?2:1;if(a+_<=n)switch(_){case 1:f<128&&(c=f);break;case 2:s=e[a+1],128===(192&s)&&(l=(31&f)<<6|63&s,l>127&&(c=l));break;case 3:s=e[a+1],i=e[a+2],128===(192&s)&&128===(192&i)&&(l=(15&f)<<12|(63&s)<<6|63&i,l>2047&&(l<55296||l>57343)&&(c=l));break;case 4:s=e[a+1],i=e[a+2],o=e[a+3],128===(192&s)&&128===(192&i)&&128===(192&o)&&(l=(15&f)<<18|(63&s)<<12|(63&i)<<6|63&o,l>65535&&l<1114112&&(c=l))}null===c?(c=65533,_=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=_}return O(r)}t.Buffer=f,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),t.kMaxLength=o(),f.poolSize=8192,f._augment=function(e){return e.__proto__=f.prototype,e},f.from=function(e,t,n){return c(null,e,t,n)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(e,t,n){return u(null,e,t,n)},f.allocUnsafe=function(e){return h(null,e)},f.allocUnsafeSlow=function(e){return h(null,e)},f.isBuffer=function(e){return!(null==e||!e._isBuffer)},f.compare=function(e,t){if(!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,s=Math.min(n,r);a<s;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=f.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},f.byteLength=w,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},f.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):y.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,a){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var s=a-r,i=n-t,o=Math.min(s,i),l=this.slice(r,a),c=e.slice(t,n),_=0;_<o;++_)if(l[_]!==c[_]){s=l[_],i=c[_];break}return s<i?-1:i<s?1:0},f.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return R(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return R(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return M(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return B(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function O(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function H(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",s=t;s<n;++s)a+=K(e[s]);return a}function V(e,t,n){for(var r=e.slice(t,n),a="",s=0;s<r.length;s+=2)a+=String.fromCharCode(r[s]+256*r[s+1]);return a}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Y(e,t,n,r,a,s){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,s=Math.min(e.length-n,2);a<s;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,s=Math.min(e.length-n,4);a<s;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function q(e,t,n,r,a,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,s){return s||q(e,t,n,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,n,r,23,4),n+4}function X(e,t,n,r,s){return s||q(e,t,n,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e),f.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=f.prototype;else{var a=t-e;n=new f(a,void 0);for(var s=0;s<a;++s)n[s]=this[s+e]}return n},f.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);var r=this[e],a=1,s=0;while(++s<t&&(a*=256))r+=this[e+s]*a;return r},f.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);var r=this[e+--t],a=1;while(t>0&&(a*=256))r+=this[e+--t]*a;return r},f.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);var r=this[e],a=1,s=0;while(++s<t&&(a*=256))r+=this[e+s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);var r=t,a=1,s=this[e+--r];while(r>0&&(a*=256))s+=this[e+--r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s},f.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),a.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),a.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),a.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),a.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;Y(this,e,t,n,a,0)}var s=1,i=0;this[t]=255&e;while(++i<n&&(s*=256))this[t+i]=e/s&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;Y(this,e,t,n,a,0)}var s=n-1,i=1;this[t+s]=255&e;while(--s>=0&&(i*=256))this[t+s]=e/i&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,1,255,0),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},f.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);Y(this,e,t,n,a-1,-a)}var s=0,i=1,o=0;this[t]=255&e;while(++s<n&&(i*=256))e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);Y(this,e,t,n,a-1,-a)}var s=n-1,i=1,o=0;this[t+s]=255&e;while(--s>=0&&(i*=256))e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,1,127,-128),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},f.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return X(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return X(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,s=r-n;if(this===e&&n<t&&t<r)for(a=s-1;a>=0;--a)e[a+t]=this[a+n];else if(s<1e3||!f.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},f.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(s=t;s<n;++s)this[s]=e;else{var i=f.isBuffer(e)?e:Q(new f(e,r).toString()),o=i.length;for(s=0;s<n-t;++s)this[s+t]=i[s%o]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function Z(e){if(e=G(e).replace(z,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function G(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function Q(e,t){var n;t=t||1/0;for(var r=e.length,a=null,s=[],i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&s.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,a,s=[],i=0;i<e.length;++i){if((t-=2)<0)break;n=e.charCodeAt(i),r=n>>8,a=n%256,s.push(a),s.push(r)}return s}function $(e){return r.toByteArray(Z(e))}function ee(e,t,n,r){for(var a=0;a<r;++a){if(a+n>=t.length||a>=e.length)break;t[a+n]=e[a]}return a}function te(e){return e!==e}}).call(this,n("c8ba"))},bc3a:function(e,t,n){e.exports=n("cee4")},c345:function(e,t,n){"use strict";var r=n("c532"),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,i={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(i[t]&&a.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},c401:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},c532:function(e,t,n){"use strict";var r=n("1d2b"),a=Object.prototype.toString;function s(e){return"[object Array]"===a.call(e)}function i(e){return"undefined"===typeof e}function o(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function l(e){return"[object ArrayBuffer]"===a.call(e)}function f(e){return"undefined"!==typeof FormData&&e instanceof FormData}function c(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function _(e){return"string"===typeof e}function u(e){return"number"===typeof e}function h(e){return null!==e&&"object"===typeof e}function p(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function d(e){return"[object Date]"===a.call(e)}function m(e){return"[object File]"===a.call(e)}function b(e){return"[object Blob]"===a.call(e)}function v(e){return"[object Function]"===a.call(e)}function g(e){return h(e)&&v(e.pipe)}function w(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function S(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function R(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function A(){var e={};function t(t,n){p(e[n])&&p(t)?e[n]=A(e[n],t):p(t)?e[n]=A({},t):s(t)?e[n]=t.slice():e[n]=t}for(var n=0,r=arguments.length;n<r;n++)R(arguments[n],t);return e}function M(e,t,n){return R(t,(function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t})),e}function x(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:s,isArrayBuffer:l,isBuffer:o,isFormData:f,isArrayBufferView:c,isString:_,isNumber:u,isObject:h,isPlainObject:p,isUndefined:i,isDate:d,isFile:m,isBlob:b,isFunction:v,isStream:g,isURLSearchParams:w,isStandardBrowserEnv:S,forEach:R,merge:A,extend:M,trim:y,stripBOM:x}},c8af:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},cee4:function(e,t,n){"use strict";var r=n("c532"),a=n("1d2b"),s=n("0a06"),i=n("4a7b"),o=n("2444");function l(e){var t=new s(e),n=a(s.prototype.request,t);return r.extend(n,s.prototype,t),r.extend(n,t),n}var f=l(o);f.Axios=s,f.create=function(e){return l(i(f.defaults,e))},f.Cancel=n("7a77"),f.CancelToken=n("8df4"),f.isCancel=n("2e67"),f.all=function(e){return Promise.all(e)},f.spread=n("0df6"),f.isAxiosError=n("5f02"),e.exports=f,e.exports.default=f},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),s=n("b622"),i=n("9263"),o=n("9112"),l=s("species"),f=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),_=s("replace"),u=function(){return!!/./[_]&&""===/./[_]("a","$0")}(),h=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,_){var p=s(e),d=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=d&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!d||!m||"replace"===e&&(!f||!c||u)||"split"===e&&!h){var b=/./[p],v=n(p,""[e],(function(e,t,n,r,a){return t.exec===i?d&&!a?{done:!0,value:b.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:u}),g=v[0],w=v[1];r(String.prototype,e,g),r(RegExp.prototype,p,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}_&&o(RegExp.prototype[p],"sham",!0)}},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,r="/"===i.charAt(0))}return t=n(a(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===s(e,-1);return e=n(a(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),s=r(n.split("/")),i=Math.min(a.length,s.length),o=i,l=0;l<i;l++)if(a[l]!==s[l]){o=l;break}var f=[];for(l=o;l<a.length;l++)f.push("..");return f=f.concat(s.slice(o)),f.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,s=e.length-1;s>=1;--s)if(t=e.charCodeAt(s),47===t){if(!a){r=s;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,s=0,i=e.length-1;i>=0;--i){var o=e.charCodeAt(i);if(47!==o)-1===r&&(a=!1,r=i+1),46===o?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!a){n=i+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},f6b4:function(e,t,n){"use strict";var r=n("c532");function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},fdab:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[r("el-row",[r("el-button",{attrs:{type:"success"},nativeOn:{touchstart:function(t){return e.startRecord(t)},touchend:function(t){return e.stopRecord(t)}}},[e._v("录音")]),r("img",{directives:[{name:"show",rawName:"v-show",value:e.showGif,expression:"showGif"}],staticClass:"recorder_gif",attrs:{src:n("5700")}})],1),r("el-row",[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.createCode()}}},[e._v("生成二维码")])],1),r("el-row",[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.scanCode()}}},[e._v("扫码")]),r("div",[e._v(e._s(e.qrcodeStr))])],1),r("el-row",[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.getLocation()}}},[e._v("定位")]),r("div",[e._v(e._s(e.locationMsg))])],1),r("el-row",[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.chooseLocation()}}},[e._v("选择位置")]),r("div",[e._v(e._s(e.customAddr))])],1),r("el-row",[r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.clickPhoto()}}},[e._v("拍照")]),r("div",{staticStyle:{"margin-top":"10px"}},[""!=e.imageUrl?r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.imageUrl,"preview-src-list":[e.imageUrl],fit:"scale-down"}}):e._e()],1),r("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.changeFile}})],1)],1)},a=[],s=(n("99af"),n("d3b7"),n("ac1f"),n("3ca3"),n("466d"),n("ddb0"),n("2b3d"),n("18a0")),i=n.n(s),o=n("bc3a"),l=n.n(o),f=l.a.create({timeout:5e3});f.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject()})),f.interceptors.response.use((function(e){if(200===e.status)return e.data;Promise.reject()}),(function(e){return console.log(e),Promise.reject()}));var c=f,_=n("0d4e"),u=n.n(_),h={name:"HelloWorld",props:{msg:String},data:function(){return{locationMsg:"",customAddr:"",imageUrl:"",isWeixin:!1,qrcodeStr:"",rec:"",recording:0,showGif:!1}},methods:{startRecord:function(){var e=this,t=u()({type:"mp3",sampleRate:16e3,bitRate:16,onProcess:function(e,t,n,r,a,s){}});this.rec=t,this.recording=1,t.open((function(){1==e.recording?(e.recording=2,e.showGif=!0,t.start()):t.close()}),(function(e,t){console.log((t?"UserNotAllow，":"")+"无法录音:"+e)}))},stopRecord:function(){var e=this;2==this.recording?this.rec.stop((function(t,n){console.log(t,(window.URL||webkitURL).createObjectURL(t),"时长:"+n+"ms"),e.rec.close(),e.rec=null,e.recording=0,e.showGif=!1;var r=document.createElement("audio");r.style.display="none",r.controls=!0,document.body.appendChild(r),r.src=(window.URL||webkitURL).createObjectURL(t),r.play()}),(function(e){console.log("录音失败:"+e),this.rec.close(),this.rec=null,this.recording=0,this.showGif=!1})):this.recording=0},createCode:function(){this.$router.push({path:"qrcode"})},scanCode:function(){this.isWeixin?i.a.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var t=e.resultStr;console.log(t)}}):this.$router.push({path:"scanCode"})},changeFile:function(e){if(0!=e.target.files.length){var t=e.target.files[0],n=new FileReader,r=this;n.onloadend=function(){r.imageUrl=this.result},n.readAsDataURL(t)}},getLocation:function(){var e=this,t=this.$loading({text:"获取位置中",fullscreen:!1,background:"rgba(0, 0, 0, 0)"});if(this.isWeixin)i.a.getLocation({type:"gcj02",success:function(t){var n=t.latitude,r=t.longitude;c({url:"https://39.108.55.110/WeChatTest/servlet/getLocation?latitude=".concat(n,"&longitude=").concat(r),method:"get"}).then((function(t){console.log(t),0!=t.status&&(e.locationMsg=t.message),e.locationMsg=t.result.address}))},fail:function(e){console.log("失败了",e)},complete:function(){t.close()}});else{var n=new qq.maps.Geolocation("Q44BZ-OFZCF-EPFJM-JNVWO-OKT3T-6TBEL","myapp");n.getLocation((function(n){c({url:"https://39.108.55.110/WeChatTest/servlet/getLocation?latitude=".concat(n.lat,"&longitude=").concat(n.lng),method:"get"}).then((function(n){console.log(n),0!=n.status&&(e.locationMsg=n.message),e.locationMsg=n.result.address,t.close()}))}),null)}},chooseLocation:function(){this.$router.push({path:"selectLocation"})},clickPhoto:function(){this.$refs.uploadInput.click()}},mounted:function(){var e=this,t=Boolean(navigator.userAgent.match(/MicroMessenger/gi));this.isWeixin=t,t&&c({url:"https://39.108.55.110/WeChatTest/getWechatConfigInfo",method:"get"}).then((function(e){console.log(e);var t=e.ticket,r=e.nonceStr,a=e.timestamp,s="jsapi_ticket=".concat(t,"&noncestr=").concat(r,"&timestamp=").concat(a,"&url=").concat(window.location.href),o=n("58b7"),l=o(s);i.a.config({debug:!1,appId:e.appId,timestamp:a,nonceStr:r,signature:l,jsApiList:["openLocation","getLocation","scanQRCode"]})})),this.$EventBus.$on("location",(function(t){e.customAddr=t.poiaddress+t.poiname,console.log(t)})),this.$EventBus.$on("qrcodeResult",(function(t){e.qrcodeStr=t}))},beforeDestroy:function(){this.$EventBus.$off("location"),this.$EventBus.$off("qrcodeResult")}},p=h,d=(n("5bd5"),n("2877")),m=Object(d["a"])(p,r,a,!1,null,"7f51cccc",null);t["default"]=m.exports}}]);